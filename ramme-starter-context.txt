This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: **/*.lock, **/dist/**, **/template/dist/**, **/template/node_modules/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
template/
  public/
    api_mock.json
    orange.png
    vite.svg
  src/
    assets/
      orange.png
    components/
      AddItemsModal.tsx
      AIChatWidget.tsx
      AppFooter.tsx
      AppHeader.tsx
      AutoForm.tsx
      HashLinkScroll.tsx
      NotFound.tsx
      PageTitleUpdater.tsx
      ProtectedRoute.tsx
      ScrollToTop.tsx
      TemplateSwitcher.tsx
    config/
      app.manifest.ts
      component-registry.tsx
      navigation.ts
    data/
      mock-charts.ts
      mockData.ts
      mockLedger.ts
    engine/
      renderers/
        DynamicBlock.tsx
        DynamicPage.tsx
        route-generator.tsx
      runtime/
        data-seeder.ts
        MqttContext.tsx
        SitemapContext.tsx
        useAction.ts
        useCrudLocalStorage.ts
        useDataQuery.ts
        useSignal.ts
        useSignalStore.ts
        useWorkflowEngine.ts
      types/
        manifest-types.ts
        sitemap-entry.ts
      validation/
        schema.ts
    features/
      ai/
        pages/
          AiChat.tsx
      assistant/
        useMockChat.ts
      auth/
        pages/
          AuthLayout.tsx
          LoginPage.tsx
          SignupPage.tsx
        AuthContext.tsx
      datagrid/
        SmartTable.tsx
      developer/
        GhostOverlay.tsx
        useDevTools.ts
      onboarding/
        pages/
          Welcome.tsx
      overview/
        pages/
          OverviewPage.tsx
        index.ts
      playground/
        pages/
          AccountingLedgerPage.tsx
          ItemSelectorPage.tsx
      settings/
        pages/
          BillingPage.tsx
          ProfilePage.tsx
          TeamPage.tsx
      styleguide/
        sections/
          charts/
            ChartsSection.tsx
          colors/
            ColorsSection.tsx
          elements/
            ElementsSection.tsx
          feedback/
            FeedbackSection.tsx
          forms/
            FormsSection.tsx
          icons/
            IconsSection.tsx
          layout/
            LayoutSection.tsx
          navigation/
            NavigationSection.tsx
          tables/
            TablesSection.tsx
          templates/
            TemplatesSection.tsx
          theming/
            ThemingSection.tsx
          utilities/
            UtilitiesSection.tsx
        Styleguide.tsx
      users/
        api/
          user.service.ts
          user.types.ts
        components/
          UserDrawer.tsx
        pages/
          UsersPage.tsx
        index.ts
      GenericContentPage.tsx
    templates/
      dashboard/
        dashboard.sitemap.ts
        DashboardLayout.tsx
      docs/
        docs.sitemap.ts
        DocsLayout.tsx
      settings/
        settings.sitemap.ts
        SettingsLayout.tsx
    App.css
    App.tsx
    index.css
    main.tsx
    vite-env.d.ts
  DESIGNER_GUIDE.md
  eslint.config.js
  gitignore
  index.html
  pkg.json
  postcss.config.cjs
  README.md
  tailwind.config.cjs
  tsconfig.app.json
  tsconfig.json
  tsconfig.node.json
  vite.config.ts
.gitignore
1.1.4
CHANGELOG.md
index.js
LICENSE
package.json
README.md
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="template/src/components/NotFound.tsx">
// src/pages/NotFound.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Button } from '@ramme-io/ui';

const NotFound: React.FC = () => {
  return (
    <div className="flex flex-col items-center justify-center text-center p-12">
      <h1 className="text-9xl font-black text-primary/20">404</h1>
      <h2 className="text-3xl font-bold mt-4">Page Not Found</h2>
      <p className="text-muted-foreground mt-2 mb-6">
        Sorry, the page you are looking for does not exist.
      </p>
      {/* Wrap the Button with the Link component */}
      <Link to="/">
        <Button size="lg">Return to Dashboard</Button>
      </Link>
    </div>
  );
};

export default NotFound;
</file>

<file path="template/src/components/ScrollToTop.tsx">
import { useEffect } from 'react';
import { useLocation } from 'react-router-dom';

const ScrollToTop = () => {
  const { pathname } = useLocation();

  useEffect(() => {
    // "instant" prevents the user from seeing the page scroll up
    window.scrollTo({
      top: 0,
      left: 0,
      behavior: 'instant', 
    });
  }, [pathname]);

  return null;
};

export default ScrollToTop;
</file>

<file path="template/src/config/component-registry.tsx">
import React from 'react';
import {
  DeviceCard,
  StatCard,
  BarChart,
  LineChart,
  PieChart,
  DataTable, 
  Card,
  Alert,
  EmptyState,
  ToggleSwitch
} from '@ramme-io/ui';

// ‚úÖ IMPORT YOUR CUSTOM COMPONENT
import { SmartTable } from '../features/datagrid/SmartTable';

export const COMPONENT_REGISTRY: Record<string, React.FC<any>> = {
  // IoT Primitives
  DeviceCard,
  
  // Data Display
  StatCard,
  BarChart,
  LineChart,
  PieChart,
  
  // Tables
  DataTable, // The raw grid
  
  // ‚úÖ FIX: Map "SmartTable" to the actual SmartTable component
  // (Previously it was aliased to DataTable, which broke the UI)
  SmartTable: SmartTable, 
  
  // Layout & Feedback
  Card,
  Alert,
  EmptyState,
  
  // Forms/Controls
  ToggleSwitch
};

export const getComponent = (name: string) => {
  const Component = COMPONENT_REGISTRY[name];
  
  if (!Component) {
    console.warn(`[Registry] Unknown component type: "${name}"`);
    return () => (
      <Alert variant="danger" title="Unknown Component">
        The system tried to render <code>{name}</code> but it was not found in the registry.
      </Alert>
    );
  }
  return Component;
};
</file>

<file path="template/src/engine/renderers/DynamicBlock.tsx">
import React from 'react';
import { getComponent } from '../../config/component-registry';
// @ts-ignore
import { useGeneratedSignals } from '../generated/hooks';
import { getMockData } from '../../data/mockData';

/**
 * @file DynamicBlock.tsx
 * @description The "Runtime Hydrator" for the application.
 *
 * ARCHITECTURAL ROLE:
 * This component acts as the bridge between the Abstract Syntax Tree (JSON Manifest)
 * and the concrete React UI.
 *
 * KEY RESPONSIBILITIES:
 * 1. **Component Lookup:** Resolves string types ('StatCard') to actual React components.
 * 2. **Signal Injection:** Subscribes to the real-time Signal Engine and feeds live values to props.
 * 3. **Data Hydration:** Fetches static or async data (users, logs) based on `dataId`.
 * 4. **Status Normalization:** Translates system-level signal states into UI-friendly status colors.
 */

const mapSignalStatus = (status: string): string => {
  switch (status) {
    case 'fresh': return 'online';
    case 'stale': return 'warning';
    case 'disconnected': return 'offline';
    case 'error': return 'error';
    default: return 'offline';
  }
};

export const DynamicBlock: React.FC<any> = ({ block }) => {
  const Component = getComponent(block.type);
  const signals = useGeneratedSignals();

  const { signalId, dataId, ...staticProps } = block.props;
  
  const dynamicProps: Record<string, any> = { 
    ...staticProps,
    dataId,
    signalId 
  };

  // --- DATA INJECTION ---
  if (dataId) {
    const resolvedData = getMockData(dataId);
    dynamicProps.data = resolvedData || [];
    dynamicProps.rowData = resolvedData || [];
  }

  // --- SIGNAL INJECTION ---
  if (signalId && signals && signalId in signals) {
    // @ts-ignore
    const signalState = signals[signalId];

    if (signalState) {
      // ‚úÖ FIX: Check for null and handle objects vs raw values
      const isSignalObject = typeof signalState === 'object' && signalState !== null;

      // Extract Value
      const rawValue = (isSignalObject && 'value' in signalState) 
        ? signalState.value 
        : signalState;

      // Extract Status
      const rawStatus = (isSignalObject && 'status' in signalState)
        ? signalState.status
        : 'fresh'; // Default for raw values

      dynamicProps.value = typeof rawValue === 'number' ? rawValue : String(rawValue);
      
      // ‚úÖ FIX: Explicitly cast to String to satisfy TypeScript
      dynamicProps.status = mapSignalStatus(String(rawStatus));
    } else {
      dynamicProps.status = mapSignalStatus('disconnected');
    }
  }

  return <Component key={block.id} {...dynamicProps} />;
};
</file>

<file path="template/src/engine/renderers/DynamicPage.tsx">
import React from 'react';
import { PageHeader, Alert, Button, Icon } from '@ramme-io/ui';
import { appManifest } from '../../config/app.manifest';
// Reuse the GhostOverlay for structure visualization
import { GhostOverlay } from '../../features/developer/GhostOverlay';
// Import the Worker Bee
import { DynamicBlock } from './DynamicBlock';
// Import the Hook to control the overlay
import { useDevTools } from '../../features/developer/useDevTools';

/**
 * @file DynamicPage.tsx
 * @description The "Layout Engine" of the application.
 *
 * ARCHITECTURAL ROLE:
 * This component is the bridge between the Abstract JSON Manifest and the Concrete DOM.
 * It acts as the "General Contractor," taking the blueprint (Manifest) and instructing
 * the workers (DynamicBlock) where to build.
 *
 * HIERARCHY:
 * App -> Routes -> DynamicPage -> (Iterates Sections) -> DynamicBlock -> (Actual Component)
 *
 * KEY FEATURES:
 * 1. **Manifest Lookup:** Uses the `pageId` prop to find the correct configuration in `app.manifest.ts`.
 * 2. **Grid Composition:** Translates abstract layout numbers (e.g., `columns: 3`) into real CSS Grid styles.
 * 3. **DevTools Integration:** Wraps blocks in `GhostOverlay` (when enabled) to visualize the
 * hidden boundaries and signal connections during development.
 */

interface DynamicPageProps {
  pageId: string;
}

export const DynamicPage: React.FC<DynamicPageProps> = ({ pageId }) => {
  // 1. Initialize DevTools
  const { isGhostMode, toggleGhostMode } = useDevTools();

  // 2. Look up the page definition
  const pageConfig = (appManifest as any).pages?.find((p: any) => p.id === pageId);

  if (!pageConfig) {
    return (
      <div className="p-8">
        <Alert variant="danger" title="Page Not Found">
          The manifest does not contain a page with ID: <code>{pageId}</code>.
        </Alert>
      </div>
    );
  }

  return (
    <div className="space-y-8 fade-in p-6">
      <PageHeader 
        title={pageConfig.title} 
        description={pageConfig.description}
        actions={
          <Button 
            variant={isGhostMode ? 'accent' : 'outline'} 
            size="sm"
            onClick={toggleGhostMode}
            title="Toggle Ghost Mode (Ctrl+Shift+G)"
          >
            <Icon name={isGhostMode ? 'eye' : 'eye-off'} className="mr-2" />
            {isGhostMode ? 'Ghost Mode: ON' : 'Dev Tools'}
          </Button>
        }
      />

      {/* 4. Render Sections */}
      {pageConfig.sections.map((section: any) => (
        <div key={section.id} className="space-y-4">
          {section.title && <h3 className="text-xl font-semibold">{section.title}</h3>}
          
          <div 
            className="grid gap-6"
            style={{ 
              // ‚ö°Ô∏è IMPROVEMENT: Default to 1 column (Full Width) instead of 3.
              // This fixes the "narrow table" issue immediately.
              gridTemplateColumns: `repeat(${section.layout?.columns || 1}, minmax(0, 1fr))` 
            }}
          >
            {section.blocks.map((block: any) => {
              // ‚ö°Ô∏è IMPROVEMENT: Calculate Spanning
              // Allows a block to stretch across multiple columns if needed.
              const colSpan = block.layout?.colSpan || 1;
              const rowSpan = block.layout?.rowSpan || 1;

              return (
                <div 
                  key={block.id}
                  style={{ 
                    gridColumn: `span ${colSpan}`,
                    gridRow: `span ${rowSpan}`
                  }}
                >
                   <GhostOverlay 
                     isActive={isGhostMode}
                     componentId={block.id} 
                     componentType={block.type}
                     signalId={block.props.signalId}
                   >
                     <DynamicBlock block={block} />
                   </GhostOverlay>
                </div>
              );
            })}
          </div>
        </div>
      ))}
    </div>
  );
};

export default DynamicPage;
</file>

<file path="template/src/engine/renderers/route-generator.tsx">
/**
 * @file route-generator.tsx
 * @description This file is the core engine of the Sitemap-Driven Architecture.
 * Its purpose is to dynamically generate all application routes by reading directly
 * from a designer-friendly `sitemap` array. This abstracts all routing logic
 * away from our designers, empowering them to manage the app's structure from
 * a single, simple configuration file.
 */

import { Route, Navigate } from 'react-router-dom';
// CORRECTED IMPORT: Point to the canonical type definition
import type { SitemapEntry } from './sitemap-entry';

/**
 * Recursively generates React Router `<Route>` components from a sitemap array.
 * @param {SitemapEntry[]} routes - The array of sitemap entries to process.
 * @returns {JSX.Element[]} An array of React Router `<Route>` components.
 */

export const generateRoutes = (routes: SitemapEntry[]) => {
  return routes.map((route) => {
    // Check if the current route is a "parent" route with children
    if (route.children && route.children.length > 0) {
      // Get the path of the first child to use for redirection
      const firstChildPath = route.children[0].path;
      
      return (
        // Create the parent <Route> (e.g., /data)
        <Route key={route.id} path={route.path} element={<route.component />}>
          
          {/* PROFESSIONAL PROTOTYPING: This is a key feature for DX.
            It creates an "index" route that automatically redirects the user
            from the parent path (e.g., /data) to its first child (e.g., /data/grid).
            This prevents designers from ever seeing a blank parent page.
          */}
          <Route index element={<Navigate to={firstChildPath} replace />} />
          
          {/* Recursively generate all nested child routes */}
          {generateRoutes(route.children)}
        </Route>
      );
    }

    // Standard case: This is a simple route with no children.
    return <Route key={route.id} path={route.path} element={<route.component />} />;
  });
};
</file>

<file path="template/src/engine/runtime/data-seeder.ts">
// src/core/data-seeder.ts

// ‚úÖ Match the export from your new mockData.ts
import { DATA_REGISTRY } from '../../data/mockData'; 

/**
 * @file data-seeder.ts
 * @description The "Big Bang" for the client-side database.
 * * ARCHITECTURAL ROLE:
 * This utility ensures that the LocalStorage "Data Lake" is never empty.
 * On app launch, it checks if data exists. If not, it writes the seed data
 * from `mockData.ts` into the browser's storage.
 * * This allows the app to feel "alive" with data immediately after installation.
 */

export const initializeDataLake = () => {
  if (typeof window === 'undefined') return;

  console.groupCollapsed('üåä [Data Lake] Initialization');
  
  Object.entries(DATA_REGISTRY).forEach(([key, seedData]) => {
    // ‚ö†Ô∏è REMOVED PREFIX ('ramme_db_') so it matches AuthContext
    const storageKey = key; 
    const existing = localStorage.getItem(storageKey);

    if (!existing) {
      console.log(`‚ú® Seeding collection: ${key} (${seedData.length} records)`);
      localStorage.setItem(storageKey, JSON.stringify(seedData));
    } else {
      console.log(`‚úÖ Collection exists: ${key}`);
    }
  });

  console.groupEnd();
};

/**
 * Utility to clear the lake (useful for a "Reset Data" button)
 */
export const resetDataLake = () => {
  Object.keys(DATA_REGISTRY).forEach((key) => {
    localStorage.removeItem(key); // Matches the storageKey above
  });
  window.location.reload();
};
</file>

<file path="template/src/engine/runtime/MqttContext.tsx">
import React, { createContext, useContext, useEffect, useRef, useState } from 'react';
import mqtt, { type MqttClient } from 'mqtt';
import { appManifest } from '../../config/app.manifest'; // ‚úÖ Connect to the Single Source of Truth

interface MqttContextType {
  isConnected: boolean;
  lastMessage: Record<string, string>;
  publish: (topic: string, message: string) => void;
  subscribe: (topic: string) => void;
  unsubscribe: (topic: string) => void;
}

const MqttContext = createContext<MqttContextType | null>(null);

/**
 * @file MqttContext.tsx
 * @description The Real-Time Connectivity Layer.
 *
 * ARCHITECTURAL ROLE:
 * This provider establishes a persistent WebSocket connection to the MQTT Broker
 * defined in `app.manifest.ts`.
 *
 * KEY FEATURES:
 * 1. **Global Connection:** Maintains one connection for the whole app (Singleton pattern).
 * 2. **Topic Management:** specific components (like DeviceCard) can subscribe to
 * specific topics on demand using `subscribe()`.
 * 3. **State Distribution:** Broadcasts the latest messages to any component using `useMqtt()`.
 */

export const MqttProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [isConnected, setIsConnected] = useState(false);
  const [lastMessage, setLastMessage] = useState<Record<string, string>>({});
  const clientRef = useRef<MqttClient | null>(null);
  const subscriptions = useRef<Set<string>>(new Set());

  useEffect(() => {
    // ‚úÖ Load Broker URL from the Manifest Config
    const brokerUrl = appManifest.config.brokerUrl || 'wss://test.mosquitto.org:8081';
    console.log(`[MQTT] Connecting to ${brokerUrl}...`);
    
    const client = mqtt.connect(brokerUrl);
    clientRef.current = client;

    client.on('connect', () => {
      console.log('[MQTT] Connected ‚úÖ');
      setIsConnected(true);
    });

    // ‚úÖ FIX: Proper typing for MQTT payload (Buffer)
    client.on('message', (topic: string, payload: Buffer) => {
      const messageStr = payload.toString();
      // console.log(`[MQTT] Msg: ${topic} -> ${messageStr}`); // Optional debug
      setLastMessage((prev) => ({ ...prev, [topic]: messageStr }));
    });

    client.on('error', (err) => {
      console.error('[MQTT] Connection error: ', err);
      client.end();
    });

    return () => {
      console.log('[MQTT] Disconnecting...');
      client.end();
    };
  }, []);

  const subscribe = (topic: string) => {
    if (clientRef.current && !subscriptions.current.has(topic)) {
      console.log(`[MQTT] Subscribing to: ${topic}`);
      clientRef.current.subscribe(topic);
      subscriptions.current.add(topic);
    }
  };

  const unsubscribe = (topic: string) => {
    if (clientRef.current && subscriptions.current.has(topic)) {
      clientRef.current.unsubscribe(topic);
      subscriptions.current.delete(topic);
    }
  };

  const publish = (topic: string, message: string) => {
    if (clientRef.current) {
      clientRef.current.publish(topic, message);
    }
  };

  return (
    <MqttContext.Provider value={{ isConnected, lastMessage, subscribe, unsubscribe, publish }}>
      {children}
    </MqttContext.Provider>
  );
};

export const useMqtt = () => {
  const context = useContext(MqttContext);
  if (!context) throw new Error('useMqtt must be used within an MqttProvider');
  return context;
};
</file>

<file path="template/src/engine/runtime/SitemapContext.tsx">
/**
 * @file SitemapContext.tsx
 * @repository ramme-app-starter
 * @description This file implements a React Context for the sitemap.
 *
 * STRATEGIC IMPORTANCE:
 * This context is the "plumbing" that makes our swappable layout
 * strategy possible. It allows a top-level layout component (like
 * `DashboardLayout.tsx` or `DocsLayout.tsx`) to "provide" its specific
 * sitemap array (e.g., `dashboard.sitemap.ts`) to all of its children.
 *
 * Any component deep in the tree (like a sidebar, breadcrumbs, or page
 * header) can then "consume" this sitemap data using the `useSitemap`
 * hook to render the correct navigation, titles, and icons.
 *
 * This effectively decouples the navigation UI from the sitemap data,
 * allowing us to change the entire application's IA simply by changing
 * the data provided by the `SitemapProvider`.
 */

import { createContext, useContext } from 'react';
// Import the canonical "schema" for a sitemap entry
import type { SitemapEntry } from '../types/sitemap-entry';

// 1. Create the context
// We initialize it with an empty array as a safe default.
// This context will hold the sitemap array specific to the active layout.
const SitemapContext = createContext<SitemapEntry[]>([]);

/**
 * A custom hook to easily access the active sitemap array.
 * This abstracts the `useContext` logic and provides a clean API
 * for components that need to read the sitemap.
 *
 * @returns {SitemapEntry[]} The sitemap array provided by the nearest
 * `SitemapProvider`.
 */
export const useSitemap = () => {
  const context = useContext(SitemapContext);

  // This is a critical developer-friendly check.
  // If a component tries to call `useSitemap` outside of a layout
  // that provides the context, we throw an explicit error.
  if (context === undefined) {
    throw new Error('useSitemap must be used within a SitemapProvider');
  }
  
  return context;
};

// 3. Export the Provider
// We export the Provider component directly. This is what our layout
// components will use to wrap their content and supply the sitemap data.
//
// Example Usage (in a layout file):
// <SitemapProvider value={dashboardSitemap}>
//   <AppHeader />
//   <AppSidebar />
//   <Outlet />
// </SitemapProvider>
export const SitemapProvider = SitemapContext.Provider;
</file>

<file path="template/src/engine/runtime/useAction.ts">
import { useCallback } from 'react';
import { useMqtt } from './MqttContext';
// ‚úÖ User Verified Path
import { appManifest } from '../../config/app.manifest';

/**
 * @file useAction.ts
 * @description The "Effectuator" hook.
 *
 * ARCHITECTURAL ROLE:
 * This hook handles outgoing commands from the UI. It abstracts the transport layer,
 * automatically routing actions to the correct destination (MQTT, HTTP, or Mock Console)
 * based on the entity's configuration in the manifest.
 */

export const useAction = () => {
  const { publish, isConnected } = useMqtt();
  
  // Destructure config/domain from the manifest
  const { config, domain } = appManifest;

  const sendAction = useCallback(async (entityId: string, value: any) => {
    // 1. Find the Entity definition
    // Note: If domain.entities is empty (early stage), this is where we'd add fallback logic
    const entity = domain.entities.find(e => e.id === entityId);
    
    if (!entity) {
      // For development/debugging, we log this even if the entity is missing
      console.warn(`[Action] Entity ID '${entityId}' not found in manifest.`);
      return;
    }

    // 2. Find the Primary Signal (The target of the action)
    const signalId = entity.signals[0];
    const signal = domain.signals.find(s => s.id === signalId);

    if (!signal) {
      console.warn(`[Action] No signal linked to entity: ${entityId}`);
      return;
    }

    // 3. EXECUTE based on Mode & Source
    
    // --- Mock Mode ---
    if (config.mockMode) {
      console.log(`%c[Mock Action] Setting ${entity.name} to:`, 'color: #10b981; font-weight: bold;', value);
      return;
    }

    // --- Live Mode (MQTT) ---
    if (signal.source === 'mqtt' && signal.topic) {
      if (!isConnected) {
        console.warn('[Action] Cannot send: MQTT disconnected');
        return;
      }
      const payload = typeof value === 'object' ? JSON.stringify(value) : String(value);
      console.log(`[MQTT] Publishing to '${signal.topic}': ${payload}`);
      publish(signal.topic, payload);
    }

    // --- Live Mode (HTTP) ---
    if (signal.source === 'http' && signal.endpoint) {
      console.log(`[HTTP] POST to ${signal.endpoint}:`, value);
      try {
        await fetch(signal.endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ id: signal.id, value })
        });
      } catch (err) {
        console.log('[HTTP] (Simulation) Request sent.'); 
      }
    }

  }, [config.mockMode, isConnected, publish, domain]);

  return { sendAction };
};
</file>

<file path="template/src/engine/runtime/useCrudLocalStorage.ts">
import { useState, useCallback } from 'react';

/**
 * @hook useCrudLocalStorage
 * @description A generic hook for performing CRUD (Create, Read, Update, Delete)
 * operations on an array of items stored in the browser's localStorage.
 * * It serves as the "Database Engine" for the mock runtime.
 *
 * @param storageKey The unique key for this data in localStorage (e.g., 'ramme_db_users').
 * @param initialData The default data to seed localStorage with if it's empty.
 * @returns An object with the current data and functions to manipulate it.
 */
export const useCrudLocalStorage = <T extends { id: any }>(
  storageKey: string,
  initialData: T[]
) => {
  // 1. Initialize State from LocalStorage
  const [data, setData] = useState<T[]>(() => {
    // Safety check for Server-Side Rendering
    if (typeof window === 'undefined') return initialData;
    
    try {
      const item = window.localStorage.getItem(storageKey);
      if (item) {
        return JSON.parse(item);
      } else {
        // Seed the "DB" if empty
        window.localStorage.setItem(storageKey, JSON.stringify(initialData));
        return initialData;
      }
    } catch (error) {
      console.error(`[Data Lake] Error reading key "${storageKey}":`, error);
      return initialData;
    }
  });

  // 2. CREATE
  const createItem = useCallback((newItem: Omit<T, 'id'>) => {
    setData(prevData => {
      // ‚úÖ ROBUST ID GENERATION (Zero Jank)
      // Detects if existing IDs are Numbers or Strings to prevent type conflicts.
      let newId: any;
      const isNumeric = prevData.length > 0 && typeof prevData[0].id === 'number';

      if (isNumeric) {
        const maxId = prevData.reduce((max, item) => (typeof item.id === 'number' && item.id > max ? item.id : max), 0);
        newId = maxId + 1;
      } else {
        // Fallback for string IDs (e.g. 'usr_17354...')
        newId = `id_${Date.now()}`;
      }

      const fullNewItem = { ...newItem, id: newId } as T;
      
      const updatedData = [...prevData, fullNewItem];
      window.localStorage.setItem(storageKey, JSON.stringify(updatedData));
      return updatedData;
    });
  }, [storageKey]);

  // 3. UPDATE
  const updateItem = useCallback((updatedItem: T) => {
    setData(prevData => {
      const updatedData = prevData.map(item =>
        item.id === updatedItem.id ? updatedItem : item
      );
      window.localStorage.setItem(storageKey, JSON.stringify(updatedData));
      return updatedData;
    });
  }, [storageKey]);

  // 4. DELETE
  const deleteItem = useCallback((id: T['id']) => {
    setData(prevData => {
      const updatedData = prevData.filter(item => item.id !== id);
      window.localStorage.setItem(storageKey, JSON.stringify(updatedData));
      return updatedData;
    });
  }, [storageKey]);

  return { data, createItem, updateItem, deleteItem };
};
</file>

<file path="template/src/engine/runtime/useDataQuery.ts">
import { useMemo } from 'react';

/**
 * @file useDataQuery.ts
 * @description The "In-Memory Database Engine".
 *
 * ARCHITECTURAL ROLE:
 * Since this application runs without a real backend, this hook acts as the
 * SQL Query Engine. It takes raw arrays from the Data Lake and performs
 * real-time filtering, sorting, and pagination before passing the result
 * to the UI.
 *
 * CAPABILITIES:
 * 1. WHERE: Supports complex filtering (equals, contains, gt, lt).
 * 2. ORDER BY: Handles ascending/descending sorts on any field.
 * 3. LIMIT/OFFSET: Calculates pagination slices automatically.
 */

export type SortDirection = 'asc' | 'desc';

export interface SortOption {
  field: string;
  direction: SortDirection;
}

export interface FilterOption {
  field: string;
  operator: 'equals' | 'contains' | 'gt' | 'lt' | 'neq';
  value: any;
}

export interface QueryOptions {
  filters?: FilterOption[];
  sort?: SortOption;
  page?: number;
  pageSize?: number;
}

export interface QueryResult<T> {
  data: T[];
  total: number;
  pageCount: number;
}

// --- 2. Update the Hook Signature (Fixes ts(2345)) ---

export function useDataQuery<T>(
  rawData: T[], // <--- Now accepts an Array, NOT a string ID
  options: QueryOptions = {}
): QueryResult<T> {
  const { filters, sort, page = 1, pageSize = 10 } = options;

  // A. Filtering Logic
  const filteredData = useMemo(() => {
    if (!filters || filters.length === 0) return rawData;

    return rawData.filter((item: any) => {
      return filters.every((filter) => {
        const itemValue = item[filter.field];
        
        switch (filter.operator) {
          case 'equals': return itemValue == filter.value;
          case 'neq': return itemValue != filter.value;
          case 'contains': 
            return String(itemValue).toLowerCase().includes(String(filter.value).toLowerCase());
          case 'gt': return itemValue > filter.value;
          case 'lt': return itemValue < filter.value;
          default: return true;
        }
      });
    });
  }, [rawData, filters]);

  // B. Sorting Logic
  const sortedData = useMemo(() => {
    if (!sort) return filteredData;

    return [...filteredData].sort((a: any, b: any) => {
      const aValue = a[sort.field];
      const bValue = b[sort.field];
      if (aValue < bValue) return sort.direction === 'asc' ? -1 : 1;
      if (aValue > bValue) return sort.direction === 'asc' ? 1 : -1;
      return 0;
    });
  }, [filteredData, sort]);

  // C. Pagination Logic
  const paginatedResult = useMemo(() => {
    const startIndex = (page - 1) * pageSize;
    return sortedData.slice(startIndex, startIndex + pageSize);
  }, [sortedData, page, pageSize]);

  return {
    data: paginatedResult,
    total: filteredData.length,
    pageCount: Math.ceil(filteredData.length / pageSize),
  };
}
</file>

<file path="template/src/engine/runtime/useSignal.ts">
import { useMemo } from 'react';
import { useSignalStore } from './useSignalStore';
// ‚úÖ Import Manifest to get static metadata (min, max, units)
import { appManifest } from '../../config/app.manifest';

export interface SignalState {
  id: string;
  value: any;
  unit?: string;
  min?: number;
  max?: number;
  timestamp?: number;
  status: 'fresh' | 'stale'; // Simplified status
}

/**
 * @hook useSignal
 * @description The "Signal Selector".
 *
 * ARCHITECTURAL ROLE:
 * This hook is the bridge between the Static Manifest and the Dynamic Store.
 * 1. It finds the signal definition in the Manifest (for min/max/unit).
 * 2. It grabs the live value from the Zustand SignalStore.
 * 3. It merges them into a single object for the UI to consume.
 */
export const useSignal = (signalId: string): SignalState => {
  // 1. Get Live Data from Store
  const signalData = useSignalStore((state: { signals: { [x: string]: any; }; }) => state.signals[signalId]);

  // 2. Get Static Definition from Manifest
  // We use useMemo so we don't search the array on every render
  const signalDef = useMemo(() => {
    return appManifest.domain.signals.find((s) => s.id === signalId);
  }, [signalId]);

  // 3. Merge and Return
  const value = signalData?.value ?? signalDef?.defaultValue ?? 0;
  
  // Determine if data is stale (older than 10 seconds)
  const isStale = signalData ? (Date.now() - signalData.timestamp > 10000) : true;

  return {
    id: signalId,
    value: value,
    unit: signalDef?.unit,
    min: signalDef?.min,
    max: signalDef?.max,
    timestamp: signalData?.timestamp,
    status: isStale ? 'stale' : 'fresh'
  };
};
</file>

<file path="template/src/engine/runtime/useSignalStore.ts">
import { create } from 'zustand';
import { useEffect } from 'react';

/**
 * @file useSignalStore.ts
 * @description The "Short-Term Memory" of the application.
 *
 * ARCHITECTURAL ROLE:
 * This Zustand store holds the instantaneous value of every Signal (IoT sensor).
 * It acts as the buffer between the high-speed data stream (MQTT/Simulation)
 * and the UI components.
 */

// --- 1. SIGNAL STORE TYPES ---
export interface SignalValue {
  value: any;
  timestamp: number;
}

interface SignalStore {
  signals: Record<string, SignalValue>;
  // Single update (used by UI controls)
  updateSignal: (id: string, value: any) => void;
  // Batch update (used by MQTT/Simulation)
  updateSignals: (updates: Record<string, any>) => void;
}

// Initial State matches your dashboard IDs to prevent "undefined" errors on load
const initialState = {
  living_room_ac: { value: 72, timestamp: Date.now() },
  living_room_hum: { value: 45, timestamp: Date.now() },
  server_01: { value: 42, timestamp: Date.now() },
  front_door_lock: { value: 'LOCKED', timestamp: Date.now() }
};

export const useSignalStore = create<SignalStore>((set) => ({
  signals: initialState,
  
  updateSignal: (id, value) => set((state) => ({
    signals: {
      ...state.signals,
      [id]: { value, timestamp: Date.now() }
    }
  })),

  updateSignals: (updates) => set((state) => {
    const newSignals = { ...state.signals };
    Object.entries(updates).forEach(([id, val]) => {
      newSignals[id] = { value: val, timestamp: Date.now() };
    });
    return { signals: newSignals };
  })
}));

/**
 * Hook to access specific signals in a component.
 * Usage: const signals = useGeneratedSignals();
 */
export const useGeneratedSignals = () => {
  return useSignalStore((state) => state.signals);
};

// --- 2. SIMULATION ENGINE (The Missing Piece) ---
/**
 * A hook that generates fake data for testing when no MQTT broker is connected.
 * You can toggle this on/off via the manifest config.
 */
export const useSimulation = (isEnabled: boolean = true) => {
  const { updateSignals } = useSignalStore();

  useEffect(() => {
    if (!isEnabled) return;

    console.log("[System] Simulation Mode: ON üé≤");
    const interval = setInterval(() => {
      // Simulate random fluctuations
      const updates: Record<string, any> = {};
      
      // Randomize values slightly around a baseline
      updates['living_room_ac'] = Number((72 + (Math.random() * 4 - 2)).toFixed(1));
      updates['living_room_hum'] = Number((45 + (Math.random() * 6 - 3)).toFixed(1));
      updates['server_01'] = Math.floor(Math.random() * 100);
      
      // Randomly flip the lock status occasionally (1% chance)
      if (Math.random() > 0.99) {
         updates['front_door_lock'] = Math.random() > 0.5 ? 'LOCKED' : 'UNLOCKED';
      }
      
      updateSignals(updates);
    }, 2000); // Update every 2 seconds

    return () => clearInterval(interval);
  }, [isEnabled, updateSignals]);
};
</file>

<file path="template/src/engine/runtime/useWorkflowEngine.ts">
import { useEffect } from 'react';
import { useToast } from '@ramme-io/ui';
// ‚úÖ 1. Correct Imports from Store
import { useGeneratedSignals, useSimulation } from './useSignalStore';
// ‚úÖ 2. Correct Import from Manifest
import { appManifest } from '../../config/app.manifest';

// Minimal Types for internal use (until schema is formalized)
interface ActionDefinition {
  type: string;
  config: Record<string, any>;
}

interface WorkflowDefinition {
  id: string;
  name: string;
  active: boolean;
  trigger: {
    type: string;
    config: {
      signalId: string;
      condition: string;
    };
  };
  actions: ActionDefinition[];
}

/**
 * THE RUNTIME LOGIC ENGINE
 * This hook breathes life into the application.
 * It watches for signal changes and executes the workflows defined in the manifest.
 */
export const useWorkflowEngine = () => {
  const signals = useGeneratedSignals();
  const { addToast } = useToast();
  
  // 1. Activate the Data Simulation (Randomizer)
  // This now checks internally if it should run (based on boolean arg)
  useSimulation(appManifest.config.mockMode);

  // 2. Define the Action Executor
  const executeAction = async (action: ActionDefinition, context: any) => {
    console.log(`[Engine] Executing: ${action.type}`, action);

    switch (action.type) {
      case 'send_notification':
        addToast(action.config.message || 'Notification Sent', 'info');
        break;

      case 'update_resource':
        // In a real app, this would call the API
        addToast(`Updating Resource: ${JSON.stringify(action.config)}`, 'success');
        break;

      case 'agent_task':
        // Simulate AI Agent processing
        console.log(`[AI Agent] Thinking about: "${action.config.prompt}"...`);
        addToast('AI Agent Analyzing...', 'info');
        
        setTimeout(() => {
          // Mock response based on prompt context
          const response = action.config.prompt?.includes('health') 
            ? "System Operating Normally." 
            : "Optimization Recommended.";
            
          addToast(`ü§ñ Agent: "${response}"`, 'success', 5000);
        }, 1500);
        break;

      case 'navigate':
        window.location.href = action.config.path;
        break;

      default:
        console.warn('Unknown action type:', action.type);
    }
  };

  // 3. Watch Signals & Trigger Workflows
  useEffect(() => {
    // Safety check for undefined domain/workflows
    if (!appManifest.domain?.workflows) return;

    // We cast to our local type since manifest might be "any"
    (appManifest.domain.workflows as unknown as WorkflowDefinition[]).forEach((flow) => {
      if (!flow.active) return;

      // Check Trigger: Signal Change
      if (flow.trigger.type === 'signal_change') {
        const signalId = flow.trigger.config.signalId;
        const condition = flow.trigger.config.condition; // e.g., "> 80"
        
        const signal = signals[signalId];
        
        if (signal) {
          const val = signal.value; // Cleaned up access
          
          try {
            // Check if condition is met (e.g. "50 > 80")
            const isMet = checkCondition(val, condition); 
            
            // Debounce: In a real app, we'd check timestamps to avoid firing every 2ms
            // For now, we rely on the simulation being slow (2s)
            if (isMet) {
              console.log(`[Engine] Trigger Fired: ${flow.name}`);
              flow.actions.forEach(action => executeAction(action, { signal: val }));
            }
          } catch (e) {
            // Ignore parse errors
          }
        }
      }
    });
  }, [signals, addToast]); 

  return { 
    // Exposed for manual triggering (e.g. Buttons)
    triggerWorkflow: (workflowId: string) => {
      // @ts-ignore
      const flow = appManifest.domain?.workflows?.find(w => w.id === workflowId);
      if (flow) {
        // @ts-ignore
        flow.actions.forEach(action => executeAction(action, { manual: true }));
      }
    }
  };
};

// --- HELPER: Safe Condition Checker ---
const checkCondition = (value: number, condition: string): boolean => {
  if (!condition) return false;
  const parts = condition.trim().split(' ');
  const operator = parts[0];
  const target = parseFloat(parts[1]);

  switch (operator) {
    case '>': return value > target;
    case '<': return value < target;
    case '>=': return value >= target;
    case '<=': return value <= target;
    case '==': return value === target;
    default: return false;
  }
};
</file>

<file path="template/src/engine/types/manifest-types.ts">
// src/core/manifest-types.ts

import { type IconName } from '@ramme-io/ui';

/**
 * Defines a simple navigation link structure used in menus.
 */
export interface ManifestLink {
  id: string;
  title: string;
  path: string;
  icon?: IconName;
}

/**
 * The fundamental unit of the UI.
 * Corresponds to a specific React component in the registry.
 */
export interface Block {
  id: string;
  type: string; // e.g., 'DeviceCard', 'StatCard', 'LineChart'
  props: Record<string, any>; // Static props (title, default values)
  layout?: {
    colSpan?: number;
    rowSpan?: number;
  };
}

/**
 * A horizontal container that groups blocks together.
 * Maps to a CSS Grid or Flex container.
 */
export interface PageSection {
  id: string;
  title?: string;
  description?: string;
  layout?: {
    columns?: number; // e.g., 3 (for a 3-column grid)
    variant?: 'grid' | 'stack';
  };
  blocks: Block[];
}

/**
 * A top-level page in the application.
 */
export interface PageDefinition {
  id: string;
  slug: string;
  title: string;
  description?: string;
  sections: PageSection[];
}

// ‚úÖ NEW: Full App Specification Types (Matches app.manifest.ts)
export interface AppMeta {
  name: string;
  version: string;
  description: string;
  author: string;
}

export interface AppConfig {
  theme: 'system' | 'light' | 'dark';
  mockMode: boolean;
  brokerUrl?: string; // Added for MQTT
}

export interface AppDomain {
  signals: any[];
  entities: any[];
}

/**
 * The "Brain" of the application.
 * This JSON structure drives the entire UI.
 */
export interface AppSpecification {
  meta: AppMeta;
  config: AppConfig;
  domain: AppDomain;
  pages: PageDefinition[];
}
</file>

<file path="template/src/engine/types/sitemap-entry.ts">
/**
 * @file sitemap-entry.ts
 * @repository ramme-app-starter
 * @description This file defines the canonical TypeScript interface for a single
 * sitemap entry. It is the "schema" or "contract" that governs the entire
 * Sitemap-Driven Architecture.
 *
 * STRATEGIC IMPORTANCE:
 * 1. Designer DX: It provides strict type-safety and autocompletion for any
 * designer editing a `sitemap.ts` file, dramatically lowering the risk of errors.
 * 2. Repo-Linking: It directly imports `IconName` from `@ramme-io/ui`, creating
 * a type-safe link between our starter kit and our component library.
 * 3. AI-Ready: This interface is the precise data structure that the AI Assistant
 * in the (private) `ramme-app-builder` will be trained to generate.
 * The "Architect" phase of the A.D.A.P.T. Framework will result in the
 * AI creating an array of these objects.
 */

// Import the type definition for all available icon names from our open-source
// UI library. This is a critical integration point.
import { type IconName } from '@ramme-io/ui';

/**
 * Defines the required shape for a single entry in any `sitemap.ts` file.
 */
export interface SitemapEntry {
  /**
   * A unique string identifier.
   * Used by React as the `key` prop during route generation.
   * e.g., 'dashboard.home'
   */
  id: string;

  /**
   * The URL path segment for this route.
   * e.g., 'home', 'users', 'settings'
   */
  path: string;

  /**
   * The human-readable name for the route.
   * Used to populate navigation links, breadcrumbs, and page titles.
   * e.g., 'Home', 'User Management'
   */
  title: string;

  /**
   * (Optional) The name of the icon to display in the navigation.
   * This MUST be a valid `IconName` from the `@ramme-io/ui` library.
   * e.g., 'home', 'users', 'settings'
   */
  icon?: IconName;

  /**
   * The actual React component to render when this route is active.
   * e.g., DashboardPage, SettingsPage
   */
  component: React.ComponentType;

  /**
   * (Optional) An array of nested `SitemapEntry` objects.
   * This is the property that enables recursive, nested navigation
   * (e.g., /settings/profile, /settings/billing).
   */
  children?: SitemapEntry[];
}
</file>

<file path="template/src/engine/validation/schema.ts">
import { z } from 'zod';

/**
 * @file schema.ts
 * @description The "Application Constitution".
 *
 * ARCHITECTURAL ROLE:
 * This file uses Zod to define the strict runtime validation rules for the 
 * App Manifest. While `manifest-types.ts` handles compile-time TypeScript checks,
 * this file handles runtime validation, ensuring that any JSON loaded into the 
 * engine (whether from a file, API, or user input) is structurally sound.
 *
 * LAYERS DEFINED:
 * 1. **SaaS Layer:** Data resources, fields, and tables.
 * 2. **Physical Layer:** IoT signals, sensors, and entities.
 * 3. **Logic Layer:** Workflows, triggers, and automated actions.
 * 4. **Presentation Layer:** Pages, sections, and UI blocks.
 */

// ------------------------------------------------------------------
// 1. DATA RESOURCE DEFINITIONS (SaaS Layer)
// ------------------------------------------------------------------

export const FieldSchema = z.object({
  key: z.string(),
  label: z.string(),
  type: z.enum(['text', 'number', 'currency', 'date', 'boolean', 'status', 'email', 'image', 'textarea']),
  required: z.boolean().optional(),
  description: z.string().optional(),
  defaultValue: z.any().optional(),
});
export type FieldDefinition = z.infer<typeof FieldSchema>;

export const ResourceSchema = z.object({
  id: z.string(),
  name: z.string(),
  fields: z.array(FieldSchema),
  defaultView: z.enum(['table', 'grid', 'list']).optional(),
  features: z.object({
    searchable: z.boolean().optional(),
    creatable: z.boolean().optional(),
    editable: z.boolean().optional(),
    deletable: z.boolean().optional(),
    exportable: z.boolean().optional(),
  }).optional(),
});
export type ResourceDefinition = z.infer<typeof ResourceSchema>;


// ------------------------------------------------------------------
// 2. SIGNAL & IOT DEFINITIONS (Physical Layer)
// ------------------------------------------------------------------

export const SignalSchema = z.object({
  id: z.string().min(1, "Signal ID is required"),
  label: z.string(),
  description: z.string().optional(),
  kind: z.enum(['sensor', 'actuator', 'setpoint', 'metric', 'status', 'kpi']),
  source: z.enum(['mock', 'mqtt', 'http', 'derived', 'local']),
  
  // Connectivity
  topic: z.string().optional(),      
  endpoint: z.string().optional(),   
  jsonPath: z.string().optional(),   
  refreshRate: z.number().optional().default(1000), 
  
  // Values
  defaultValue: z.any().optional(),
  unit: z.string().optional(),       
  min: z.number().optional(),
  max: z.number().optional(),
});
export type SignalDefinition = z.infer<typeof SignalSchema>;

export const EntitySchema = z.object({
  id: z.string(),
  name: z.string(),
  description: z.string().optional(),
  type: z.string(), 
  category: z.string().default('logical'), 
  signals: z.array(z.string()), 
  ui: z.object({
    icon: z.string().optional(), 
    color: z.string().optional(),
    dashboardComponent: z.string().optional(),
  }).optional(),
});
export type EntityDefinition = z.infer<typeof EntitySchema>;

// ------------------------------------------------------------------
// ‚úÖ NEW: LOGIC & WORKFLOW DEFINITIONS
// ------------------------------------------------------------------

export const TriggerSchema = z.object({
  id: z.string(),
  type: z.enum(['signal_change', 'manual_action', 'schedule', 'webhook']),
  config: z.record(z.string(), z.any()), 
});

export const ActionSchema = z.object({
  id: z.string(),
  type: z.enum([
    'update_resource', 
    'send_notification', 
    'mqtt_publish', 
    'api_call', 
    'navigate', 
    'agent_task'
  ]),
  config: z.record(z.string(), z.any()),
});

export const WorkflowSchema = z.object({
  id: z.string(),
  name: z.string(),
  active: z.boolean().default(true),
  trigger: TriggerSchema,
  actions: z.array(ActionSchema),
});
export type WorkflowDefinition = z.infer<typeof WorkflowSchema>;
export type ActionDefinition = z.infer<typeof ActionSchema>;


// ------------------------------------------------------------------
// 3. UI LAYOUT DEFINITIONS (Presentation Layer)
// ------------------------------------------------------------------

export const BlockSchema = z.object({
  id: z.string(),
  type: z.string(),
  props: z.record(z.string(), z.any()), 
  layout: z.object({
    colSpan: z.number().optional(),
    rowSpan: z.number().optional(),
  }).optional(),
});

export const PageSectionSchema = z.object({
  id: z.string(),
  title: z.string().optional(),
  description: z.string().optional(),
  layout: z.object({ 
    columns: z.number().optional(), 
    variant: z.enum(['grid', 'stack', 'split']).optional() 
  }).optional(),
  blocks: z.array(BlockSchema),
});

export const PageSchema = z.object({
  id: z.string(),
  slug: z.string(),
  title: z.string(),
  description: z.string().optional(),
  icon: z.string().optional(),
  sections: z.array(PageSectionSchema),
});
export type PageDefinition = z.infer<typeof PageSchema>;


// MASTER APP SPECIFICATION
export const AppSpecificationSchema = z.object({
  meta: z.object({
    name: z.string(),
    version: z.string(),
    description: z.string().optional(),
    author: z.string().optional(),
    createdAt: z.string().optional(),
  }),
  
  config: z.object({
    theme: z.enum(['light', 'dark', 'system', 'corporate', 'midnight', 'blueprint']).default('system'),
    mockMode: z.boolean().default(true),
    brokerUrl: z.string().optional(),
  }),

  modules: z.array(z.string()).optional(),
  resources: z.array(ResourceSchema).optional(),
  
  domain: z.object({
    signals: z.array(SignalSchema),
    entities: z.array(EntitySchema),
    // ‚úÖ ADDED WORKFLOWS HERE
    workflows: z.array(WorkflowSchema).optional(),
  }),

  pages: z.array(PageSchema).optional(),
});

export type AppSpecification = z.infer<typeof AppSpecificationSchema>;
</file>

<file path="template/src/features/ai/pages/AiChat.tsx">
// ramme-app-starter/template/src/pages/AiChat.tsx
import React, { useState } from 'react';
import {
  Card,
  PageHeader,
  Conversation,
  Message,
  PromptInput,
} from '@ramme-io/ui';
import { useMockChat } from '../../assistant/useMockChat'; // <--- The new brain

const AiChat: React.FC = () => {
  const { messages, isLoading, sendMessage } = useMockChat();
  const [input, setInput] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    sendMessage(input);
    setInput('');
  };

  return (
    <div className="p-4 sm:p-6 lg:p-8 space-y-8 h-[calc(100vh-64px)] flex flex-col">
      <PageHeader
        title="AI Assistant"
        description="Full-screen command center for Ramme AI."
      />
      
      {/* We use flex-1 on the Card to make it fill the remaining screen space 
         perfectly, creating that immersive "ChatGPT" feel.
      */}
      <Card className="flex-1 flex flex-col min-h-0 shadow-sm border-border/50">
        <div className="flex-1 overflow-hidden">
          <Conversation>
            {messages.map((msg) => (
              <Message
                key={msg.id}
                author={msg.author}
                content={msg.content}
                isUser={msg.isUser}
                loading={msg.loading}
                suggestions={msg.suggestions}
                onSuggestionClick={(s) => sendMessage(s)}
              />
            ))}
            {isLoading && <Message author="Bodewell AI" isUser={false} loading />}
          </Conversation>
        </div>
        
        <div className="p-4 border-t bg-card">
          <PromptInput
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onSubmit={handleSubmit}
            placeholder="Type a command or ask a question..."
          />
        </div>
      </Card>
    </div>
  );
};

export default AiChat;
</file>

<file path="template/src/features/assistant/useMockChat.ts">
import { useState, useCallback } from 'react';
import { useToast } from '@ramme-io/ui';

export interface ChatMessage {
  id: string;
  author: string;
  content: string;
  isUser: boolean;
  suggestions?: string[];
  loading?: boolean;
}

export const useMockChat = () => {
  // 1. FIX: Destructure 'addToast' (the correct name from your Provider)
  const { addToast } = useToast(); 
  
  const [isLoading, setIsLoading] = useState(false);
  const [messages, setMessages] = useState<ChatMessage[]>([
    { 
      id: '1', 
      author: 'Bodewell AI', 
      content: 'Hello! I am monitoring your 12 active devices. How can I help?', 
      isUser: false, 
      suggestions: ['Check System Status', 'Turn off Living Room AC']
    }
  ]);

  const sendMessage = useCallback((content: string) => {
    if (!content.trim()) return;

    // Add User Message
    const userMsg = { id: Date.now().toString(), author: 'You', content, isUser: true };
    setMessages(prev => [...prev, userMsg]);
    setIsLoading(true);

    // Simulate AI Delay
    setTimeout(() => {
      setIsLoading(false);
      
      // Mock Response Logic
      const aiMsg = {
        id: (Date.now() + 1).toString(),
        author: 'Bodewell AI',
        content: `I received your command: "${content}". Executing protocol...`,
        isUser: false,
        suggestions: ['View Logs', 'Undo Action']
      };
      
      setMessages(prev => [...prev, aiMsg]);
      
      // 2. FIX: Call addToast with separate arguments, not an object
      // Signature: addToast(message, type, duration)
      if (addToast) {
        addToast(
          `Successfully processed: ${content}`, // message
          'success',                            // type
          3000                                  // duration
        );
      }
      
    }, 1500);
  }, [addToast]);

  return {
    messages,
    isLoading,
    sendMessage
  };
};
</file>

<file path="template/src/features/auth/pages/AuthLayout.tsx">
import React from 'react';
import { Outlet } from 'react-router-dom';
import { useTheme, Button, availableThemes, type ThemeConfig } from '@ramme-io/ui';

// --- Temporary Theme Switcher (Unchanged) ---
const MiniThemeSwitcher = () => {
  const { setTheme, customTheme, setCustomTheme } = useTheme();
  
  const cyberTheme: ThemeConfig = {
    name: 'Cyberpunk',
    colors: {
      primary: '255 238 88', primaryForeground: '0 0 0',
      secondary: '30 30 35', secondaryForeground: '255 255 255',
      accent: '0 255 255', accentForeground: '0 0 0',
      danger: '255 0 85', dangerForeground: '255 255 255',
      background: '5 5 10', card: '20 20 25', text: '240 240 240',
      border: '255 238 88', muted: '40 40 50', mutedForeground: '150 150 160',
      input: '30 30 35', inputBorder: '80 80 90', ring: '255 238 88'
    },
    borderRadius: '0px',
  };

  return (
    <div className="absolute top-4 right-4 flex gap-2 z-50">
       {availableThemes.slice(0, 3).map(t => (
         <Button key={t} size="sm" variant="ghost" onClick={() => setTheme(t)} className="opacity-50 hover:opacity-100">
           {t}
         </Button>
       ))}
       <Button size="sm" variant="ghost" onClick={() => setCustomTheme(customTheme ? null : cyberTheme)} className="opacity-50 hover:opacity-100">
         AI
       </Button>
    </div>
  );
};

export const AuthLayout: React.FC = () => {
  return (
    <div className="min-h-screen w-full flex items-center justify-center bg-background text-foreground relative transition-colors duration-300">
      
      {/* Background Pattern */}
      <div className="absolute inset-0 z-0 opacity-[0.03] pointer-events-none bg-[radial-gradient(#888_1px,transparent_1px)] [background-size:16px_16px]" />

      <MiniThemeSwitcher />

      {/* ‚úÖ FIX: Removed the outer <Card>, Header, and Footer.
         This is now a "Passthrough" layout. It centers the content 
         but lets the Page (LoginPage/SignupPage) own the UI completely.
      */}
      <div className="z-10 relative w-full flex justify-center p-4">
        <Outlet />
      </div>
    </div>
  );
};
</file>

<file path="template/src/features/auth/pages/LoginPage.tsx">
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../AuthContext';
// 1. Remove 'Card' from imports
import { Button, Alert, Icon, Input } from '@ramme-io/ui';

const LoginPage: React.FC = () => {
  const navigate = useNavigate();
  const { login } = useAuth();
  
  const [formData, setFormData] = useState({ email: '', password: '' });
  const [error, setError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setFormData(prev => ({ ...prev, [e.target.name]: e.target.value }));
    if (error) setError(null);
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    try {
      await login(formData.email, formData.password);
      navigate('/dashboard');
    } catch (err: any) {
      setError(err.message || 'Invalid email or password.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="flex min-h-screen items-center justify-center bg-background p-4 transition-colors duration-300">
      
      {/* 2. REPLACED <Card> with a native <div> 
        - Removes conflicting library styles (border-border vs border-t-primary).
        - Adds 'sm:w-[400px]' for better mobile responsiveness.
        - Adds 'bg-card' explicitly for theme support.
      */}
      <div className="w-full sm:w-[400px] p-8 rounded-xl shadow-2xl border-t-4 border-t-primary bg-card ring-1 ring-black/5 dark:ring-white/10">
        
        {/* Header */}
        <div className="text-center mb-8">
          <div className="mx-auto w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4 text-primary transition-transform hover:scale-110">
            <Icon name="layout-template" size={24} />
          </div>
          <h1 className="text-2xl font-bold text-foreground tracking-tight">Welcome Back</h1>
          <p className="text-sm text-muted-foreground mt-2">Enter your credentials to access your account</p>
        </div>
        
        {/* Error State */}
        {error && (
          <Alert variant="danger" title="Access Denied" className="mb-6 animate-in fade-in slide-in-from-top-2">
            {error}
          </Alert>
        )}
        
        {/* Form */}
        <form onSubmit={handleSubmit} className="flex flex-col gap-4">
          <Input 
            name="email"
            label="Email Address" 
            type="email" 
            placeholder="alex@example.com" 
            required 
            autoComplete="email"
            value={formData.email}
            onChange={handleChange}
            // Explicit background to prevent transparency issues
            className="bg-background"
          />
          
          <div className="space-y-1">
            <Input 
              name="password"
              label="Password" 
              type="password" 
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" 
              required 
              autoComplete="current-password"
              value={formData.password}
              onChange={handleChange}
              className="bg-background"
            />
          </div>

          <Button type="submit" loading={isLoading} className="w-full mt-2 font-medium" size="lg">
            Sign In
          </Button>
        </form>

        {/* Footer */}
        <div className="mt-8 pt-6 border-t border-border text-center text-sm">
          <span className="text-muted-foreground">Don't have an account? </span>
          <Link to="/signup" className="font-semibold text-primary hover:text-primary/80 transition-colors">
            Create one
          </Link>
        </div>
      </div>
    </div>
  );
};

export default LoginPage;
</file>

<file path="template/src/features/auth/pages/SignupPage.tsx">
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../AuthContext';
import { useCrudLocalStorage } from '../../../engine/runtime/useCrudLocalStorage';
import { Button, Card, FormTemplate, Alert, Icon, type FormField } from '@ramme-io/ui';
// Import SEED_USERS to safe-guard initialization if the DB is empty
import { SEED_USERS, type User } from '../../../data/mockData';

const SignupPage: React.FC = () => {
  const navigate = useNavigate();
  const { login } = useAuth();
  
  // ‚úÖ DATA HOOK: Direct access to the User Data Lake
  // This ensures new users are saved to 'ramme_db_users' alongside seed data
  const { data: users, createItem } = useCrudLocalStorage<User>('ramme_db_users', SEED_USERS);
  
  const [error, setError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  const handleSignup = async (formData: Record<string, any>) => {
    setIsLoading(true);
    setError(null);

    // 1. Validation: Check for duplicates
    if (users.some(u => u.email.toLowerCase() === formData.email.toLowerCase())) {
      setError('An account with this email already exists.');
      setIsLoading(false);
      return;
    }

    try {
      // 2. Create the User Record in the Data Lake
      // We cast to 'User' because we handle the 'id' generation in createItem
      const newUser = {
        name: formData.name,
        email: formData.email,
        role: 'viewer', // Default role for new signups
        status: 'active',
        joinedAt: new Date().toISOString().split('T')[0],
        // In a real app, you'd hash the password here.
        // For this prototype, the presence of the record implies access.
      } as User;

      createItem(newUser);

      // 3. Auto-Login immediately after creation
      await login(formData.email, formData.password);
      navigate('/dashboard');

    } catch (err: any) {
      setError(err.message || 'Failed to create account.');
    } finally {
      setIsLoading(false);
    }
  };

  const formFields: FormField[] = [
    { name: 'name', label: 'Full Name', type: 'text', placeholder: 'Jane Doe', required: true },
    { name: 'email', label: 'Email Address', type: 'email', placeholder: 'jane@example.com', required: true },
    { name: 'password', label: 'Password', type: 'password', placeholder: 'Min. 3 characters', required: true },
  ];

  return (
    <div className="flex min-h-screen items-center justify-center bg-background p-4">
      <Card className="w-full max-w-md p-8 shadow-xl border-t-4 border-t-secondary">
        <div className="text-center mb-8">
          <div className="mx-auto w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center mb-4 text-secondary">
            <Icon name="user-plus" size={24} />
          </div>
          <h1 className="text-3xl font-bold text-foreground">Create Account</h1>
          <p className="text-muted-foreground mt-2">Join the platform to get started</p>
        </div>
        
        {error && <Alert variant="danger" title="Registration Failed" className="mb-4">{error}</Alert>}
        
        <FormTemplate
          fields={formFields}
          onSubmit={handleSignup}
        >
          <Button type="submit" loading={isLoading} className="w-full mt-4" size="lg" variant="secondary">
            Create Account
          </Button>
        </FormTemplate>

        <div className="mt-6 text-center text-sm">
          <span className="text-muted-foreground">Already have an account? </span>
          <Link to="/login" className="font-semibold text-primary hover:underline">
            Sign In
          </Link>
        </div>
      </Card>
    </div>
  );
};

export default SignupPage;
</file>

<file path="template/src/features/auth/AuthContext.tsx">
import React, { createContext, useContext, useState, useEffect } from 'react';
// Import the User type from your mock data to ensure shape consistency
import type { User } from '../../data/mockData'; 

/**
 * @file AuthContext.tsx
 * @description The Central Identity Manager.
 * * ARCHITECTURAL ROLE:
 * This context provides global access to the current user's state (Identity).
 * It decouples the UI components from the specific authentication implementation.
 * * KEY FEATURES:
 * 1. **Session Persistence:** Checks localStorage on boot.
 * 2. **Data Lake Connection:** Reads from 'ramme_db_users' to validate real accounts.
 * 3. **Simulation:** Adds artificial latency to test loading states.
 */

// ‚úÖ CRITICAL FIX: Match the key used by useCrudLocalStorage and data-seeder
const USER_DB_KEY = 'ramme_db_users'; 
const SESSION_KEY = 'ramme_session';

interface AuthContextType {
  user: User | null;
  login: (email: string, password: string) => Promise<void>;
  logout: () => void;
  isAuthenticated: boolean;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  // Check for existing session on mount
  useEffect(() => {
    const storedUser = localStorage.getItem(SESSION_KEY);
    if (storedUser) {
      try {
        setUser(JSON.parse(storedUser));
      } catch (e) {
        console.error("Failed to parse session", e);
        localStorage.removeItem(SESSION_KEY);
      }
    }
    setIsLoading(false);
  }, []);

  const login = async (email: string, password: string) => {
    setIsLoading(true);
    
    // ‚úÖ FIX: We now use the 'password' variable to satisfy TypeScript (ts(6133))
    // This also adds a layer of realism to the mock validation.
    if (!password || password.length < 3) {
      setIsLoading(false);
      throw new Error("Password must be at least 3 characters");
    }

    console.log(`üîê Attempting login for: ${email}`);

    // Simulate API Delay
    await new Promise(resolve => setTimeout(resolve, 600));

    // ‚úÖ READ FROM THE CORRECT DATA LAKE
    const storedUsers = localStorage.getItem(USER_DB_KEY);
    
    // Debugging: See what is actually in storage
    if (!storedUsers) {
      console.warn(`‚ö†Ô∏è Data Lake '${USER_DB_KEY}' is empty! Did you run the seeder or signup?`);
    } else {
      // Optional: Log count for debugging (remove in production)
      // console.log(`‚úÖ Data Lake found. Users in DB:`, JSON.parse(storedUsers).length);
    }

    const users: User[] = storedUsers ? JSON.parse(storedUsers) : [];
    
    // Case-insensitive email check
    const foundUser = users.find(u => u.email.toLowerCase() === email.toLowerCase());

    if (foundUser) {
      console.log("üéâ User found:", foundUser);
      setUser(foundUser);
      localStorage.setItem(SESSION_KEY, JSON.stringify(foundUser));
      setIsLoading(false);
    } else {
      console.error("‚ùå User NOT found. Available emails:", users.map(u => u.email));
      setIsLoading(false);
      throw new Error("Invalid email or password");
    }
  };

  const logout = () => {
    setUser(null);
    localStorage.removeItem(SESSION_KEY);
  };

  return (
    <AuthContext.Provider 
      value={{ 
        user, 
        login, 
        logout, 
        isAuthenticated: !!user, 
        isLoading 
      }}
    >
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
</file>

<file path="template/src/features/datagrid/SmartTable.tsx">
import React, { useState, useMemo, useCallback } from 'react';
import { 
  DataTable, 
  Button, 
  Icon, 
  Card, 
  useToast, 
  SearchInput,
  type ColDef,
  type GridApi 
} from '@ramme-io/ui';
import { getResourceMeta, getMockData } from '../../data/mockData';
import { AutoForm } from '../../components/AutoForm';
import { useCrudLocalStorage } from '../../engine/runtime/useCrudLocalStorage';

interface SmartTableProps {
  dataId: string;
  title?: string;
  initialFilter?: Record<string, any>; 
}

export const SmartTable: React.FC<SmartTableProps> = ({ 
  dataId, 
  title}) => {
  const { addToast } = useToast();
  
  // 1. DATA KERNEL
  const meta = getResourceMeta(dataId);
  const seedData = useMemo(() => getMockData(dataId) || [], [dataId]);
  
  // We use the CRUD hook to persist changes to localStorage
  const { 
    data: rowData, 
    createItem, 
    updateItem, 
    deleteItem 
  } = useCrudLocalStorage<any>(`ramme_db_${dataId}`, seedData);

  // 2. UI STATE
  const [isEditOpen, setIsEditOpen] = useState(false);
  const [currentRecord, setCurrentRecord] = useState<any>(null);
  const [gridApi, setGridApi] = useState<GridApi | null>(null);
  const [selectedRows, setSelectedRows] = useState<any[]>([]);
  const [quickFilterText, setQuickFilterText] = useState('');

  // 3. COLUMN DEFINITIONS
  const columns = useMemo<ColDef[]>(() => {
    if (!meta?.fields) return [];

    const generatedCols: ColDef[] = meta.fields.map((f: any) => {
      const col: ColDef = {
        field: f.key,
        headerName: f.label,
        filter: true,
        sortable: true,
        resizable: true,
        flex: 1,
      };

      // Smart Formatting based on type
      if (f.type === 'currency') {
        col.valueFormatter = (p: any) => p.value ? `$${Number(p.value).toLocaleString()}` : '';
      }
      if (f.type === 'date') {
        col.valueFormatter = (p: any) => p.value ? new Date(p.value).toLocaleDateString() : '';
      }
      if (f.type === 'status') {
        col.cellRenderer = (p: any) => {
          const statusColors: any = {
            active: 'bg-green-100 text-green-800',
            paid: 'bg-green-100 text-green-800',
            pending: 'bg-yellow-100 text-yellow-800',
            inactive: 'bg-slate-100 text-slate-600',
            overdue: 'bg-red-100 text-red-800'
          };
          const colorClass = statusColors[String(p.value).toLowerCase()] || 'bg-slate-100 text-slate-800';
          return (
            <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${colorClass}`}>
              {p.value}
            </span>
          );
        };
      }
      return col;
    });

    // Add Checkbox Selection to the first column
    if (generatedCols.length > 0) {
      generatedCols[0].headerCheckboxSelection = true;
      generatedCols[0].checkboxSelection = true;
      generatedCols[0].minWidth = 180;
    }

    // Add Actions Column
    generatedCols.push({
      headerName: "Actions",
      field: "id",
      width: 100,
      pinned: 'right',
      cellRenderer: (params: any) => (
        <div className="flex items-center gap-1">
          <Button variant="ghost" size="icon" className="h-8 w-8" onClick={(e) => { e.stopPropagation(); setCurrentRecord(params.data); setIsEditOpen(true); }}>
            <Icon name="edit-2" size={14} className="text-slate-500" />
          </Button>
        </div>
      )
    });

    return generatedCols;
  }, [meta]);

  // 4. HANDLERS
  const onGridReady = useCallback((params: any) => {
    setGridApi(params.api);
  }, []);

  const onSelectionChanged = useCallback(() => {
    if (gridApi) {
      setSelectedRows(gridApi.getSelectedRows());
    }
  }, [gridApi]);

  const handleBulkDelete = () => {
    if (confirm(`Delete ${selectedRows.length} items?`)) {
      selectedRows.forEach(row => deleteItem(row.id));
      setSelectedRows([]);
      addToast(`${selectedRows.length} items deleted`, 'success');
    }
  };

  const handleSave = (record: any) => {
    if (record.id && currentRecord?.id) {
      updateItem(record);
      addToast('Item updated', 'success');
    } else {
      const { id, ...newItem } = record;
      createItem(newItem);
      addToast('Item created', 'success');
    }
    setIsEditOpen(false);
  };

  // --- RENDER ---
  return (
    <Card className="flex flex-col h-[600px] border border-border shadow-sm overflow-hidden bg-card">
      
      {/* HEADER TOOLBAR */}
      <div className="p-4 border-b border-border flex justify-between items-center gap-4 bg-muted/5">
        
        {/* Left: Title or Bulk Actions */}
        {selectedRows.length > 0 ? (
          <div className="flex items-center gap-3 animate-in fade-in slide-in-from-left-2 duration-200">
            <span className="bg-primary text-primary-foreground text-xs font-bold px-2 py-1 rounded-md">
              {selectedRows.length} Selected
            </span>
            <Button size="sm" variant="danger" onClick={handleBulkDelete} iconLeft="trash-2">
              Delete Selected
            </Button>
          </div>
        ) : (
          <div className="flex items-center gap-2">
            <div className="p-2 bg-primary/10 rounded-md text-primary">
              <Icon name="table" size={18} />
            </div>
            <div>
              <h3 className="text-base font-bold text-foreground leading-tight">
                {title || meta?.name || dataId}
              </h3>
              <p className="text-xs text-muted-foreground">
                {rowData.length} records found
              </p>
            </div>
          </div>
        )}

        {/* Right: Actions & Filter */}
        <div className="flex items-center gap-2">
          <div className="w-64">
            <SearchInput 
              placeholder="Quick search..." 
              value={quickFilterText}
              onChange={(e) => {
                setQuickFilterText(e.target.value);
                gridApi?.setQuickFilter(e.target.value);
              }}
            />
          </div>
          <div className="h-6 w-px bg-border mx-1" />
          <Button size="sm" variant="primary" iconLeft="plus" onClick={() => { setCurrentRecord({}); setIsEditOpen(true); }}>
            Add New
          </Button>
        </div>
      </div>

      {/* AG GRID */}
      <div className="flex-1 w-full bg-card relative">
        <DataTable 
          rowData={rowData} 
          columnDefs={columns} 
          onGridReady={onGridReady}
          onSelectionChanged={onSelectionChanged}
          rowSelection="multiple"
          pagination={true}
          paginationPageSize={10}
          headerHeight={48}
          rowHeight={48}
          enableCellTextSelection={true}
        />
      </div>

      {/* EDIT DRAWER */}
      <AutoForm
        isOpen={isEditOpen}
        onClose={() => setIsEditOpen(false)}
        onSubmit={handleSave}
        title={meta?.name || 'Item'}
        fields={meta?.fields || []}
        initialData={currentRecord}
      />
    </Card>
  );
};
</file>

<file path="template/src/features/developer/GhostOverlay.tsx">
import React from 'react';
import { Icon } from '@ramme-io/ui';

interface GhostOverlayProps {
  children: React.ReactNode;
  componentId: string;
  componentType: string;
  signalId?: string;
  isActive?: boolean;
}

export const GhostOverlay: React.FC<GhostOverlayProps> = ({
  children,
  componentId,
  componentType,
  signalId,
  isActive = false,
}) => {
  
  if (!isActive) {
    return <>{children}</>;
  }

  const handleClick = (e: React.MouseEvent) => {
    // üõë Stop the click from triggering app logic (like navigation or toggles)
    e.preventDefault();
    e.stopPropagation();

    // üöÄ THE GHOST BRIDGE: Signal the Parent (The Builder)
    window.parent.postMessage({
      type: 'RAMME_SELECT_BLOCK',
      payload: { blockId: componentId }
    }, '*');
  };

  return (
    <div 
      className="relative group cursor-pointer"
      onClick={handleClick} // ‚úÖ Add Click Handler
    >
      {/* The "Ghost" Border */}
      <div className="absolute inset-0 z-50 border-2 border-dashed border-accent/50 rounded-lg bg-accent/5 group-hover:bg-accent/10 transition-colors pointer-events-none" />

      {/* The "Info Tag" */}
      <div className="absolute top-0 left-0 z-50 p-2 transform -translate-y-1/2 translate-x-2 pointer-events-none">
        <div className="flex items-center gap-2 bg-accent text-accent-foreground text-xs font-mono py-1 px-2 rounded shadow-sm">
          <Icon name="box" size={12} />
          <span className="font-bold">{componentType}</span>
        </div>
      </div>

      {/* The "Signal Wire" */}
      {signalId && (
        <div className="absolute bottom-0 right-0 z-50 p-2 transform translate-y-1/2 -translate-x-2 pointer-events-none">
           <div className="flex items-center gap-1.5 bg-blue-600 text-white text-xs font-mono py-1 px-2 rounded shadow-sm">
            <Icon name="activity" size={12} />
            <span>{signalId}</span>
          </div>
        </div>
      )}

      {/* Render the actual component underneath */}
      <div className="opacity-50 grayscale transition-all duration-200 group-hover:opacity-75 group-hover:grayscale-0 pointer-events-none">
        {children}
      </div>
    </div>
  );
};
</file>

<file path="template/src/features/developer/useDevTools.ts">
import { useState, useEffect, useCallback } from 'react';

// Keys for localStorage to persist state across reloads
const STORAGE_KEY_GHOST_MODE = 'ramme_dev_ghost_mode';

export interface DevToolsState {
  isGhostMode: boolean;
  toggleGhostMode: () => void;
}

/**
 * @hook useDevTools
 * @description
 * Manages the state of development tools within the running application.
 * It persists preferences (like "Ghost Mode") to localStorage so debugging
 * sessions aren't interrupted by refreshes.
 */
export const useDevTools = (): DevToolsState => {
  // 1. Lazy initializer to read from storage immediately
  const [isGhostMode, setIsGhostMode] = useState<boolean>(() => {
    if (typeof window === 'undefined') return false;
    try {
      const stored = window.localStorage.getItem(STORAGE_KEY_GHOST_MODE);
      return stored ? JSON.parse(stored) : false;
    } catch (e) {
      console.warn('Failed to read dev tools state', e);
      return false;
    }
  });

  // 2. Toggle Handler with Persistence
  const toggleGhostMode = useCallback(() => {
    setIsGhostMode((prev) => {
      const newValue = !prev;
      try {
        window.localStorage.setItem(STORAGE_KEY_GHOST_MODE, JSON.stringify(newValue));
      } catch (e) {
        console.warn('Failed to save dev tools state', e);
      }
      return newValue;
    });
  }, []);

  // 3. Keyboard Shortcut (Optional but Pro-Level)
  // Ctrl + Shift + G to toggle Ghost Mode
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.ctrlKey && e.shiftKey && e.key === 'G') {
        e.preventDefault();
        toggleGhostMode();
      }
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [toggleGhostMode]);

  return { isGhostMode, toggleGhostMode };
};
</file>

<file path="template/src/features/onboarding/pages/Welcome.tsx">
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { 
  Card, 
  Button, 
  Icon, 
  Badge,
  SectionHeader 
} from '@ramme-io/ui';

const Welcome: React.FC = () => {
  const navigate = useNavigate();

  return (
    <div className="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700">
      
      {/* HERO */}
      <div className="relative overflow-hidden rounded-xl bg-gradient-to-r from-primary to-violet-600 text-primary-foreground p-8 md:p-12">
        <div className="relative z-10 max-w-2xl">
          <Badge variant="secondary" className="mb-4 bg-white/20 text-white border-none backdrop-blur-sm">
            v1.2.0 Starter Kit
          </Badge>
          <h1 className="text-4xl md:text-5xl font-extrabold mb-4 tracking-tight">
            Your Ramme App is Ready.
          </h1>
          <p className="text-lg md:text-xl text-primary-foreground/90 mb-8 leading-relaxed">
            You have successfully scaffolded a production-ready prototype environment. 
            This kit comes pre-wired with Authentication, Mock Data, and the A.D.A.P.T. architecture.
          </p>
          <div className="flex flex-wrap gap-4">
            <Button 
              size="lg" 
              variant="secondary" 
              className="font-semibold"
              iconLeft="layout-dashboard"
              onClick={() => navigate('/dashboard/app')}
            >
              Open Live Dashboard
            </Button>
            <Button 
              size="lg" 
              variant="outline" 
              className="bg-transparent border-white/30 text-white hover:bg-white/10 hover:text-white"
              iconLeft="book-open"
              onClick={() => navigate('/docs')}
            >
              Read Documentation
            </Button>
          </div>
        </div>
        
        {/* Decorative Background Icon */}
        <div className="absolute -right-10 -bottom-10 opacity-10 rotate-12">
          <Icon name="box" size={300} />
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
        
        {/* SECTION 1: ARCHITECTURE */}
        <div className="space-y-4">
          <SectionHeader title="Project Architecture" />
          <div className="grid gap-4">
            <Card className="p-4 flex gap-4 hover:border-primary/50 transition-colors cursor-default">
              <div className="p-3 rounded-lg bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 h-fit">
                <Icon name="database" size={24} />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Data Lake</h3>
                <p className="text-sm text-muted-foreground mt-1">
                  Mock data is seeded into <code>localStorage</code> on boot. 
                  Edit <code>src/data/mockData.ts</code> to change the schema.
                </p>
              </div>
            </Card>

            <Card className="p-4 flex gap-4 hover:border-primary/50 transition-colors cursor-default">
              <div className="p-3 rounded-lg bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400 h-fit">
                <Icon name="git-branch" size={24} />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Logic Engine</h3>
                <p className="text-sm text-muted-foreground mt-1">
                  Workflows and signals are processed in real-time by 
                  <code>useWorkflowEngine.ts</code>. Supports MQTT and simulated sensors.
                </p>
              </div>
            </Card>

            <Card className="p-4 flex gap-4 hover:border-primary/50 transition-colors cursor-default">
              <div className="p-3 rounded-lg bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400 h-fit">
                <Icon name="layout" size={24} />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Dynamic Routing</h3>
                <p className="text-sm text-muted-foreground mt-1">
                  Pages are generated from <code>app.manifest.ts</code>. 
                  Visual blocks connect automatically to data sources.
                </p>
              </div>
            </Card>
          </div>
        </div>

        {/* SECTION 2: RESOURCES */}
        <div className="space-y-4">
          <SectionHeader title="Developer Resources" />
          
          <Card className="p-6 space-y-6">
            <div>
              <h4 className="font-semibold flex items-center gap-2 mb-2">
                <Icon name="palette" size={16} className="text-muted-foreground" />
                Component Library
              </h4>
              <p className="text-sm text-muted-foreground mb-3">
                Browse the full suite of accessible UI components available in this project.
              </p>
              <Button variant="outline" size="sm" onClick={() => navigate('/styleguide')}>
                View Style Guide
              </Button>
            </div>

            <div className="border-t border-border pt-6">
              <h4 className="font-semibold flex items-center gap-2 mb-2">
                <Icon name="settings" size={16} className="text-muted-foreground" />
                Configuration
              </h4>
              <p className="text-sm text-muted-foreground mb-3">
                Manage global settings, user profile templates, and billing layouts.
              </p>
              <Button variant="outline" size="sm" onClick={() => navigate('/settings')}>
                Open Settings
              </Button>
            </div>

            <div className="border-t border-border pt-6">
              <h4 className="font-semibold flex items-center gap-2 mb-2">
                <Icon name="github" size={16} className="text-muted-foreground" />
                Community
              </h4>
              <p className="text-sm text-muted-foreground mb-3">
                Need help? Check the docs or open an issue on GitHub.
              </p>
              <a 
                href="https://github.com/ramme-io/create-app" 
                target="_blank" 
                rel="noreferrer"
                className="inline-flex"
              >
                <Button variant="ghost" size="sm">GitHub Repo &rarr;</Button>
              </a>
            </div>
          </Card>
        </div>

      </div>
    </div>
  );
};

export default Welcome;
</file>

<file path="template/src/features/overview/pages/OverviewPage.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { 
  PageHeader, 
  Card,      // Using base Card since StatCard was inline in old code
  BarChart, 
  Button,
  Icon,
  Badge
} from '@ramme-io/ui';

// ‚úÖ Import Service from the Feature Domain
import { userService } from '../../users'; 

// Mock Data for Chart
const revenueData = [
  { name: 'Mon', revenue: 4000, cost: 2400 },
  { name: 'Tue', revenue: 3000, cost: 1398 },
  { name: 'Wed', revenue: 2000, cost: 9800 },
  { name: 'Thu', revenue: 2780, cost: 3908 },
  { name: 'Fri', revenue: 1890, cost: 4800 },
  { name: 'Sat', revenue: 2390, cost: 3800 },
  { name: 'Sun', revenue: 3490, cost: 4300 },
];

// Recreating the StatCard locally (since the old one was custom)
// You can move this to @ramme-io/ui later if you want it reusable
const StatCard = ({ title, value, trend, icon, onClick, className }: any) => (
  <Card 
    className={`p-6 flex items-center justify-between space-x-4 transition-all hover:border-primary/50 ${className || ''}`}
    onClick={onClick}
  >
    <div>
      <p className="text-sm font-medium text-muted-foreground">{title}</p>
      <h3 className="text-2xl font-bold mt-1">{value}</h3>
      <div className={`flex items-center text-xs mt-1 ${trend > 0 ? 'text-green-500' : 'text-red-500'}`}>
        <Icon name={trend > 0 ? 'trending-up' : 'trending-down'} className="h-3 w-3 mr-1" />
        {Math.abs(trend)}% from last month
      </div>
    </div>
    <div className="p-3 bg-muted/50 rounded-full">
      <Icon name={icon} className="h-5 w-5 text-primary" />
    </div>
  </Card>
);

export const OverviewPage: React.FC = () => {
  const navigate = useNavigate();
  const [userCount, setUserCount] = useState(0);

  // ‚úÖ Restore Real Data Fetching
  useEffect(() => {
    const users = userService.getAll();
    setUserCount(users.length);
  }, []);

  return (
    <div className="space-y-8 pb-10">
      <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <div>
          <PageHeader 
             title="Dashboard" 
             description="Overview of your application performance."
          />
        </div>
        <div className="flex gap-2">
          <Button variant="outline" iconLeft="download">Export</Button>
          <Button iconLeft="plus">New Report</Button>
        </div>
      </div>

      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        {/* ‚úÖ Restore Click Navigation */}
        <StatCard 
          title="Total Users" 
          value={userCount} 
          trend={+12.5} 
          icon="users" 
          className="cursor-pointer bg-primary/5 border-primary/20"
          onClick={() => navigate('/dashboard/users')}
        />
        <StatCard title="Total Revenue" value="$45,231" trend={+20.1} icon="dollar-sign" />
        <StatCard title="Sales" value="+12,234" trend={+19} icon="credit-card" />
        <StatCard title="Active Now" value="+573" trend={-4} icon="activity" />
      </div>

      {/* Main Content Grid */}
      <div className="grid grid-cols-1 lg:grid-cols-7 gap-8">
        <Card className="lg:col-span-4 p-6">
          <div className="flex items-center justify-between mb-6">
            <h3 className="font-semibold text-lg">Revenue Overview</h3>
            <Badge variant="outline">Weekly</Badge>
          </div>
          <div className="h-[350px] w-full">
            {/* ‚úÖ Using the props from your old file */}
            <BarChart 
              data={revenueData} 
              dataKeyX="name" 
              barKeys={['revenue', 'cost']} 
            />
          </div>
        </Card>

        <Card className="lg:col-span-3 p-6 flex flex-col">
          <h3 className="font-semibold text-lg mb-4">Recent Activity</h3>
          <div className="space-y-6 overflow-y-auto pr-2">
            {[1, 2, 3].map((i) => (
              <div key={i} className="flex items-start gap-4">
                <span className="relative flex h-2 w-2 mt-2">
                  <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                  <span className="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                </span>
                <div className="space-y-1">
                  <p className="text-sm font-medium leading-none">System Alert</p>
                  <p className="text-xs text-muted-foreground">Database backup completed.</p>
                  <p className="text-xs text-muted-foreground pt-1">Just now</p>
                </div>
              </div>
            ))}
          </div>
        </Card>
      </div>
    </div>
  );
};
</file>

<file path="template/src/features/overview/index.ts">
export { OverviewPage } from './pages/OverviewPage';
</file>

<file path="template/src/features/playground/pages/AccountingLedgerPage.tsx">
import React, { useMemo, useState } from 'react';
import {
  PageHeader,
  DataTable,
  Badge,
  type ColDef,
  type ICellRendererParams,
  // 1. Import the specific event type for cell value changes
  type CellValueChangedEvent,
} from '@ramme-io/ui';
import { mockLedgerData, type LedgerEntry } from '../../../data/mockLedger';

// --- Custom Renderer for Variance ---
// 2. Correctly type the component and ensure it returns a ReactNode (JSX or null)
const VarianceRenderer: React.FC<ICellRendererParams> = ({ value }) => {
  if (value === null || value === undefined) return null;
  const isPositive = value >= 0;
  const variant = isPositive ? 'success' : 'danger';
  const formattedValue = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value);
  return <Badge variant={variant}>{formattedValue}</Badge>;
};

// --- Custom Renderer for Account Status ---
// 2. Correctly type the component and ensure it returns a ReactNode (JSX or null)
const StatusRenderer: React.FC<ICellRendererParams<LedgerEntry>> = ({ data }) => {
    if (!data) return null;
    const variance = data.actual - data.budget;
    if (variance > 1000) return <Badge variant="success">On Target</Badge>;
    if (variance < -1000) return <Badge variant="danger">Over Budget</Badge>;
    return <Badge variant="warning">Watch</Badge>;
}

const AccountingLedgerPage: React.FC = () => {
  const [rowData, setRowData] = useState<LedgerEntry[]>(mockLedgerData);

  const columnDefs = useMemo<ColDef<LedgerEntry>[]>(() => [
    { field: 'category', rowGroup: true, hide: true },
    { field: 'account', headerName: 'Account', flex: 2 },
    {
      field: 'actual',
      headerName: 'Actual',
      type: 'numericColumn',
      valueFormatter: params => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(params.value),
      aggFunc: 'sum',
    },
    {
      field: 'budget',
      headerName: 'Budget',
      type: 'numericColumn',
      editable: true,
      valueFormatter: params => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(params.value),
      aggFunc: 'sum',
      // 3. Apply the specific event type to the params object
      onCellValueChanged: (params: CellValueChangedEvent<LedgerEntry>) => {
          if (params.newValue !== params.oldValue) {
              const updatedData = rowData.map(row => 
                  row.account === params.data.account ? { ...row, budget: Number(params.newValue) } : row
              );
              setRowData(updatedData);
          }
      },
    },
    {
      headerName: 'Variance',
      type: 'numericColumn',
      valueGetter: params => params.data ? params.data.actual - params.data.budget : 0,
      cellRenderer: VarianceRenderer,
      aggFunc: 'sum',
    },
    {
      headerName: 'Status',
      cellRenderer: StatusRenderer,
      flex: 1,
    }
  ], [rowData]);

  const autoGroupColumnDef: ColDef = useMemo(() => ({
    headerName: 'Category',
    minWidth: 250,
    flex: 2,
    cellRendererParams: {
      footerValueGetter: (params: any) => {
        const isRootLevel = params.node.level === -1;
        if (isRootLevel) return 'Grand Total (Net Profit)';
        return `Total ${params.node.key}`;
      },
    },
  }), []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Financial Ledger"
        description="Showcase of advanced data analysis: grouping, aggregation, in-cell editing, and custom renderers."
      />
      <DataTable
        rowData={rowData}
        columnDefs={columnDefs}
        height="calc(100vh - 280px)"
        autoGroupColumnDef={autoGroupColumnDef}
        groupDefaultExpanded={-1}
        groupIncludeFooter={true}
        groupIncludeTotalFooter={true}
      />
    </div>
  );
};

export default AccountingLedgerPage;
</file>

<file path="template/src/features/playground/pages/ItemSelectorPage.tsx">
import { useState } from 'react';
import { Button, PageHeader } from '@ramme-io/ui';
import { AddItemsModal } from '../../../components/AddItemsModal';



const ItemSelectorPage = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);

  return (
    <div>
      <PageHeader
        title="Prototype: Item Selection"
        description="This page demonstrates the 'Add Items' modal component."
      />
      <div className="mt-8">
        <Button onClick={() => setIsModalOpen(true)}>
          Open Modal
        </Button>
      </div>

      <AddItemsModal
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)}
      />
    </div>
  );
};

export default ItemSelectorPage;
</file>

<file path="template/src/features/settings/pages/BillingPage.tsx">
import React from 'react';
// --- 1. Import the new generic page ---
import GenericContentPage from '../../GenericContentPage'; 

// A simple page component for settings
const BillingPage: React.FC = () => {
  return <GenericContentPage pageTitle="Billing & Subscriptions" />;
};

export default BillingPage;
</file>

<file path="template/src/features/settings/pages/ProfilePage.tsx">
import React, { useState, useEffect } from 'react';
import { 
  Button, 
  Input, 
  Card, 
  SectionHeader, 
  Icon, 
  Alert 
} from '@ramme-io/ui';
import { useAuth } from '../../auth/AuthContext';
import { userService } from '../../users/api/user.service';

const ProfilePage: React.FC = () => {
  const { user } = useAuth(); // We use login to "refresh" session data if needed
  const [isLoading, setIsLoading] = useState(false);
  const [success, setSuccess] = useState(false);
  
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    role: '',
    bio: 'Product Designer based in San Francisco.' // Mock field
  });

  // Load current user data
  useEffect(() => {
    if (user) {
      setFormData({
        name: user.name,
        email: user.email,
        role: user.role,
        bio: 'Product Designer based in San Francisco.'
      });
    }
  }, [user]);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSave = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setSuccess(false);

    try {
      // 1. Update in "Database"
      if (user?.id) {
        userService.update(user.id, {
          name: formData.name,
          email: formData.email
        });
        
        // 2. Update Local Session (Hack to refresh UI without logout)
        const updatedUser = { ...user, ...formData };
        localStorage.setItem('ramme_session', JSON.stringify(updatedUser));
        
        // 3. Show Success
        setSuccess(true);
        setTimeout(() => setSuccess(false), 3000);
      }
    } catch (error) {
      console.error(error);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="max-w-4xl space-y-6">
      <SectionHeader title="My Profile"  />

      {success && (
        <Alert variant="info" title="Changes Saved">
          Your profile has been updated successfully.
        </Alert>
      )}

      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        {/* LEFT COLUMN: Identity Card */}
        <Card className="p-6 flex flex-col items-center text-center space-y-4 h-fit">
          <div className="relative group cursor-pointer">
            <div className="h-24 w-24 rounded-full bg-primary/10 flex items-center justify-center text-2xl font-bold text-primary border-4 border-background shadow-sm">
              {formData.name.charAt(0)}
            </div>
            <div className="absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
              <Icon name="camera" className="text-white" />
            </div>
          </div>
          
          <div>
            <h3 className="font-semibold text-lg">{formData.name}</h3>
            <span className="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary text-primary-foreground hover:bg-primary/80 uppercase">
              {formData.role}
            </span>
          </div>

          <div className="w-full pt-4 border-t">
            <p className="text-xs text-muted-foreground mb-4">
              Joined December 2024
            </p>
            <Button variant="outline" className="w-full" size="sm">
              Change Avatar
            </Button>
          </div>
        </Card>

        {/* RIGHT COLUMN: Edit Form */}
        <Card className="md:col-span-2 p-6">
          <form onSubmit={handleSave} className="space-y-4">
            <div className="grid gap-2">
              <h3 className="font-semibold text-lg">Personal Information</h3>
              <p className="text-sm text-muted-foreground">Update your personal details here.</p>
            </div>

            <div className="grid gap-4 py-4">
              <Input 
                label="Full Name" 
                name="name" 
                value={formData.name} 
                onChange={handleChange} 
              />
              <Input 
                label="Email Address" 
                name="email" 
                value={formData.email} 
                onChange={handleChange} 
              />
              <div className="space-y-2">
                <label className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">
                  Bio
                </label>
                <textarea 
                  className="flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                  value={formData.bio}
                  disabled
                />
                <p className="text-[0.8rem] text-muted-foreground">
                  Bio editing is disabled in this demo.
                </p>
              </div>
            </div>

            <div className="flex justify-end gap-4">
              <Button type="submit" disabled={isLoading}>
                {isLoading ? 'Saving...' : 'Save Changes'}
              </Button>
            </div>
          </form>
        </Card>
      </div>
    </div>
  );
};

export default ProfilePage;
</file>

<file path="template/src/features/settings/pages/TeamPage.tsx">
import React from 'react';
// --- 1. Import the new generic page ---
import GenericContentPage from '../../GenericContentPage'; 

// A simple page component for settings
const TeamPage: React.FC = () => {
  return <GenericContentPage pageTitle="Team Management" />;
};

export default TeamPage;
</file>

<file path="template/src/features/styleguide/sections/charts/ChartsSection.tsx">
// src/pages/styleguide/sections/charts/ChartsSection.tsx
import React from 'react';
import {
  BarChart,
  LineChart,
  PieChart,
  ChartWithTable,
  SectionHeader
} from '@ramme-io/ui';

// Mock data included locally for the style guide
const mockChartData = [
  { name: 'Jan', uv: 4000, pv: 2400, amt: 2400 },
  { name: 'Feb', uv: 3000, pv: 1398, amt: 2210 },
  { name: 'Mar', uv: 2000, pv: 9800, amt: 2290 },
  { name: 'Apr', uv: 2780, pv: 3908, amt: 2000 },
  { name: 'May', uv: 1890, pv: 4800, amt: 2181 },
  { name: 'Jun', uv: 2390, pv: 3800, amt: 2500 },
];

const mockPieChartData = [
  { name: 'Group A', value: 400 },
  { name: 'Group B', value: 300 },
  { name: 'Group C', value: 300 },
  { name: 'Group D', value: 200 },
];


const ChartsSection: React.FC = () => {
  return (
    <div className="space-y-8">
      <SectionHeader title="Charts & Data Visualization" />
      <p className="text-muted-foreground -mt-6">
        These components are theme-aware wrappers around the Recharts library. For convenience, the `ChartWithTable` component automatically provides a menu to view the underlying data in a table.
      </p>

      {/* Bar Chart with Table View */}
      <div id="charts-bar" className="scroll-mt-20">
        <ChartWithTable
          title="Monthly Revenue"
          data={mockChartData}
          tableHeaders={[
            { key: 'name', label: 'Month' },
            { key: 'pv', label: 'Page Views' },
            { key: 'uv', label: 'Unique Visitors' },
          ]}
        >
          <BarChart
            data={mockChartData}
            dataKeyX="name"
            // FIX: Pass only the keys as an array of strings
            barKeys={['pv', 'uv']}
          />
        </ChartWithTable>
      </div>

      {/* Line Chart with Table View */}
      <div id="charts-line" className="scroll-mt-20">
        <ChartWithTable
          title="User Growth"
          data={mockChartData}
          tableHeaders={[
            { key: 'name', label: 'Month' },
            { key: 'uv', label: 'UV' },
            { key: 'pv', label: 'PV' },
          ]}
        >
          <LineChart
            data={mockChartData}
            dataKeyX="name"
            // FIX: Pass only the keys as an array of strings
            lineKeys={['uv', 'pv']}
          />
        </ChartWithTable>
      </div>

      {/* Pie Chart with Table View */}
      <div id="charts-pie" className="scroll-mt-20">
      <ChartWithTable
        title="Data Distribution"
        data={mockPieChartData}
        tableHeaders={[
          { key: 'name', label: 'Group' },
          { key: 'value', label: 'Value' },
        ]}
      >
        <PieChart data={mockPieChartData} dataKey="value" nameKey="name" />
      </ChartWithTable>
      </div>
    </div>
  );
};

export default ChartsSection;
</file>

<file path="template/src/features/styleguide/sections/colors/ColorsSection.tsx">
// src/pages/styleguide/sections/colors/ColorsSection.tsx
import React from 'react';
import { Card, SectionHeader } from '@ramme-io/ui';

// Sub-component for your themed colors
const ThemeColorSwatch: React.FC<{ name: string; utility: string; }> = ({ name, utility }) => {
  const bgClass = utility.startsWith('text-') ? 'bg-background' : `bg-${utility.split('-')[1]}`;
  const textClass = utility.startsWith('text-') ? 'text-text' : '';
  const borderClass = utility.startsWith('border-') ? 'border-4 border-border' : 'border border-border';

  return (
    <div className="flex flex-col w-36 text-center">
      <div className={`h-24 w-full rounded-lg flex items-center justify-center ${bgClass} ${borderClass}`}>
        {utility.startsWith('text-') && <span className={`text-2xl font-bold ${textClass}`}>Aa</span>}
      </div>
      <div className="mt-2">
        <p className="font-semibold text-text">{name}</p>
        <p className="text-sm text-muted-foreground font-mono">{utility}</p>
      </div>
    </div>
  );
};

// Sub-component for default Tailwind colors
const TailwindColorSwatch: React.FC<{ name: string; className: string; }> = ({ name, className }) => {
  return (
    <div className="flex items-center space-x-4">
      <div className={`w-10 h-10 rounded-full shrink-0 ${className}`} />
      <div className="text-sm font-medium text-text">{name}</div>
    </div>
  );
};

// The main component for the full colors page
const ColorsSection: React.FC = () => {
  const themeColors = [
    { name: 'Primary', utility: 'bg-primary' },
    { name: 'Secondary', utility: 'bg-secondary' },
    { name: 'Accent', utility: 'bg-accent' },
    { name: 'Text', utility: 'text-text' },
    { name: 'Background', utility: 'bg-background' },
    { name: 'Card', utility: 'bg-card' },
    { name: 'Border', utility: 'border-border' },
    { name: 'Hover', utility: 'bg-bg-hover' },
  ];

  const defaultColors = [
    { name: 'Slate', className: 'bg-slate-500' },
    { name: 'Gray', className: 'bg-gray-500' },
    { name: 'Zinc', className: 'bg-zinc-500' },
    { name: 'Neutral', className: 'bg-neutral-500' },
    { name: 'Stone', className: 'bg-stone-500' },
    { name: 'Red', className: 'bg-red-500' },
    { name: 'Orange', className: 'bg-orange-500' },
    { name: 'Amber', className: 'bg-amber-500' },
    { name: 'Yellow', className: 'bg-yellow-500' },
    { name: 'Lime', className: 'bg-lime-500' },
    { name: 'Green', className: 'bg-green-500' },
    { name: 'Emerald', className: 'bg-emerald-500' },
    { name: 'Teal', className: 'bg-teal-500' },
    { name: 'Cyan', className: 'bg-cyan-500' },
    { name: 'Sky', className: 'bg-sky-500' },
    { name: 'Blue', className: 'bg-blue-500' },
    { name: 'Indigo', className: 'bg-indigo-500' },
    { name: 'Violet', className: 'bg-violet-500' },
    { name: 'Purple', className: 'bg-purple-500' },
    { name: 'Fuchsia', className: 'bg-fuchsia-500' },
    { name: 'Pink', className: 'bg-pink-500' },
    { name: 'Rose', className: 'bg-rose-500' },
  ];

  return (
    <div className="space-y-8">
       <SectionHeader title="Color Palette" />
       <p className="text-muted-foreground -mt-6">A showcase of the dynamic, theme-aware colors and the default Tailwind CSS color palette available for use.</p>
      
      <Card id="colors-theme" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-2 text-text">Themed Color Palette</h3>
        <p className="text-muted-foreground mb-8">
          These colors are defined by the current theme and will change dynamically when you switch themes. These colors are defined in the theme and can be applied using utility classes like bg-*, text-*, and border-*.
        </p>
        <div className="flex flex-wrap justify-center gap-x-8 gap-y-12">
          {themeColors.map((color) => (
            <ThemeColorSwatch
              key={color.name}
              name={color.name}
              utility={color.utility}
            />
          ))}
        </div>
      </Card>
      
      <Card id="colors-tailwind" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-2 text-text">Default Tailwind Palette</h3>
        <p className="text-muted-foreground mb-8">
          A summary of the static default colors built into Tailwind CSS. Each color typically comes in 10 shades (e.g., `slate-50` to `slate-900`).
          You can view the{' '}
          <a
            href="https://tailwindcss.com/docs/customizing-colors"
            target="_blank"
            rel="noopener noreferrer"
            className="text-primary hover:underline"
          >
            full palette on the official documentation site
          </a>.
        </p>
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-x-6 gap-y-8">
          {defaultColors.map((color) => (
            <TailwindColorSwatch
              key={color.name}
              name={color.name}
              className={color.className}
            />
          ))}
        </div>
      </Card>
    </div>
  );
};

export default ColorsSection;
</file>

<file path="template/src/features/styleguide/sections/elements/ElementsSection.tsx">
// src/pages/styleguide/sections/elements/ElementsSection.tsx
import React, { useState, memo } from 'react';
import {
  Card,
  Avatar,
  Badge,
  StatCard,
  ToggleSwitch,
  ActivityFeed,
  SectionHeader
} from '@ramme-io/ui';

// --- Mock Data for ActivityFeed ---
const mockActivity = [
  {
    id: 1,
    author: 'Olivia Rhye',
    action: 'Upcoming deprecation of GPU machine type',
    timestamp: new Date(Date.now() - 20 * 60 * 60 * 1000) // 20 hours ago
  },
  {
    id: 2,
    author: 'Phoenix Baker',
    action: 'Update on GitHub Copilot consumptive billing',
    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000) // Yesterday
  },
  {
    id: 3,
    author: 'Lana Steiner',
    action: 'GitHub Actions: New APIs and windows-latest migration',
    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000) // 2 days ago
  },
];

// Memoize the sections that don't need to re-render.
const AvatarsSection = memo(() => (
  <Card id="elements-avatars" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Avatars</h3>
    <div className="flex flex-wrap items-center gap-4">
      <Avatar name="Bode Ditko" size="sm" />
      <Avatar name="Jane Doe" size="md" />
      <Avatar name="John Smith" size="lg" />
      <Avatar name="Ramme UI" src="https://github.com/ramme-io.png" size="lg" />
    </div>
  </Card>
));

const BadgesSection = memo(() => (
  <Card id="elements-badges" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Badges</h3>
    <div className="flex flex-wrap items-center gap-4">
      <Badge variant="primary">Primary</Badge>
      <Badge variant="secondary">Secondary</Badge>
      <Badge variant="success">Success</Badge>
      <Badge variant="danger">Danger</Badge>
    </div>
  </Card>
));

const StatCardsSection = memo(() => (
  <Card id="elements-stats" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Stat Cards</h3>
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <StatCard
        title="Total Sales"
        value="$12,345"
        icon="dollar-sign"
        changeText="+5.2% since last week"
        changeDirection="positive"
        footerText="Aggregated by day"
      />
      <StatCard
        title="New Users"
        value="1,234"
        icon="users"
        changeText="-1.8% since last month"
        changeDirection="negative"
      />
      <StatCard
        title="Open Tickets"
        value="56"
        icon="inbox"
      />
    </div>
  </Card>
));

const ActivityFeedSection = memo(() => (
  <Card id="elements-activity" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Activity Feed</h3>
    <p className="text-muted-foreground mb-6">
      Displays a chronological list of events or changes.
    </p>
    <div className="max-w-md">
      <ActivityFeed items={mockActivity} title="Latest Changes" />
    </div>
  </Card>
));


const ElementsSection: React.FC = () => {
  const [isToggled, setIsToggled] = useState(true);

  return (
   <div className="space-y-8">
      <SectionHeader title="UI Elements" />
      <p className="text-muted-foreground -mt-6">
        These are small, atomic components that can be composed to build more complex UI patterns.
      </p>

      <AvatarsSection />
      <BadgesSection />
      <StatCardsSection />
      <ActivityFeedSection />

      <Card id="elements-toggle" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Toggle Switches</h3>
        <div className="flex flex-col space-y-4">
          <ToggleSwitch
            label="Enable Notifications"
            checked={isToggled}
            onChange={setIsToggled}
          />
          <ToggleSwitch
            label="Marketing Emails"
            checked={false}
            onChange={() => {}}
          />
          <ToggleSwitch
            label="Disabled Toggle"
            checked={false}
            onChange={() => {}}
            disabled
          />
        </div>
      </Card>
    </div>
  );
};

export default ElementsSection;
</file>

<file path="template/src/features/styleguide/sections/feedback/FeedbackSection.tsx">
// src/pages/styleguide/sections/feedback/FeedbackSection.tsx
import React from 'react';
import {
  Card,
  Button,
  TippyTooltip,
  EmptyState,
  Alert,
  useToast,
  SectionHeader
} from '@ramme-io/ui';

const FeedbackSection: React.FC = () => {
  const { addToast } = useToast();

  const handleEmptyStateClearSearch = () => {
    addToast('Search cleared!', 'info');
  };
  const handleEmptyStateAddItem = () => {
    addToast('Navigating to "Add Item" page...', 'success');
  };

  return (
    <div className="space-y-8">
      <SectionHeader title="Feedback Components" />
      <p className="text-muted-foreground -mt-6">
        Use these components to provide feedback to the user in response to their actions or system events.
      </p>

      {/* Alerts */}
      <Card id="feedback-alerts" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Alerts</h3>
        <div className="space-y-4">
          <Alert variant="info" title="Informational Message">
            This is a standard informational alert.
          </Alert>
          <Alert variant="success" title="Success!">
            Your action was completed successfully.
          </Alert>
          <Alert variant="warning" title="Warning">
            There might be a problem with your configuration.
          </Alert>
          <Alert variant="danger" title="Error: Unable to Proceed">
            We could not save your changes.
          </Alert>
        </div>
      </Card>

      {/* Tooltips */}
      <Card id="feedback-tooltip" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Tooltips</h3>
        <p className="text-muted-foreground mb-6">Tooltips are powered by Tippy.js for robust positioning and accessibility.</p>
        <div className="flex flex-wrap items-center gap-8">
          <TippyTooltip content="This is a top tooltip." placement="top">
            <Button variant="secondary">Hover Me (Top)</Button>
          </TippyTooltip>
          <TippyTooltip content="This is a right tooltip." placement="right">
            <Button variant="secondary">Hover Me (Right)</Button>
          </TippyTooltip>
           <TippyTooltip content="This is a bottom tooltip." placement="bottom">
            <Button variant="secondary">Hover Me (Bottom)</Button>
          </TippyTooltip>
           <TippyTooltip content="This is a left tooltip." placement="left">
            <Button variant="secondary">Hover Me (Left)</Button>
          </TippyTooltip>
        </div>
      </Card>

      {/* Toast Notifications */}
      <Card id="feedback-toast" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Toast Notifications</h3>
         <p className="text-muted-foreground mb-6">Click the buttons to trigger a global toast notification. Ensure the application is wrapped in a <code className="bg-primary/10 text-primary px-1 rounded">ToastProvider</code>.</p>
        <div className="flex flex-wrap items-center gap-4">
          <Button onClick={() => addToast('This is a default toast.')}>Show Default</Button>
          <Button onClick={() => addToast('Success message!', 'success')}>Show Success</Button>
          <Button onClick={() => addToast('Informational message.', 'info')}>Show Info</Button>
          <Button onClick={() => addToast('Warning message.', 'warning')}>Show Warning</Button>
          <Button onClick={() => addToast('Error message!', 'error')}>Show Error</Button>
        </div>
      </Card>

      {/* Empty State */}
      <Card id="feedback-empty" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Empty State / No Data</h3>
        <div className="space-y-12">
          <EmptyState
            title="No Data Found"
            description="It looks like there's no information to display here yet."
            icon="bar-chart-2"
          />
          <EmptyState
            title="Search Results Empty"
            description="We couldn't find any items matching your search criteria."
            icon="search"
            actionButton={<Button variant="primary" onClick={handleEmptyStateClearSearch}>Clear Search</Button>}
          />
           <EmptyState
            title="Welcome! Get Started"
            description="You haven't created any items yet. Click the button below to add your first entry."
            icon="rocket"
            actionButton={<Button variant="accent" onClick={handleEmptyStateAddItem}>Add New Item</Button>}
          />
        </div>
      </Card>
    </div>
  );
};

export default FeedbackSection;
</file>

<file path="template/src/features/styleguide/sections/forms/FormsSection.tsx">
// src/pages/styleguide/sections/forms/FormsSection.tsx
import React, { useState } from 'react';
import {
  Card,
  Button,
  ButtonGroup,
  Input,
  SearchInput,
  Select,
  Checkbox,
  Radio,
  ToggleSwitch,
  ComboBox,
  MultiSelect,
  DatePicker,
  FileUpload,
  FormTemplate,
  useToast,
  SectionHeader,
  Icon,
  type FormField,
  type MultiSelectOption,
} from '@ramme-io/ui';


const FormsSection: React.FC = () => {
  const { addToast } = useToast();

  // State for various form controls
  const [selectedOption, setSelectedOption] = useState('option1');
  const [isChecked, setIsChecked] = useState(false);
  const [isToggled, setIsToggled] = useState(true);
  const [selectedRadio, setSelectedRadio] = useState('optionA');
  const [isLoading, setIsLoading] = useState(false);
  const [inputValue, setInputValue] = useState('');
  const [selectedDate, setSelectedDate] = useState<Date | null>(null);
  const [selectedFruit, setSelectedFruit] = useState<string | number | null>('apple');
  const [selectedCountries, setSelectedCountries] = useState<MultiSelectOption[] | null>([
    { value: 'usa', label: 'United States' },
    { value: 'can', label: 'Canada' }
  ]);

  const isError = inputValue.length > 0 && inputValue.length < 5;

  const selectOptions = [
    { value: 'option1', label: 'Option 1' },
    { value: 'option2', label: 'Option 2' },
    { value: 'option3', label: 'Option 3' },
  ];

  const fruitOptions = [
    { value: 'apple', label: 'Apple' },
    { value: 'banana', label: 'Banana' },
    { value: 'orange', label: 'Orange' },
  ];

  const countryOptions: MultiSelectOption[] = [
    { value: 'usa', label: 'United States' },
    { value: 'can', label: 'Canada' },
    { value: 'mex', label: 'Mexico' },
  ];

  const handleFileUpload = (files: File[]) => {
    addToast(`Files uploaded: ${files.map(f => f.name).join(', ')}`, 'success');
  };

  const handleFormSubmit = (formData: Record<string, any>) => {
    addToast('Form submitted successfully!', 'success');
    console.log('Form Submitted:', formData);
  };

  const userProfileFields: FormField[] = [
    { name: 'fullName', label: 'Full Name', type: 'text', placeholder: 'John Doe', colSpan: 2 },
    { name: 'email', label: 'Email Address', type: 'email', placeholder: 'john.doe@example.com', colSpan: 2 },
    {
      name: 'country',
      label: 'Country',
      type: 'select',
      options: countryOptions,
      value: 'can',
    },
    { name: 'subscribeNewsletter', label: 'Subscribe to Newsletter', type: 'checkbox', checked: true },
  ];


  return (
    <div className="space-y-8">
      <SectionHeader title="Form Components & Patterns" />
       <p className="text-muted-foreground -mt-6">
        A collection of components for building forms, from basic inputs and buttons to advanced file uploads and declarative form templates.
      </p>

      <Card id="form-buttons" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Buttons & Button Groups</h3>
        <div className="space-y-6">
            <div className="flex flex-wrap items-center gap-4">
              <Button variant="primary">Primary</Button>
              <Button variant="secondary">Secondary</Button>
              <Button variant="accent">Accent</Button>
              <Button variant="danger">Danger</Button>
              <Button variant="outline">Outline</Button>
              <Button variant="ghost">Ghost</Button>
            </div>
            <div className="flex flex-wrap items-center gap-4">
              <Button variant="primary" size="sm">Small</Button>
              <Button variant="primary" size="md">Medium</Button>
              <Button variant="primary" size="lg">Large</Button>
            </div>
            <div className="flex flex-wrap items-center gap-4">
              <Button variant="primary" disabled>Disabled</Button>
              <Button variant="primary" loading={isLoading} onClick={() => { setIsLoading(true); setTimeout(() => setIsLoading(false), 2000); }}>
                {isLoading ? 'Loading...' : 'Click to Load'}
              </Button>
              <Button variant="primary" iconBefore={<Icon name="plus" />}>Create</Button>
            </div>
            <div>
            <ButtonGroup>
              <Button variant="outline">Copy</Button>
              <Button variant="outline">Paste</Button>
            </ButtonGroup>
          </div>
        </div>
      </Card>

      <Card id="form-inputs" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Standard & Search Inputs</h3>
        <div className="space-y-6 max-w-md">
          <Input label="Standard Input" type="text" placeholder="Placeholder text..." />
          <Input
            label="Validation Example"
            type="text"
            value={inputValue}
            onChange={(e) => setInputValue(e.target.value)}
            error={isError}
            helperText={isError ? "Input must be at least 5 characters long." : "This is a hint."}
          />
          <SearchInput placeholder="Search for anything..." />
        </div>
      </Card>

      <Card id="form-select" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Selection Controls</h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div className="space-y-4">
            <Select label="Choose an option" options={selectOptions} value={selectedOption} onChange={(e) => setSelectedOption(e.target.value)} />
            <Checkbox label="Remember me" checked={isChecked} onChange={(e) => setIsChecked(e.target.checked)} />
            <ToggleSwitch label="Enable Notifications" checked={isToggled} onChange={setIsToggled} />
          </div>
          <div className="space-y-4">
              <p className="font-medium text-text">Radio Group</p>
              <Radio name="radioGroup1" label="Option A" value="optionA" checked={selectedRadio === 'optionA'} onChange={(e) => setSelectedRadio(e.target.value)} />
              <Radio name="radioGroup1" label="Option B" value="optionB" checked={selectedRadio === 'optionB'} onChange={(e) => setSelectedRadio(e.target.value)} />
          </div>
        </div>
      </Card>

      <Card id="form-advanced" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Advanced Inputs</h3>
        <div className="space-y-6 max-w-md">
          <ComboBox
            label="Combo Box (Autocomplete)"
            options={fruitOptions}
            value={selectedFruit}
            onOptionSelect={(value) => setSelectedFruit(value)}
            placeholder="Search for a fruit..."
          />
          <MultiSelect
            label="Multi-Select"
            options={countryOptions}
            value={selectedCountries}
            onChange={setSelectedCountries}
          />
          <DatePicker
            label="Date Picker"
            selected={selectedDate}
            onChange={(date) => setSelectedDate(date)}
            placeholderText="Click to select a date"
          />
        </div>
      </Card>

      <Card id="form-upload" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">File Upload</h3>
        <div className="max-w-md">
            <FileUpload
                label="Upload your document"
                onFileUpload={handleFileUpload}
            />
        </div>
      </Card>
      
      <Card id="form-template" className="p-6 scroll-mt-20">
        <SectionHeader title="User Registration Template" className="mb-6" />
        <FormTemplate
          fields={userProfileFields}
          onSubmit={handleFormSubmit}
        >
          <div className="flex justify-end">
            <Button type="submit" variant="primary">Register</Button>
          </div>
        </FormTemplate>
      </Card>
    </div>
  );
};

export default FormsSection;
</file>

<file path="template/src/features/styleguide/sections/icons/IconsSection.tsx">
// src/pages/styleguide/sections/icons/IconsSection.tsx
import React from 'react';
import { Card, Icon, SectionHeader } from '@ramme-io/ui';
import type { IconName } from '@ramme-io/ui';

// A sample list of icons to display in the gallery.
const iconList: { name: IconName; category: string }[] = [
  { name: 'home', category: 'Navigation' },
  { name: 'user', category: 'User' },
  { name: 'settings', category: 'System' },
  { name: 'search', category: 'Actions' },
  { name: 'plus', category: 'Actions' },
  { name: 'minus', category: 'Actions' },
  { name: 'x', category: 'Actions' },
  { name: 'check', category: 'Actions' },
  { name: 'chevron-down', category: 'Navigation' },
  { name: 'chevron-up', category: 'Navigation' },
  { name: 'chevron-left', category: 'Navigation' },
  { name: 'chevron-right', category: 'Navigation' },
  { name: 'log-out', category: 'User' },
  { name: 'edit', category: 'Actions' },
  { name: 'trash-2', category: 'Actions' },
  { name: 'copy', category: 'Actions' },
  { name: 'mail', category: 'Communication' },
  { name: 'phone', category: 'Communication' },
  { name: 'calendar', category: 'Time' },
  { name: 'clock', category: 'Time' },
  { name: 'bell', category: 'System' },
  { name: 'alert-triangle', category: 'System' },
  { name: 'info', category: 'System' },
  { name: 'help-circle', category: 'System' },
];

const IconsSection: React.FC = () => {
  return (
    <div className="space-y-8">
      <SectionHeader title="Icons (Lucide)" />
      <p className="text-muted-foreground -mt-6">
        This project uses the <a href="https://lucide.dev/" target="_blank" rel="noopener noreferrer" className="text-primary hover:underline">Lucide</a> icon library. Use the generic `Icon` component to display any icon by name.
      </p>

      <Card id="icons-usage"  className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Usage</h3>
        <p className="text-muted-foreground mb-4">
          Import the `Icon` component and provide the `name` of the icon you wish to display. You can also pass any other props that Lucide icons accept, such as `size` or `className`.
        </p>
        <div className="bg-card-alt p-4 rounded-md">
          <code className="text-sm text-text whitespace-pre-wrap">
            {`import { Icon } from '@ramme-io/ui';

<Icon name="home" size={24} className="text-primary" />`}
          </code>
        </div>
      </Card>

      <Card id="icons-gallery" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Icon Gallery</h3>
        <p className="text-muted-foreground mb-6">
          This is a small sample of the icons available. For a full list, please visit the official Lucide documentation.
        </p>
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
          {iconList.map((icon) => (
            <div
              key={icon.name}
              className="flex flex-col items-center justify-center p-4 bg-card-alt rounded-lg text-center"
            >
              <Icon name={icon.name} size={32} className="mb-2 text-text" />
              <code className="text-xs text-muted-foreground">{icon.name}</code>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default IconsSection;
</file>

<file path="template/src/features/styleguide/sections/layout/LayoutSection.tsx">
// src/pages/styleguide/sections/layout/LayoutSection.tsx
import React, { useState } from 'react';
import {
  Card,
  Button,
  Input,
  Select,
  Modal,
  Drawer,
  Icon,
  Accordion,
  AccordionItem,
  useTheme,
  SectionHeader,
  type ThemeName,
} from '@ramme-io/ui';

const LayoutSection: React.FC = () => {
  const { theme, availableThemes, setTheme } = useTheme();
  const [isModalOpen, setIsModalOpen] = useState(false);

  // Drawer states specific to this section
  const [isRightDrawerOpen, setIsRightDrawerOpen] = useState(false);
  const [isLeftDrawerOpen, setIsLeftDrawerOpen] = useState(false);
  const [isTopDrawerOpen, setIsTopDrawerOpen] = useState(false);
  const [isBottomDrawerOpen, setIsBottomDrawerOpen] = useState(false);

  return (
    <div className="space-y-8">
      <SectionHeader title="Layout & Structure" />
      <p className="text-muted-foreground -mt-6">
        This section showcases high-level components for structuring pages and content. For low-level layout helpers like flexbox or grid, see the "Utilities" section.
      </p>

      {/* Theme Info */}
      <Card id="layout-theme"  className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Theme Controls</h3>
        <p className="text-lg text-muted-foreground">
          Active Theme: <span className="font-bold text-primary">{theme.charAt(0).toUpperCase() + theme.slice(1)}</span>
        </p>
        <div className="mt-4 flex items-center space-x-2">
          <label htmlFor="layout-theme-select" className="text-text">Switch Theme:</label>
          <Select
            id="layout-theme-select"
            options={availableThemes.map(t => ({ value: t, label: t.charAt(0).toUpperCase() + t.slice(1) }))}
            value={theme}
            onChange={(e) => setTheme(e.target.value as ThemeName)}
            className="w-40"
          />
        </div>
      </Card>

      {/* Typography */}
      <Card id="layout-typography" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Typography</h3>
         <p className="text-muted-foreground mb-6">
          The typographic scale is controlled by font-size (<code className="bg-primary/10 text-primary px-1 rounded">text-*</code>) and font-weight (<code className="bg-primary/10 text-primary px-1 rounded">font-*</code>) utility classes.
        </p>
        <div className="space-y-4">
            <div className="flex items-baseline justify-between"><h1 className="text-5xl font-extrabold text-text">Heading 1</h1><code className="text-sm text-muted-foreground">.text-5xl .font-extrabold</code></div>
            <div className="flex items-baseline justify-between"><h2 className="text-4xl font-bold text-text">Heading 2</h2><code className="text-sm text-muted-foreground">.text-4xl .font-bold</code></div>
            <div className="flex items-baseline justify-between"><h3 className="text-3xl font-semibold text-text">Heading 3</h3><code className="text-sm text-muted-foreground">.text-3xl .font-semibold</code></div>
            <div className="flex items-baseline justify-between"><p className="text-base text-text">Paragraph text</p><code className="text-sm text-muted-foreground">.text-base</code></div>
            <div className="flex items-baseline justify-between"><p className="text-sm text-muted-foreground">Small text for captions</p><code className="text-sm text-muted-foreground">.text-sm</code></div>
        </div>
      </Card>

      {/* Card Examples */}
      <Card id="layout-card" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Cards</h3>
        <p className="text-muted-foreground mb-6">
          The Card is a flexible container. Use props to override default theme styles for background, border, padding, and shadow.
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <Card className="p-6"><h4 className="font-semibold text-lg mb-2 text-text">Default Card</h4><p className="text-text-light">This card uses theme defaults.</p></Card>
          <Card className="p-6" shadow="shadow-xl"><h4 className="font-semibold text-lg mb-2 text-text">Shadow Override</h4><p className="text-text-light">This card has a large `shadow-xl`.</p></Card>
          <Card className="p-6" background="bg-primary/30" border="border-2 border-primary/50"><h4 className="font-semibold text-lg mb-2 text-primary">Style Override</h4><p className="text-primary/80">Custom background and a thicker, colored border.</p></Card>
        </div>
      </Card>

      {/* Modals */}
      <Card id="layout-modal" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Modals</h3>
        <Button onClick={() => setIsModalOpen(true)} variant="accent">Open Modal</Button>
        <Modal
          isOpen={isModalOpen}
          onClose={() => setIsModalOpen(false)}
          title="Layout Test Modal"
          footer={
            <div className="flex justify-end gap-2">
              <Button variant="outline" onClick={() => setIsModalOpen(false)}>Close</Button>
              <Button variant="primary" onClick={() => setIsModalOpen(false)}>Confirm</Button>
            </div>
          }
        >
          <p className="text-text">This is a modal instance from the layout section.</p>
          <Input type="text" placeholder="Modal Input Field" className="mt-4" />
        </Modal>
      </Card>

      {/* Drawers */}
      <Card id="layout-drawer" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Drawers</h3>
        <div className="flex flex-wrap items-center gap-4">
          <Button onClick={() => setIsRightDrawerOpen(true)}>Open Right Drawer</Button>
          <Button onClick={() => setIsLeftDrawerOpen(true)}>Open Left Drawer</Button>
          <Button onClick={() => setIsTopDrawerOpen(true)}>Open Top Drawer</Button>
          <Button onClick={() => setIsBottomDrawerOpen(true)}>Open Bottom Drawer</Button>
        </div>
        <Drawer isOpen={isRightDrawerOpen} onClose={() => setIsRightDrawerOpen(false)} position="right" title="Right-Side Drawer"><p className="p-4 text-text">This drawer slides in from the right.</p></Drawer>
        <Drawer isOpen={isLeftDrawerOpen} onClose={() => setIsLeftDrawerOpen(false)} position="left" title="Left-Side Drawer"><p className="p-4 text-text">This drawer slides in from the left.</p></Drawer>
        <Drawer isOpen={isTopDrawerOpen} onClose={() => setIsTopDrawerOpen(false)} position="top" title="Top Drawer"><p className="p-4 text-text">This drawer slides down from the top.</p></Drawer>
        <Drawer isOpen={isBottomDrawerOpen} onClose={() => setIsBottomDrawerOpen(false)} position="bottom" title="Bottom Drawer"><p className="p-4 text-text">This drawer slides up from the bottom.</p></Drawer>
      </Card>

      {/* Accordion */}
      <Card id="layout-accordion" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Accordion / Collapsible Panels</h3>
        <Accordion>
          <AccordionItem id="item1" header="Section 1: What is this boilerplate?"><p className="p-4 text-text">This is a React and Tailwind CSS boilerplate designed for rapid prototyping. It comes with a comprehensive set of pre-built, theme-aware UI components.</p></AccordionItem>
          <AccordionItem id="item2" header="Section 2: How do I use it?"><p className="p-4 text-text">Simply use `npm create ramme-app@latest` to start a new project. Explore this Style Guide for component examples.</p></AccordionItem>
        </Accordion>
      </Card>
    </div>
  );
};

export default LayoutSection;
</file>

<file path="template/src/features/styleguide/sections/navigation/NavigationSection.tsx">
// src/pages/styleguide/sections/navigation/NavigationSection.tsx
import React, { useState } from 'react';
import {
  Card,
  Button,
  Input,
  Stepper,
  Tabs,
  TabPanel,
  Menu,
  MenuItem,
  MenuDivider,
  Breadcrumbs,
  BreadcrumbItem,
  Icon,
  SectionHeader,
} from '@ramme-io/ui';


const NavigationSection: React.FC = () => {
  const handleMenuItemClick = (item: string) => {
    alert(`Menu Item Clicked: ${item}`);
  };

  const stepperSteps = [
    { label: 'Account Setup', summary: 'Create your account' },
    { label: 'Personal Details', summary: 'Add your information' },
    { label: 'Verification', summary: 'Verify your email' },
    { label: 'Done', summary: 'You are all set!' },
  ];
  const [currentStep, setCurrentStep] = useState(1);

  return (
    <div className="space-y-8">
      <SectionHeader title="Navigation Components" />
      <p className="text-muted-foreground -mt-6">
        A collection of components designed to help users navigate through pages and content flows.
      </p>

      <Card id="navigation-stepper" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Stepper</h3>
        <p className="text-muted-foreground mb-6">
          Guide users through a multi-step process with the Stepper component.
        </p>
        <Stepper steps={stepperSteps} currentStep={currentStep} />
        <div className="flex justify-center mt-6 gap-4">
            <Button onClick={() => setCurrentStep(s => Math.max(0, s - 1))} disabled={currentStep === 0}>Previous</Button>
            <Button onClick={() => setCurrentStep(s => Math.min(stepperSteps.length - 1, s + 1))} disabled={currentStep === stepperSteps.length - 1}>Next</Button>
        </div>
      </Card>

      <Card id="navigation-tabs" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Tabs with Icons</h3>
        <Tabs defaultActiveTab="tab1">
          <TabPanel id="tab1" label="Dashboard" icon={<Icon name="layout-dashboard" />}>
            <div className="p-4">
                <p className="text-text">Content for the Dashboard tab.</p>
            </div>
          </TabPanel>
          <TabPanel id="tab2" label="Users" icon={<Icon name="users" />}>
            <div className="p-4">
                <p className="text-text">Content for User Management.</p>
            </div>
          </TabPanel>
          <TabPanel id="tab3" label="Settings" icon={<Icon name="settings" />}>
            <div className="p-4">
                <p className="text-text">Content for Application Settings.</p>
            </div>
          </TabPanel>
        </Tabs>
      </Card>

      <Card id="navigation-menus" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Menus</h3>
        <div className="flex flex-wrap items-center gap-8">
          <Menu
            trigger={<Button variant="primary">Menu with Icons</Button>}
          >
            <MenuItem icon={<Icon name="edit" />} onClick={() => handleMenuItemClick('Edit')}>
              Edit Profile
            </MenuItem>
            <MenuItem icon={<Icon name="copy" />} onClick={() => handleMenuItemClick('Duplicate')}>
              Duplicate
            </MenuItem>
            <MenuDivider />
            <MenuItem icon={<Icon name="archive" />} onClick={() => handleMenuItemClick('Archive')}>
              Archive
            </MenuItem>
            <MenuItem icon={<Icon name="trash-2" />} onClick={() => handleMenuItemClick('Delete')}>
              Delete
            </MenuItem>
          </Menu>
          
          <Menu
            trigger={<Button variant="secondary">Simple Menu</Button>}
          >
            <MenuItem icon={<Icon name="settings" />} onClick={() => handleMenuItemClick('Account Settings')}>Account Settings</MenuItem>
            <MenuItem icon={<Icon name="user-plus" />} onClick={() => handleMenuItemClick('Invite Team')}>Invite Team</MenuItem>
            <MenuDivider />
            <MenuItem icon={<Icon name="help-circle" />} onClick={() => handleMenuItemClick('Support')}>Support</MenuItem>
          </Menu>
        </div>
      </Card>

      <Card id="navigation-breadcrumbs" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Breadcrumbs with Icons</h3>
        <div className="space-y-4">
          <Breadcrumbs>
            <BreadcrumbItem icon={<Icon name="home" />} label="Home"  />
            <BreadcrumbItem icon={<Icon name="folder" />} label="Dashboard"  />
            <BreadcrumbItem icon={<Icon name="file-text" />} label="Current Page" isCurrent />
          </Breadcrumbs>
        </div>
      </Card>
    </div>
  );
};

export default NavigationSection;
</file>

<file path="template/src/features/styleguide/sections/tables/TablesSection.tsx">
// src/pages/styleguide/sections/tables/TablesSection.tsx
import React, { useState, useMemo, useCallback } from 'react';
import {
  Card,
  Input,
  Button,
  Table,
  Pagination,
  DataTable,
  Badge,
  SectionHeader,
  useDataFetch,
  type ColDef,
  type ICellRendererParams,
  type IRowNode,
} from '@ramme-io/ui';

// --- Local Mock Data ---
const mockLargeTableData = Array.from({ length: 23 }, (_, i) => ({
  id: `USR-00${i + 1}`,
  name: `User ${i + 1}`,
  email: `user${i + 1}@example.com`,
  status: ['Active', 'Inactive', 'Pending'][i % 3],
}));

const mockTableData = [
    { make: 'Tesla', model: 'Model Y', price: 65990, electric: true },
    { make: 'Ford', model: 'F-150', price: 33850, electric: false },
    { make: 'Toyota', model: 'Corolla', price: 29600, electric: false },
    { make: 'Rivian', model: 'R1T', price: 79500, electric: true },
    { make: 'Honda', model: 'CR-V', price: 32450, electric: false },
];

// --- Custom Cell Renderers ---
const ElectricCarRenderer: React.FC<ICellRendererParams> = (props) => {
  return <span>{props.value ? '‚ö° Electric' : '‚õΩ Gasoline'}</span>;
};

const StatusCell: React.FC<{ value: string }> = ({ value }) => {
  const variant = {
    Active: 'success' as const,
    Inactive: 'danger' as const,
    Pending: 'warning' as const,
  }[value] || 'secondary';
  return <Badge variant={variant}>{value}</Badge>;
};

const EmailCell: React.FC<{ value: string }> = ({ value }) => {
  return <a href={`mailto:${value}`} className="text-primary hover:underline">{value}</a>;
};

const TablesSection: React.FC = () => {
  const [simpleTablePage, setSimpleTablePage] = useState(1);
  const ITEMS_PER_PAGE = 5;
  const simpleTableHeaders = [
    { key: 'id', label: 'ID' },
    { key: 'name', label: 'Name' },
    { key: 'email', label: 'Email', render: (value: string) => <EmailCell value={value} /> },
    { key: 'status', label: 'Status', render: (value: string) => <StatusCell value={value} /> },
  ];
  const paginatedData = useMemo(() => {
    const start = (simpleTablePage - 1) * ITEMS_PER_PAGE;
    return mockLargeTableData.slice(start, start + ITEMS_PER_PAGE);
  }, [simpleTablePage]);
  const totalSimplePages = Math.ceil(mockLargeTableData.length / ITEMS_PER_PAGE);

  const { data: fetchedTableData } = useDataFetch(null, mockTableData);
  const [filterText, setFilterText] = useState<string>('');
  const [gridApi, setGridApi] = useState<any>(null);

  const onGridReady = useCallback((params: any) => setGridApi(params.api), []);

  const onFilterTextBoxChanged = useCallback(() => {
    gridApi?.setQuickFilter(filterText);
  }, [filterText, gridApi]);

  const columnDefs: ColDef[] = useMemo(() => [
    { field: 'make', headerName: 'Manufacturer', sortable: true, filter: true, floatingFilter: true, checkboxSelection: true, headerCheckboxSelection: true, minWidth: 150 },
    { field: 'model', headerName: 'Model Name', sortable: true, filter: true, floatingFilter: true, minWidth: 150 },
    { field: 'price', headerName: 'Price ($)', sortable: true, filter: 'agNumberColumnFilter', floatingFilter: true, valueFormatter: p => '$' + p.value.toLocaleString(), minWidth: 120 },
    { field: 'electric', headerName: 'Type', cellRenderer: ElectricCarRenderer, minWidth: 120 },
  ], []);

  const getSelectedRows = useCallback(() => {
    const selectedNodes: IRowNode[] = gridApi?.getSelectedNodes() || [];
    const selectedData = selectedNodes.map(node => node.data);
    alert(`Selected Rows: \n${JSON.stringify(selectedData, null, 2)}`);
  }, [gridApi]);

  return (
    <div className="space-y-8">
      <SectionHeader title="Tables & Data Grids" />
      <p className="text-muted-foreground -mt-6">Components for displaying tabular data, from simple tables to advanced data grids.</p>
      
      <Card id="tables-simple" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Simple Paginated Table</h3>
        <p className="text-muted-foreground mb-4">
          A basic HTML table with client-side pagination and custom cell renderers.
        </p>
        <Table headers={simpleTableHeaders} data={paginatedData} />
        <div className="mt-4 flex justify-center">
          <Pagination currentPage={simpleTablePage} totalPages={totalSimplePages} onPageChange={setSimpleTablePage} />
        </div>
      </Card>

      <Card id="tables-aggrid" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">AG Grid Data Table (Advanced)</h3>
        <p className="text-muted-foreground mb-4">
          A powerful grid with sorting, filtering, and row selection, powered by AG Grid.
        </p>
        <div className="flex flex-col md:flex-row md:items-center gap-4 mb-6">
          <Input
            type="text"
            placeholder="Quick Filter (searches all columns)..."
            value={filterText}
            onChange={(e) => setFilterText(e.target.value)}
            onKeyUp={onFilterTextBoxChanged}
            className="flex-1"
          />
          <Button onClick={getSelectedRows} variant="primary">
            Get Selected Rows
          </Button>
        </div>

        {fetchedTableData && (
          <DataTable
            rowData={fetchedTableData}
            columnDefs={columnDefs}
            height="500px"
            onGridReady={onGridReady}
            rowSelection="multiple"
          />
        )}
      </Card>
    </div>
  );
};

export default TablesSection;
</file>

<file path="template/src/features/styleguide/sections/templates/TemplatesSection.tsx">
// src/pages/styleguide/sections/templates/TemplatesSection.tsx
import React from 'react';
import {
  Card,
  Button,
  Input,
  Icon,
  PageHeader,
  SectionHeader,
  ActionBar,
} from '@ramme-io/ui';


const TemplatesSection: React.FC = () => {
  return (
    <div className="space-y-8">
      <SectionHeader title="Page & Layout Templates" />
      <p className="text-muted-foreground -mt-6">
        Combine these high-level components to quickly build consistent and professional page layouts.
      </p>

      {/* Page Layout Example */}
      <Card id="template-standard" className="scroll-mt-20 p-6">
        <div className="p-6">
          <PageHeader
            title="Standard Page Template"
            description="A standard page layout with a header, content sections, and a persistent action bar."
            actions={
              <Button variant="primary" iconBefore={<Icon name="plus" />}>
                Add New Item
              </Button>
            }
          />
        </div>
        <div className="p-6 border-t border-border space-y-4">
          <SectionHeader title="User Details" />
          <p className="text-muted-foreground">This is the main content area for a section. You can place forms, tables, or any other content here.</p>
          <Input type="text" placeholder="Example Input" />
        </div>
        <ActionBar>
          <Button variant="outline">Cancel</Button>
          <Button variant="primary" iconBefore={<Icon name="save" />}>
            Save Changes
          </Button>
        </ActionBar>
      </Card>

      {/* Responsive Layout Example */}
      <Card id="template-responsive" className="scroll-mt-20 p-6">
        <div className="p-6">
            <PageHeader
                title="Responsive Two-Column Template"
                description="This layout features a sidebar that stacks on mobile screens. Try resizing your browser to see it in action."
            />
        </div>
        <div className="p-6 border-t border-border">
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                {/* Main Content Area */}
                <main className="lg:col-span-2 space-y-6">
                    <SectionHeader title="Main Content" />
                    <Card className="p-6">
                        <p className="text-text">This is the primary content area. On large screens, it takes up two-thirds of the available space.</p>
                    </Card>
                </main>

                {/* Sidebar */}
                <aside className="space-y-6">
                    <SectionHeader title="Sidebar" />
                    <Card className="p-6">
                        <h4 className="font-semibold text-text mb-2">Metadata</h4>
                        <p className="text-muted-foreground text-sm">This sidebar stacks below the main content on smaller screens.</p>
                    </Card>
                </aside>
            </div>
        </div>
      </Card>
    </div>
  );
};

export default TemplatesSection;
</file>

<file path="template/src/features/styleguide/sections/theming/ThemingSection.tsx">
import React, { useState, useEffect } from 'react';
import {
  SectionHeader,
  Card,
  CodeBlock,
  Alert,
  useTheme,
  ButtonGroup,
  Button,
  Icon,
} from '@ramme-io/ui';
import type { ThemeName } from '@ramme-io/ui';


// --- HELPER DATA ---

interface ColorInfo {
  name: string;
  variable: string;
  category: 'Brand' | 'UI' | 'Text & Borders' | 'Form Controls' | 'Notifications' | 'Charts';
}

// UPDATED: Added new color definitions
const colorPaletteData: ColorInfo[] = [
  { name: 'Primary', variable: '--app-primary-color', category: 'Brand' },
  { name: 'Primary Content', variable: '--app-primary-foreground-color', category: 'Brand' },
  { name: 'Secondary', variable: '--app-secondary-color', category: 'Brand' },
  { name: 'Accent', variable: '--app-accent-color', category: 'Brand' },
  { name: 'Destructive', variable: '--app-danger-color', category: 'Brand' },
  { name: 'Page Background', variable: '--app-bg-color', category: 'UI' },
  { name: 'Card Background', variable: '--app-card-bg-color', category: 'UI' },
  { name: 'Default Text', variable: '--app-text-color', category: 'Text & Borders' },
  { name: 'Border', variable: '--app-border-color', category: 'Text & Borders' },
  { name: 'Input Border', variable: '--app-input-border-color', category: 'Form Controls' },
  { name: 'Input Focus Ring', variable: '--app-input-focus-ring-color', category: 'Form Controls' },
  { name: 'Info', variable: '--app-info-color', category: 'Notifications' },
  { name: 'Info Content', variable: '--app-info-foreground-color', category: 'Notifications' },
  { name: 'Success', variable: '--app-success-color', category: 'Notifications' },
  { name: 'Success Content', variable: '--app-success-foreground-color', category: 'Notifications' },
  { name: 'Warning', variable: '--app-warning-color', category: 'Notifications' },
  { name: 'Warning Content', variable: '--app-warning-foreground-color', category: 'Notifications' },
  { name: 'Chart 1', variable: '--app-chart-1', category: 'Charts' },
  { name: 'Chart 2', variable: '--app-chart-2', category: 'Charts' },
  { name: 'Chart 3', variable: '--app-chart-3', category: 'Charts' },
  { name: 'Chart 4', variable: '--app-chart-4', category: 'Charts' },
  { name: 'Chart 5', variable: '--app-chart-5', category: 'Charts' },
];

interface PropertyInfo {
  name: string;
  variable: string;
  category: 'Typography' | 'Shape';
}

const propertyAuditData: PropertyInfo[] = [
  { name: 'Sans Serif Font', variable: '--app-font-sans', category: 'Typography' },
  { name: 'Base Font Size', variable: '--app-font-size-base', category: 'Typography' },
  { name: 'Radius Small', variable: '--app-border-radius-sm', category: 'Shape' },
  { name: 'Radius Medium', variable: '--app-border-radius-md', category: 'Shape' },
  { name: 'Radius Large', variable: '--app-border-radius-lg', category: 'Shape' },
];

// --- HELPER COMPONENTS ---

const ColorSwatch: React.FC<{ color: ColorInfo; value: string }> = ({ color, value }) => {
  if (!value) {
    return <div className="border border-border rounded-lg h-36 bg-background animate-pulse"></div>;
  }
  const [r, g, b] = value.split(' ').map(Number);
  const hex = `#${[r, g, b].map(x => x.toString(16).padStart(2, '0')).join('')}`;

  return (
    <div className="border border-border rounded-lg overflow-hidden shadow-sm">
      <div className="h-24" style={{ backgroundColor: `rgb(${value})` }}></div>
      <div className="p-3 text-sm bg-card">
        <p className="font-semibold text-foreground">{color.name}</p>
        <div className="mt-2 text-xs font-mono text-muted-foreground space-y-1">
          <p>var({color.variable})</p>
          <p>{`rgb(${value})`}</p>
          <p>{hex.toUpperCase()}</p>
        </div>
      </div>
    </div>
  );
};

const ColorPalette: React.FC<{ colors: ColorInfo[] }> = ({ colors }) => {
  const { theme } = useTheme();
  const [colorValues, setColorValues] = useState<Record<string, string>>({});

  useEffect(() => {
    const timer = setTimeout(() => {
      const computedStyle = getComputedStyle(document.documentElement);
      const newValues: Record<string, string> = {};
      colors.forEach(color => {
        newValues[color.variable] = computedStyle.getPropertyValue(color.variable).trim();
      });
      setColorValues(newValues);
    }, 50);

    return () => clearTimeout(timer);
  }, [theme, colors]);

  const groupedColors = colors.reduce((acc, color) => {
      (acc[color.category] = acc[color.category] || []).push(color);
      return acc;
  }, {} as Record<string, ColorInfo[]>);

  return (
    <div className="space-y-6">
      {Object.entries(groupedColors).map(([category, colorsInCategory]) => (
        <div key={category}>
          <h3 className="text-lg font-semibold mb-3">{category}</h3>
          <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            {colorsInCategory.map(color => (
              <ColorSwatch key={color.variable} color={color} value={colorValues[color.variable] || ''} />
            ))}
          </div>
        </div>
      ))}
    </div>
  );
};

const PropertyDisplay: React.FC<{ property: PropertyInfo; value: string }> = ({ property, value }) => {
  return (
    <div className="bg-background border border-border rounded-lg p-4 flex items-center justify-between">
      <div>
        <div className="text-sm font-semibold text-foreground">{property.name}</div>
        <div className="text-xs font-mono text-muted-foreground mt-1">
          var({property.variable})
        </div>
        <div className="text-sm font-mono text-primary mt-2">{value}</div>
      </div>
      {property.category === 'Shape' && (
        <div
          className="w-16 h-16 bg-primary/20 border-2 border-dashed border-primary/50"
          style={{ borderRadius: value }}
        ></div>
      )}
      {property.category === 'Typography' && property.variable.includes('font-sans') && (
        <div className="text-3xl text-primary" style={{ fontFamily: value }}>Aa</div>
      )}
    </div>
  );
};

const LiveAuditSection: React.FC<{ title: string; data: PropertyInfo[] }> = ({ title, data }) => {
  const { theme } = useTheme();
  const [liveValues, setLiveValues] = useState<Record<string, string>>({});

  useEffect(() => {
    const timer = setTimeout(() => {
      const computedStyle = getComputedStyle(document.documentElement);
      const newValues: Record<string, string> = {};
      data.forEach(prop => {
        newValues[prop.variable] = computedStyle.getPropertyValue(prop.variable).trim();
      });
      setLiveValues(newValues);
    }, 50);
    return () => clearTimeout(timer);
  }, [theme, data]);

  return (
    <Card className="mb-6 p-6">
      <h2 className="text-xl font-bold mb-4">{title}</h2>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {data.map(prop => (
          <PropertyDisplay key={prop.variable} property={prop} value={liveValues[prop.variable] || '...'} />
        ))}
      </div>
    </Card>
  );
};

// --- MAIN COMPONENT ---

const ThemingSection: React.FC = () => {
  const { theme, setTheme, availableThemes, borderRadius, setBorderRadius, fontSize, setFontSize } = useTheme();

  const radii = [ { label: 'None', value: '0rem' }, { label: 'Sm', value: '0.25rem' }, { label: 'Md', value: '0.5rem' }, { label: 'Lg', value: '1rem' }];
  const fontSizes = [ { label: 'Sm', value: '0.875rem' }, { label: 'Base', value: '1rem' }, { label: 'Lg', value: '1.125rem' }];
  
  const themeCssVariables = `
  .dark {
    /* ... existing variables ... */
  }
  `;

  return (
    <div id="theming">
      <SectionHeader title="Theming System" />
      <p className="mt-2 mb-6 text-muted-foreground">
        An interactive guide to the visual identity of your application.
      </p>

      <Card className="mb-6 p-6">
        <h2 className="text-xl font-bold mb-4">Theme Playground</h2>
        <div className="space-y-6">
          <div>
            <label className="block text-sm font-medium mb-2 text-foreground/80">Color Theme</label>
            <ButtonGroup>
              {availableThemes.map((t: ThemeName) => (
                <Button 
                  key={t}
                  variant={theme === t ? 'primary' : 'secondary'}
                  onClick={() => setTheme(t)}
                >
                  {t}
                </Button>
              ))}
            </ButtonGroup>
          </div>
          <div>
            <label className="block text-sm font-medium mb-2 text-foreground/80">Border Radius</label>
            <ButtonGroup>
              {radii.map(r => (
                <Button
                  key={r.value}
                  variant={borderRadius === r.value ? 'primary' : 'secondary'}
                  onClick={() => setBorderRadius(r.value)}
                >
                  {r.label}
                </Button>
              ))}
            </ButtonGroup>
          </div>
          <div>
            <label className="block text-sm font-medium mb-2 text-foreground/80">Base Font Size</label>
            <ButtonGroup>
              {fontSizes.map(fs => (
                <Button
                  key={fs.value}
                  variant={fontSize === fs.value ? 'primary' : 'secondary'}
                  onClick={() => setFontSize(fs.value)}
                >
                  {fs.label}
                </Button>
              ))}
            </ButtonGroup>
          </div>
        </div>
      </Card>

      <LiveAuditSection title="Live Typography Audit" data={propertyAuditData.filter(p => p.category === 'Typography')} />
      <LiveAuditSection title="Live Shape Audit" data={propertyAuditData.filter(p => p.category === 'Shape')} />
      
      <Card className="mb-6 p-6">
        <h2 className="text-xl font-bold mb-2">Live Color Palette</h2>
        <p className="text-muted-foreground mb-4">The swatches below use the live CSS variables from the active theme. Use the controls above to see them update.</p>
        <ColorPalette colors={colorPaletteData} />
      </Card>

      <Card className="mb-6 p-6">
        <h2 className="text-xl font-bold mb-2">Core Theme Variables</h2>
        <p className="mb-4">To create a theme, copy an existing block in `src/index.css` and customize the variable values.</p>
        <Alert variant="info" title="Color Format" className="mb-4">
          All color variables must be defined as three space-separated R G B values (e.g., `255 255 255`) for Tailwind's opacity modifiers to work.
        </Alert>
        <CodeBlock language="css" code={themeCssVariables.trim()} />
      </Card>
    </div>
  );
};

export default ThemingSection;
</file>

<file path="template/src/features/styleguide/sections/utilities/UtilitiesSection.tsx">
// src/pages/styleguide/sections/utilities/UtilitiesSection.tsx
import React from 'react';
import { Card, SectionHeader } from '@ramme-io/ui';

// A small component to render the visual items inside our flex examples
const FlexItem: React.FC<{ className?: string }> = ({ className }) => (
  <div className={`h-8 w-8 rounded-md bg-primary flex-shrink-0 ${className}`} />
);


// Updated component to accept an optional description and a more flexible example
const UtilityClassReference: React.FC<{
  title: string;
  classes: {
    name: string;
    description: string;
    exampleClass?: string;
    exampleNode?: React.ReactNode; // Allow passing a custom node for the example
  }[];
  sectionDescription?: React.ReactNode;
}> = ({ title, classes, sectionDescription }) => (
  <Card className="mb-8 p-6">
    <h3 className="text-2xl font-semibold mb-2 text-text">{title}</h3>
    {/* Render the description if it exists */}
    {sectionDescription && <div className="mb-4 text-text-light">{sectionDescription}</div>}
    <div className="overflow-x-auto">
      <table className="w-full text-left border-collapse">
        <thead>
          <tr>
            <th className="p-2 border-b-2 border-border text-text w-1/4">Class Name</th>
            <th className="p-2 border-b-2 border-border text-text w-1/2">Description</th>
            <th className="p-2 border-b-2 border-border text-text w-1/4">Example</th>
          </tr>
        </thead>
        <tbody>
          {classes.map((item, index) => (
            <tr key={index} className="hover:bg-primary/5">
              <td className="p-2 border-b border-border text-text-light font-mono">{item.name}</td>
              <td className="p-2 border-b border-border text-text-light">{item.description}</td>
              <td className="p-2 border-b border-border">
                {/* Render the custom node if it exists, otherwise fall back to the simple class example */}
                {item.exampleNode ? item.exampleNode : (
                  <div className={`flex items-center justify-center p-2 rounded ${item.exampleClass}`}>
                    <span className={`text-sm ${item.exampleClass?.includes('text-') ? '' : 'text-text'}`}>{item.name}</span>
                  </div>
                )}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  </Card>
);

const UtilitiesSection: React.FC = () => {
  const spacingClasses = [
    { name: 'p-4', description: 'Sets 1rem (16px) of padding on all sides.', exampleClass: 'bg-primary/10' },
    { name: 'pt-6', description: 'Sets 1.5rem of padding on the top.', exampleClass: 'bg-primary/10' },
    { name: 'px-8', description: 'Sets 2rem of padding on the left and right (x-axis).', exampleClass: 'bg-primary/10' },
    { name: 'm-2', description: 'Sets 0.5rem of margin on all sides.', exampleClass: 'bg-accent/20' },
    { name: 'mx-auto', description: 'Sets auto margin on the left and right, often for centering.', exampleClass: 'bg-accent/20 w-1/2' },
  ];

  const flexboxClasses = [
    { name: 'justify-start', description: 'Aligns items to the start of the main axis.', exampleNode: <div className="flex justify-start border border-border rounded-md p-2 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'justify-center', description: 'Aligns items to the center of the main axis.', exampleNode: <div className="flex justify-center border border-border rounded-md p-2 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'justify-end', description: 'Aligns items to the end of the main axis.', exampleNode: <div className="flex justify-end border border-border rounded-md p-2 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'justify-between', description: 'Distributes items evenly with space between them.', exampleNode: <div className="flex justify-between border border-border rounded-md p-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'items-start', description: 'Aligns items to the start of the cross-axis.', exampleNode: <div className="flex items-start border border-border rounded-md p-2 h-20 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'items-center', description: 'Aligns items to the center of the cross-axis.', exampleNode: <div className="flex items-center border border-border rounded-md p-2 h-20 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'gap-4', description: 'Sets a 1rem gap between flex items.', exampleNode: <div className="flex justify-start border border-border rounded-md p-2 gap-4"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
  ];

  const typographyClasses = [
    { name: 'text-lg', description: 'Sets a large font size.', exampleClass: 'text-lg' },
    { name: 'font-bold', description: 'Applies a bold font weight.', exampleClass: 'font-bold' },
    { name: 'text-center', description: 'Centers the text.', exampleClass: 'text-center' },
    { name: 'text-primary', description: 'Applies the primary theme color to the text.', exampleClass: 'text-primary font-semibold' },
    { name: 'italic', description: 'Makes the text italic.', exampleClass: 'italic' },
    { name: 'truncate', description: 'Truncates overflowing text with an ellipsis.', exampleClass: 'truncate w-24' },
  ];

  const borderClasses = [
    { name: 'rounded-lg', description: 'Applies a large border radius.', exampleClass: 'border-2 border-accent h-10' },
    { name: 'border-2', description: 'Sets a 2px border width.', exampleClass: 'border-2 border-primary h-10' },
    { name: 'border-dashed', description: 'Sets the border style to dashed.', exampleClass: 'border-2 border-dashed border-secondary h-10' },
    { name: 'divide-y', description: 'Adds a border between vertical items.', exampleClass: '' },
  ];

  const shadowClasses = [
    { name: 'shadow-sm', description: 'Applies a small box shadow.', exampleClass: 'shadow-sm border border-border' },
    { name: 'shadow-lg', description: 'Applies a large box shadow.', exampleClass: 'shadow-lg border border-border' },
    { name: 'shadow-inner', description: 'Applies an inner shadow.', exampleClass: 'shadow-inner border border-border' },
  ];

  return (
    <div className="space-y-8">
      <SectionHeader title="Tailwind CSS Utility Classes" />
      <p className="text-text-light -mt-6 mb-8">
        A quick reference for some of the most common utility classes available in Tailwind. For a full list, always refer to the official Tailwind CSS documentation.
      </p>

      <div id="utilities-spacing" className=" scroll-mt-20">
        <UtilityClassReference
        title="Spacing (Padding & Margin)"
        classes={spacingClasses}
        sectionDescription={ <p>Tailwind's spacing scale is based on a <code className="bg-primary/10 text-primary px-1 rounded">0.25rem</code> unit, where <code className="bg-primary/10 text-primary px-1 rounded">1rem = 16px</code> by default. The number in the class name is a multiplier. For example, <code className="bg-primary/10 text-primary px-1 rounded">p-4</code> equals <code className="bg-primary/10 text-primary px-1 rounded">4 * 0.25rem = 1rem (16px)</code>.</p> }
      />
      </div>


      <div id="utilities-flexbox" className=" scroll-mt-20">
        <UtilityClassReference
        title="Flexbox"
        classes={flexboxClasses}
        sectionDescription={ <p>Flexbox is a layout model for arranging items in a single dimension‚Äîeither a row or a column. Use <code className="bg-primary/10 text-primary px-1 rounded">justify-*</code> to control spacing along the main axis and <code className="bg-primary/10 text-primary px-1 rounded">items-*</code> for alignment on the cross axis.</p> }
      />
      </div>

      {/* Moved Layout Utilities Section */}
      <Card id="utilities-layout" className="p-6 mb-8 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-2 text-text">Layout (Display, Sizing, Position)</h3>
        <p className="text-text-light mb-6">
          Use these utility classes to control the display, sizing, and positioning of elements. These are fundamental for building any UI structure.
        </p>
        <div className="space-y-8">
          <div>
            <h4 className="text-lg font-semibold mb-2 text-text">Display</h4>
            <div className="space-y-4">
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">display: block</code> (takes up the full width available)</p><div className="bg-secondary/20 p-2 rounded-md"><div className="block bg-secondary text-white p-2 rounded">.block</div><div className="block bg-secondary text-white p-2 rounded mt-1">.block</div></div></div>
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">display: inline-block</code> (flows with text, respects width/height)</p><div className="bg-secondary/20 p-2 rounded-md"><div className="inline-block bg-secondary text-white p-2 rounded">.inline-block</div><div className="inline-block bg-secondary text-white p-2 rounded ml-1">.inline-block</div></div></div>
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">display: grid</code> (for two-dimensional layouts)</p><div className="grid grid-cols-3 gap-2 bg-secondary/20 p-2 rounded-md"><div className="bg-secondary text-white p-2 rounded text-center">1</div><div className="bg-secondary text-white p-2 rounded text-center">2</div><div className="bg-secondary text-white p-2 rounded text-center">3</div></div></div>
            </div>
          </div>
          <div>
            <h4 className="text-lg font-semibold mt-6 mb-2 text-text">Sizing</h4>
            <div className="space-y-4">
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">w-1/2</code> (50% width)</p><div className="bg-accent/20 p-2 rounded-md"><div className="w-1/2 bg-accent text-white p-2 rounded">.w-1/2</div></div></div>
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">w-full</code> (100% width)</p><div className="bg-accent/20 p-2 rounded-md"><div className="w-full bg-accent text-white p-2 rounded">.w-full</div></div></div>
            </div>
          </div>
          <div>
            <h4 className="text-lg font-semibold mt-6 mb-2 text-text">Positioning</h4>
            <p className="text-text-light mb-2">Positioning utilities require a parent with a set position (like <code className="bg-primary/10 text-primary px-1 rounded">relative</code>) for <code className="bg-primary/10 text-primary px-1 rounded">absolute</code> children to be placed correctly.</p>
            <div className="relative bg-red-600/10 p-4 rounded-md h-24"><p className="text-text-light">Parent (.relative)</p><div className="absolute top-2 right-2 bg-red-600 text-white p-2 rounded text-sm">.absolute .top-2 .right-2</div></div>
          </div>
        </div>
      </Card>

      <div id="utilities-typography" className="scroll-mt-20">
        <UtilityClassReference title="Typography" classes={typographyClasses} />
        </div>
      <div id="utilities-borders" className="scroll-mt-20">
        <UtilityClassReference title="Borders & Rounded Corners" classes={borderClasses} />
        </div>
      <div id="utilities-shadows" className="scroll-mt-20">
        <UtilityClassReference title="Shadows" classes={shadowClasses} />
        </div>
    </div>
  );
};

export default UtilitiesSection;
</file>

<file path="template/src/features/styleguide/Styleguide.tsx">
import React, { useMemo } from 'react';
import { Outlet, useLocation, useNavigate } from 'react-router-dom';
import { Sidebar, type SidebarItem, type IconName, Icon } from '@ramme-io/ui';
import { useSitemap } from '../../engine/runtime/SitemapContext';

const Styleguide: React.FC = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const sitemap = useSitemap();

  // 1. Get Styleguide Section Data
  const styleguideSection = useMemo(() => {
    return sitemap.find(item => item.id === 'styleguide');
  }, [sitemap]);

  // 2. Transform to Sidebar Items
const navItems = useMemo<SidebarItem[]>(() => {
    if (!styleguideSection?.children) return [];

    // ‚úÖ FIX: Remove the explicit ": { ... }" type. Let TS infer 'child' automatically.
    return styleguideSection.children.map((child) => ({
      id: child.id,
      label: child.title,
      // We cast to IconName because we know the string is a valid icon, 
      // and we provide a fallback 'hash' if it's undefined.
      icon: (child.icon as IconName) || 'hash', 
      href: child.path ? `/docs/styleguide/${child.path}` : '/docs/styleguide',
    }));
  }, [styleguideSection]);

  // 3. Determine Active Item
  const activeItemId = useMemo(() => {
    const active = navItems.find(item => 
      location.pathname === item.href || 
      (item.href && location.pathname.startsWith(item.href))
    );
    return active?.id;
  }, [location.pathname, navItems]);

  if (!location.pathname.startsWith('/docs') || !styleguideSection) {
    return <Outlet />;
  }

  return (
    <div className="flex w-full min-h-[calc(100vh-7rem)]">
      {/* SIDEBAR */}
      <div className="sticky top-[7rem] h-[calc(100vh-7rem)] z-20">
        <Sidebar
          className="h-full border-r border-border bg-card/50 backdrop-blur-sm"
          items={navItems}
          activeItemId={activeItemId}
          onNavigate={(item) => {
            if (item.href) navigate(item.href);
          }}
          logo={
            <div className="flex items-center gap-2 px-1 py-2 text-muted-foreground">
              <Icon name="book-open" className="h-4 w-4" />
              <span className="font-semibold text-xs uppercase tracking-wider">Reference</span>
            </div>
          }
        />
      </div>

      {/* MAIN CONTENT */}
      <main className="flex-1 min-w-0 bg-background overflow-x-hidden">
        {/* ADDED: Max width constraint + centering */}
        <div className="container max-w-7xl mx-auto p-6 md:p-10 animate-in fade-in duration-500">
          <Outlet />
        </div>
      </main>
    </div>
  );
};

export default Styleguide;
</file>

<file path="template/src/features/users/api/user.service.ts">
import type { User } from './user.types';

const STORAGE_KEY = 'ramme_users';

// Seed data to ensure the app isn't empty on first load
const seedData: User[] = [
  { id: '1', name: 'Admin User', email: 'admin@ramme.io', role: 'admin', status: 'active', lastLogin: new Date().toISOString() },
  { id: '2', name: 'John Doe', email: 'john@example.com', role: 'user', status: 'active', lastLogin: '2023-12-25T10:00:00Z' },
];

export const userService = {
  // Get all users
  getAll: (): User[] => {
    const data = localStorage.getItem(STORAGE_KEY);
    if (!data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(seedData));
      return seedData;
    }
    return JSON.parse(data);
  },

  // Add a new user
  add: (user: Omit<User, 'id' | 'lastLogin'>) => {
    const users = userService.getAll();
    const newUser: User = {
      id: crypto.randomUUID(), // Native browser UUID
      lastLogin: new Date().toISOString(),
      ...user
    };
    users.push(newUser);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
    return newUser;
  },

  // Update a user
  update: (id: string, updates: Partial<User>) => {
    const users = userService.getAll();
    const index = users.findIndex(u => u.id === id);
    if (index !== -1) {
      users[index] = { ...users[index], ...updates };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
    }
  },

  // Delete a user
  delete: (id: string) => {
    const users = userService.getAll().filter(u => u.id !== id);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
  }
};
</file>

<file path="template/src/features/users/api/user.types.ts">
// src/features/users/api/user.types.ts

export type UserRole = 'admin' | 'editor' | 'user';
export type UserStatus = 'active' | 'inactive';

export interface User {
  id: string;
  name: string;
  email: string;
  role: UserRole;
  status: UserStatus;
  lastLogin?: string; // Optional because new users might not have logged in yet
}
</file>

<file path="template/src/features/users/components/UserDrawer.tsx">
import React, { useEffect, useState } from 'react';
import { Drawer, Button, Input, Select, type SelectOption } from '@ramme-io/ui';
import type { User } from '../../../data/mockData';

interface UserDrawerProps {
  isOpen: boolean;
  onClose: () => void;
  user: User | null;
  onSave: (id: string, data: Partial<User>) => void;
}

const UserDrawer: React.FC<UserDrawerProps> = ({ isOpen, onClose, user, onSave }) => {
  const [formData, setFormData] = useState<Partial<User>>({
    name: '',
    email: '',
    role: 'viewer',
    status: 'active',
  });

  useEffect(() => {
    if (user) {
      setFormData(user);
    } else {
      setFormData({
        name: '',
        email: '',
        role: 'viewer',
        status: 'active',
      });
    }
  }, [user, isOpen]);

  // Options Configurations
  const roleOptions: SelectOption[] = [
    { value: 'admin', label: 'Admin' },
    { value: 'editor', label: 'Editor' },
    { value: 'viewer', label: 'Viewer' },
  ];

  const statusOptions: SelectOption[] = [
    { value: 'active', label: 'Active' },
    { value: 'pending', label: 'Pending' },
    { value: 'banned', label: 'Banned' },
  ];

  // ‚úÖ HELPER: Find the full object based on the string value
  // This satisfies the TypeScript requirement: value={SelectOption}
  const getOption = (options: SelectOption[], value: string | undefined) => {
    return options.find((opt) => opt.value === value) || null;
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  // ‚úÖ HELPER: Handle change for both Native Events and Custom Selects
  const handleSelectChange = (name: keyof User, newValue: any) => {
    // If the component returns a SelectOption object (Custom Select)
    if (newValue && typeof newValue === 'object' && 'value' in newValue) {
        setFormData({ ...formData, [name]: newValue.value });
    } 
    // If the component returns a standard Event (Native Select)
    else if (newValue?.target) {
        setFormData({ ...formData, [name]: newValue.target.value });
    }
    // Fallback
    else {
        setFormData({ ...formData, [name]: newValue });
    }
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const idToSave = user?.id || '';
    onSave(idToSave, formData);
  };

  return (
    <Drawer
      isOpen={isOpen}
      onClose={onClose}
      title={user ? 'Edit User' : 'Add New User'}
      size="md"
    >
      <form onSubmit={handleSubmit} className="flex flex-col h-full">
        <div className="flex-1 space-y-6 p-1">
          <Input
            label="Full Name"
            name="name"
            placeholder="Jane Doe"
            value={formData.name || ''}
            onChange={handleChange}
            required
          />

          <Input
            label="Email Address"
            name="email"
            type="email"
            placeholder="jane@example.com"
            value={formData.email || ''}
            onChange={handleChange}
            required
          />

          <Select
            label="Role"
            options={roleOptions}
            // ‚úÖ FIX: Pass the object, not the string
            value={getOption(roleOptions, formData.role)}
            // ‚úÖ FIX: Handle the update safely
            onChange={(val) => handleSelectChange('role', val)}
          />

          <Select
            label="Status"
            options={statusOptions}
            // ‚úÖ FIX: Pass the object, not the string
            value={getOption(statusOptions, formData.status)}
            // ‚úÖ FIX: Handle the update safely
            onChange={(val) => handleSelectChange('status', val)}
          />
        </div>

        <div className="flex justify-end gap-3 mt-8 pt-4 border-t border-border">
          <Button variant="ghost" onClick={onClose} type="button">
            Cancel
          </Button>
          <Button variant="primary" type="submit">
            {user ? 'Save Changes' : 'Create User'}
          </Button>
        </div>
      </form>
    </Drawer>
  );
};

export default UserDrawer;
</file>

<file path="template/src/features/users/pages/UsersPage.tsx">
import React, { useState, useMemo } from 'react';
import {
  PageHeader,
  DataTable,
  Button,
  useToast,
  Badge,
  Input,
  type ColDef,
  type ICellRendererParams,
} from '@ramme-io/ui';

// 1. REMOVE: userService and old User types
// import { userService } from '../api/user.service';
// import type { User } from '../api/user.types';

// 2. ADD: The Engine Hook & Shared Data
import { useCrudLocalStorage } from '../../../engine/runtime/useCrudLocalStorage';
import { SEED_USERS, type User } from '../../../data/mockData';

import UserDrawer from '../components/UserDrawer';

const UsersPage: React.FC = () => {
  const { addToast } = useToast();
  
  // 3. REPLACE: Manual state fetching with the Reactive Engine
  // This automatically loads 'ramme_db_users' and keeps it in sync.
  const { 
    data: users, 
    createItem, 
    updateItem, 
    deleteItem 
  } = useCrudLocalStorage<User>('ramme_db_users', SEED_USERS);

  const [isDrawerOpen, setIsDrawerOpen] = useState(false);
  const [editingUser, setEditingUser] = useState<User | null>(null);
  const [searchTerm, setSearchTerm] = useState('');

  // (Removed refreshData & useEffect - the hook handles this automatically)

  const handleOpenDrawer = (user: User | null = null) => {
    setEditingUser(user);
    setIsDrawerOpen(true);
  };

  const handleDelete = (user: User) => {
    if (confirm(`Delete ${user.name}?`)) {
      deleteItem(user.id);
      addToast('User deleted', 'success');
    }
  };

  const handleSave = (_id: string, data: Partial<User>) => {
    try {
      if (editingUser) {
        // Update existing user
        updateItem({ ...editingUser, ...data } as User);
        addToast('User updated', 'success');
      } else {
        // Create new user (Engine handles ID generation)
        createItem({
          ...data,
          role: data.role || 'viewer', // Ensure defaults
          status: data.status || 'active',
          joinedAt: new Date().toISOString()
        } as User);
        addToast('User created', 'success');
      }
      // Close drawer
      setIsDrawerOpen(false);
    } catch (error) {
      addToast('Error saving user', 'error');
    }
  };

  const columnDefs = useMemo<ColDef[]>(() => [
    { field: 'name', headerName: 'Name', flex: 1, filter: true },
    { field: 'email', headerName: 'Email', flex: 1, filter: true },
    { 
      field: 'role', 
      headerName: 'Role', 
      width: 120,
      cellRenderer: (params: any) => (
        <Badge variant={params.value === 'admin' ? 'primary' : 'secondary'}>
          {params.value}
        </Badge>
      )
    },
    { 
      field: 'status', 
      width: 120,
      cellRenderer: (params: any) => (
        <Badge variant={params.value === 'active' ? 'success' : 'danger'}>
          {params.value}
        </Badge>
      )
    },
    {
      headerName: 'Actions',
      width: 120,
      pinned: 'right',
      cellRenderer: (params: ICellRendererParams) => (
        <div className="flex gap-2">
          <Button size="sm" variant="ghost" iconLeft="edit" onClick={() => handleOpenDrawer(params.data)} />
          <Button size="sm" variant="ghost" className="text-red-500 hover:text-red-600" iconLeft="trash-2" onClick={() => handleDelete(params.data)} />
        </div>
      ),
    },
  ], [deleteItem]); // Added dependency

  return (
    <div className="space-y-6 h-[calc(100vh-140px)] flex flex-col">
      <PageHeader
        title="User Management"
        description="Manage system access and permissions."
        actions={
          <Button variant="primary" iconLeft="plus" onClick={() => handleOpenDrawer()}>
            Add User
          </Button>
        }
      />
      
      <div className="w-full max-w-sm">
         <Input 
            placeholder="Search users..." 
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
         />
      </div>
      
      <DataTable
        rowData={users}
        columnDefs={columnDefs}
        height="100%"
        quickFilterText={searchTerm} 
        pagination
        paginationPageSize={10}
        paginationPageSizeSelector={[10, 25, 50]}
      />

      <UserDrawer 
        isOpen={isDrawerOpen} 
        onClose={() => setIsDrawerOpen(false)} 
        user={editingUser}
        onSave={handleSave}
      />
    </div>
  );
};

export default UsersPage;
</file>

<file path="template/src/features/users/index.ts">
// ‚úÖ Export Page for Routing
export { default as UsersPage } from './pages/UsersPage';

// ‚úÖ Export Service for AuthContext
export { userService } from './api/user.service';

// ‚úÖ Export Types for global use
export type { User, UserRole } from './api/user.types';
</file>

<file path="template/src/features/GenericContentPage.tsx">
import React from 'react';
import { PageHeader } from '@ramme-io/ui'; // Assuming we have this

interface GenericContentPageProps {
  pageTitle: string;
  children?: React.ReactNode; // Allow for optional custom content later
}

const GenericContentPage: React.FC<GenericContentPageProps> = ({ pageTitle, children }) => {
  return (
    <div>
      <PageHeader title={pageTitle} />
      <div className="mt-6">
        {children ? (
          children
        ) : (
          <p className="text-muted-foreground">
            This is a placeholder page for "{pageTitle}". Replace this content in{' '}
            <code>src/pages/YourSpecificPage.tsx</code>.
          </p>
        )}
      </div>
    </div>
  );
};

export default GenericContentPage;
</file>

<file path="template/public/api_mock.json">
{
  "meta": {
    "status": 200,
    "region": "us-east-1"
  },
  "data": {
    "finance": {
      "mrr": 99999.00,
      "growth": 0.12
    },
    "users": {
      "total": 1245,
      "active": 890
    }
  }
}
</file>

<file path="template/public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="template/src/components/AddItemsModal.tsx">
import React, { useMemo } from 'react';
import {
  Modal,
  Button,
  SearchInput,
  DataTable,
  Checkbox,
  type ColDef
} from '@ramme-io/ui';

// Mock data is fine as is
const mockData = [
  { id: 34561, name: 'Item Name 1', color: 'Blue' },
  { id: 76552, name: 'Item Name 2', color: 'Red' },
  { id: 54364, name: 'Item Name 3', color: 'Yellow' },
  { id: 87655, name: 'Item Name 3', color: 'Red' },
  { id: 98676, name: 'Item Name 3', color: 'Yellow' },
];

interface AddItemsModalProps {
  isOpen: boolean;
  onClose: () => void;
}

export const AddItemsModal: React.FC<AddItemsModalProps> = ({
  isOpen,
  onClose,
}) => {
  const [selectedCount, setSelectedCount] = React.useState(0);

  // --- FIX: Use AG Grid's column definition format ---
  const columnDefs = useMemo<ColDef[]>(() => [
    {
      headerName: 'Name',
      field: 'name', // Use 'field' instead of 'accessor'
      // AG Grid uses cellRenderer for custom components
      cellRenderer: (params: any) => (
        <div className="flex items-center">
          {params.value}
        </div>
      ),
      // Add a custom header component for the "select all" checkbox
      headerCheckboxSelection: true,
      checkboxSelection: true,
    },
    {
      headerName: 'ID', // Use 'headerName' instead of 'Header'
      field: 'id',
    },
    {
      headerName: 'Color',
      field: 'color',
    },
  ], []);

  const modalFooter = (
    <div className="flex items-center justify-between w-full">
      <div className="font-bold">{`(${selectedCount}) Selected`}</div>
      <div className="flex gap-2">
        <Button variant="secondary" onClick={onClose}>
          Cancel
        </Button>
        <Button variant="primary">Add Items</Button>
      </div>
    </div>
  );

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      title="Add Items"
      footer={modalFooter}
    >
      <div className="space-y-4">
        <h3 className="text-lg font-semibold">Select Item(s)</h3>
        <SearchInput placeholder="Search by name" />
        <DataTable
          // --- FIX: Use the correct prop names ---
          columnDefs={columnDefs}
          rowData={mockData}
          rowSelection="multiple" // Enable row selection
          onSelectionChanged={(event) => {
            setSelectedCount(event.api.getSelectedRows().length);
          }}
        />
      </div>
    </Modal>
  );
};
</file>

<file path="template/src/components/AIChatWidget.tsx">
import React, { useState } from 'react';
import { 
  Card, 
  Conversation, 
  Message, 
  PromptInput, 
  Button,
  Icon,
} from '@ramme-io/ui';
import { useMockChat } from '../features/assistant/useMockChat';

interface AIChatWidgetProps {
  onClose: () => void;
}

export const AIChatWidget: React.FC<AIChatWidgetProps> = ({ onClose }) => {
  // 1. Use the shared "Brain"
  const { messages, isLoading, sendMessage } = useMockChat();
  const [input, setInput] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    sendMessage(input);
    setInput('');
  };

  return (
    <Card className="fixed bottom-24 right-6 w-96 h-[500px] shadow-2xl flex flex-col z-50 animate-in slide-in-from-bottom-5 border-border">
      
      {/* Header */}
      <div className="p-4 border-b flex justify-between items-center bg-muted/50 rounded-t-lg">
        <div className="flex items-center gap-2">
          <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse" />
          <span className="font-semibold text-sm">AI Chat</span>
        </div>
        <Button variant="ghost" size="icon" onClick={onClose} className="h-6 w-6">
          <Icon name="x" size={16} />
        </Button>
      </div>

      {/* Chat History Area */}
      <div className="flex-1 overflow-hidden p-0 bg-background">
        <Conversation>
          {messages.map((msg) => (
            <Message
              key={msg.id}
              author={msg.author}
              content={msg.content}
              isUser={msg.isUser}
              suggestions={msg.suggestions}
              onSuggestionClick={(s) => sendMessage(s)}
            />
          ))}
          {isLoading && <Message author="Bodewell AI" isUser={false} loading />}
        </Conversation>
      </div>

      {/* Input Footer */}
      <div className="p-4 border-t bg-card">
        <PromptInput
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onSubmit={handleSubmit}
          placeholder="Ask to adjust temperature..."
        />
      </div>
    </Card>
  );
};
</file>

<file path="template/src/components/AppFooter.tsx">
// src/components/AppFooter.tsx
import React from 'react';

const AppFooter: React.FC = () => {
  return (
    <footer className="py-6 text-center text-muted-foreground">
      <p>&copy; {new Date().getFullYear()} Ramme. All Rights Reserved.</p>
    </footer>
  );
};

export default AppFooter;
</file>

<file path="template/src/components/AutoForm.tsx">
import React, { useMemo } from 'react';
import { Drawer, FormTemplate, Button, type FormField } from '@ramme-io/ui';

/**
 * @file AutoForm.tsx
 * @description The "Zero-Boilerplate" Form Engine.
 * * ARCHITECTURAL ROLE:
 * This component acts as the bridge between your data schema (JSON) and the UI.
 * Instead of writing manual form code for every resource (Users, Products, Orders),
 * this component dynamically generates the correct inputs based on the field type.
 * * KEY FEATURES:
 * 1. **Smart Mapping:** Automatically converts 'boolean' -> Toggle, 'date' -> DatePicker, etc.
 * 2. **Context Aware:** Auto-detects "Create" vs "Edit" mode based on `initialData`.
 * 3. **Safety Logic:** Automatically hides primary keys during creation and locks them during editing.
 */

interface AutoFormProps {
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (data: any) => void;
  title: string;
  fields: any[]; // The raw metadata from app.manifest.ts
  initialData?: any;
}

export const AutoForm: React.FC<AutoFormProps> = ({
  isOpen,
  onClose,
  onSubmit,
  title,
  fields,
  initialData
}) => {
  
  // 1. Safe Data Handling
  const safeData = initialData || {};
  const isEditMode = !!safeData.id;

  // 2. Schema-to-UI Mapping Engine
  const formFields = useMemo<FormField[]>(() => {
    return fields
      // üõë RULE 1: Hide ID field during creation (System handles it)
      .filter((f: any) => !(f.key === 'id' && !isEditMode))
      .map((f: any) => {
      
      const isIdField = f.key === 'id';

      // Base Configuration for all fields
      const baseConfig = {
        name: f.key,
        label: f.label,
        required: f.required,
        placeholder: f.description || `Enter ${f.label.toLowerCase()}`,
        // Pre-fill data if editing, or use default from schema
        value: safeData[f.key] !== undefined ? safeData[f.key] : (f.defaultValue || ''),
        colSpan: 1,
        // üõë RULE 2: If it's the ID field, force it to be disabled (View Only)
        disabled: isIdField
      };

      // Intelligent Type Switching
      switch (f.type) {
        case 'number':
        case 'integer':
        case 'currency':
          return { 
            ...baseConfig, 
            type: 'number',
            value: Number(baseConfig.value) || 0 
          };

        case 'boolean':
          return { 
            ...baseConfig, 
            type: 'toggle', 
            checked: !!baseConfig.value 
          };

        case 'date':
          return { 
            ...baseConfig, 
            type: 'datepicker', 
            value: baseConfig.value ? new Date(baseConfig.value) : null 
          };

        case 'status':
          return { 
            ...baseConfig, 
            type: 'select', 
            options: [
              { value: 'Active', label: 'Active' },
              { value: 'Pending', label: 'Pending' },
              { value: 'Inactive', label: 'Inactive' },
              { value: 'Archived', label: 'Archived' }
            ]
          };

        case 'textarea':
          return { 
            ...baseConfig, 
            type: 'textarea', 
            colSpan: 2 
          };

        case 'email':
          return { ...baseConfig, type: 'email' };

        default:
          return { ...baseConfig, type: 'text' };
      }
    });
  }, [fields, safeData, isEditMode]);

  return (
    <Drawer
      isOpen={isOpen}
      onClose={onClose}
      title={`${isEditMode ? 'Edit' : 'New'} ${title}`}
      size="500px"
    >
      <div className="p-6">
        <FormTemplate 
          fields={formFields} 
          onSubmit={(formData) => {
            // Merge original ID to ensure we update the correct record
            onSubmit({ ...safeData, ...formData }); 
          }} 
        >
            <div className="flex justify-end gap-2 mt-8 pt-4 border-t border-border">
                <Button variant="outline" onClick={onClose} type="button">
                  Cancel
                </Button>
                <Button type="submit" variant="primary">
                  {isEditMode ? 'Save Changes' : 'Create Record'}
                </Button>
            </div>
        </FormTemplate>
      </div>
    </Drawer>
  );
};
</file>

<file path="template/src/components/HashLinkScroll.tsx">
import { useEffect } from 'react';
import { useLocation } from 'react-router-dom';

/**
 * A component that listens for hash changes in the URL and smoothly
 * scrolls the corresponding element into view.
 */
const HashLinkScroll = () => {
  const { hash } = useLocation();

  useEffect(() => {
    if (hash) {
      // We need to remove the '#' from the hash string
      const id = hash.substring(1);
      const element = document.getElementById(id);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
      }
    }
  }, [hash]); // Re-run this effect whenever the hash changes

  // This component does not render any UI
  return null;
};

export default HashLinkScroll;
</file>

<file path="template/src/components/PageTitleUpdater.tsx">
/**
 * @file PageTitleUpdater.tsx
 * @repository ramme-app-starter
 * @description Updates the browser tab title based on the current route
 * by looking up the title in the active sitemap.
 */
import React, { useEffect } from 'react';
import { useLocation } from 'react-router-dom';
import { useSitemap } from '../engine/runtime/SitemapContext'; // Import our context hook
import type { SitemapEntry } from '../engine/types/sitemap-entry';

// Helper function to recursively find a route by path
const findRouteByPath = (
  sitemap: SitemapEntry[],
  pathname: string,
  basePath: string = '',
): SitemapEntry | null => {
  for (const entry of sitemap) {
    // Construct the full path for the current entry
    const fullPath = `${basePath}/${entry.path}`.replace(/\/+/g, '/'); // Normalize slashes

    if (pathname === fullPath) {
      return entry;
    }

    if (entry.children) {
      const foundInChildren = findRouteByPath(
        entry.children,
        pathname,
        fullPath,
      );
      if (foundInChildren) {
        return foundInChildren;
      }
    }
  }
  return null;
};

const PageTitleUpdater: React.FC = () => {
  const location = useLocation();
  const sitemap = useSitemap(); // Get the sitemap from the current layout's context

  useEffect(() => {
    // Determine the base path prefix based on the current top-level route
    let baseRoutePrefix = '';
    if (location.pathname.startsWith('/dashboard')) {
      baseRoutePrefix = '/dashboard';
    } else if (location.pathname.startsWith('/docs')) {
      baseRoutePrefix = '/docs';
    } else if (location.pathname.startsWith('/settings')) {
      baseRoutePrefix = '/settings';
    }

    const currentRoute = findRouteByPath(sitemap, location.pathname, baseRoutePrefix);

    if (currentRoute) {
      document.title = `Ramme - ${currentRoute.title}`;
    } else {
      // Fallback title if no route is matched (e.g., for 404 or base layout path)
      document.title = 'Ramme - App Starter';
    }
    // Rerun effect whenever the pathname or the sitemap context changes
  }, [location.pathname, sitemap]);

  return null; // This component doesn't render anything itself
};

export default PageTitleUpdater;
</file>

<file path="template/src/components/ProtectedRoute.tsx">
import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';
import { useAuth } from '../features/auth/AuthContext';
import { Icon } from '@ramme-io/ui';

/**
 * @file ProtectedRoute.tsx
 * @description The "Security Gatekeeper" for the application.
 *
 * ARCHITECTURAL ROLE:
 * This component wraps all private routes (Dashboard, Settings, Docs) in `App.tsx`.
 * It acts as a middleware that checks the user's authentication status before
 * allowing access to the child components (Outlet).
 *
 * KEY FEATURES:
 * 1. **Auth Verification:** Automatically redirects unauthenticated users to `/login`.
 * 2. **Loading State:** Displays a spinner while the Auth Provider is initializing,
 * preventing "flash of login screen" bugs.
 * 3. **History Management:** Uses `replace` on redirect to ensure the browser
 * back button works correctly (skips the restricted page).
 */

const ProtectedRoute: React.FC = () => {
  const { user, isLoading } = useAuth();

  if (isLoading) {
    // You can replace this with a proper loading spinner component
    return (
      <div className="flex h-screen w-full items-center justify-center">
        <Icon name="loader-circle" className="animate-spin h-12 w-12 text-primary" />
      </div>
    );
  }

  if (!user) {
    return <Navigate to="/login" replace />;
  }

  return <Outlet />;
};

export default ProtectedRoute;
</file>

<file path="template/src/components/TemplateSwitcher.tsx">
/**
 * @file TemplateSwitcher.tsx
 * @repository ramme-app-starter
 * @description A reusable component to switch between application templates.
 */
import React from 'react';
import { Link, useLocation } from 'react-router-dom';

const TemplateSwitcher: React.FC = () => {
  const location = useLocation();
  const isDashboard = location.pathname.startsWith('/dashboard');
  const isDocs = location.pathname.startsWith('/docs');
  const isSettings = location.pathname.startsWith('/settings');

  return (
    <div className="bg-muted text-muted-foreground p-1 rounded-md text-sm flex items-center gap-1">
      <Link
        to="/dashboard"
        className={`px-3 py-1 rounded ${
          isDashboard
            ? 'bg-background shadow-sm text-foreground font-semibold'
            : ''
        }`}
      >
        Dashboard
      </Link>
      <Link
        to="/docs"
        className={`px-3 py-1 rounded ${
          isDocs ? 'bg-background shadow-sm text-foreground font-semibold' : ''
        }`}
      >
        Docs
      </Link>
      <Link
        to="/settings"
        className={`px-3 py-1 rounded ${
          isSettings
            ? 'bg-background shadow-sm text-foreground font-semibold'
            : ''
        }`}
      >
        Settings
      </Link>
    </div>
  );
};

export default TemplateSwitcher;
</file>

<file path="template/src/config/navigation.ts">
/**
 * @file navigation.ts
 * @repository ramme-app-starter
 * @description
 * This is the central manifest for all GLOBAL, shared navigation elements.
 * Corrected paths to point within the /settings layout.
 */
import type { ManifestLink } from '../engine/types/manifest-types';

interface AppManifest {
  userMenu: ManifestLink[];
  settingsMenu: ManifestLink[];
  footerLinks: ManifestLink[];
}

export const appManifest: AppManifest = {
  /**
   * Used for the user dropdown menu in the AppHeader.
   * NOTE: Logout is handled by the onClick={logout} in AppHeader,
   * so it's removed from this manifest.
   */
  userMenu: [
    {
      id: 'user.profile',
      // --- FIX: Point to the settings layout ---
      path: '/settings/profile', // Correct path
      title: 'Your Profile',
      icon: 'user',
    },
    {
      id: 'user.settings',
      // --- FIX: Point to the settings layout base ---
      path: '/settings', // Correct path
      title: 'Settings',
      icon: 'settings',
    },
    // --- REMOVED: Logout link is redundant ---
    // {
    //   id: 'user.logout',
    //   path: '/login', // Was pointing here, but onClick is better
    //   title: 'Log Out',
    //   icon: 'logOut',
    // },
  ],

  /**
   * Used for a dedicated settings page (e.g., /settings/...)
   * These paths were already correct.
   */
  settingsMenu: [
    {
      id: 'settings.account',
      path: '/settings/profile',
      title: 'Account',
      icon: 'user',
    },
    {
      id: 'settings.billing',
      path: '/settings/billing',
      title: 'Billing',
      icon: 'creditCard',
    },
    {
      id: 'settings.team',
      path: '/settings/team',
      title: 'Team Members',
      icon: 'users',
    },
  ],

  /**
   * Used in the AppFooter. (Placeholders)
   */
  footerLinks: [
    {
      id: 'footer.help',
      path: '/help',
      title: 'Help Center',
    },
    {
      id: 'footer.terms',
      path: '/terms',
      title: 'Terms of Service',
    },
  ],
};
</file>

<file path="template/src/data/mock-charts.ts">
/**
 * @file mock-charts.ts
 * @description The "Chart Data Lake".
 *
 * ARCHITECTURAL ROLE:
 * This file stores the structured data required by Recharts components.
 * Separating this from the tabular `mockData.ts` prevents bloat and allows
 * for specific optimization of visualization data.
 */

// 1. Define a generic shape for Recharts data
// Recharts expects an array of objects: [{ name: 'A', value: 10 }, ...]
export type RechartsData = Record<string, any>[];

export const MOCK_CHART_DATA: Record<string, RechartsData> = {
  
  // ID: energy_history
  energy_history: [
    { time: "12am", value: 12 },
    { time: "4am", value: 19 },
    { time: "8am", value: 3 },
    { time: "12pm", value: 5 },
    { time: "4pm", value: 2 },
    { time: "8pm", value: 3 }
  ],

  // ID: server_load
  server_load: [
    { day: "Mon", load: 45 },
    { day: "Tue", load: 52 },
    { day: "Wed", load: 38 },
    { day: "Thu", load: 70 },
    { day: "Fri", load: 65 },
    { day: "Sat", load: 30 },
    { day: "Sun", load: 40 }
  ]
};

export const getChartData = (id: string) => {
  return MOCK_CHART_DATA[id] || [];
};
</file>

<file path="template/src/data/mockLedger.ts">
export interface LedgerEntry {
  category: 'Revenue' | 'Cost of Goods Sold' | 'Operating Expenses';
  account: string;
  actual: number;
  budget: number;
}

export const mockLedgerData: LedgerEntry[] = [
  // --- Raw Data Only ---
  { category: 'Revenue', account: 'Product Sales', actual: 125000, budget: 120000 },
  { category: 'Revenue', account: 'Service Fees', actual: 32000, budget: 35000 },
  { category: 'Cost of Goods Sold', account: 'Raw Materials', actual: -45000, budget: -42000 },
  { category: 'Cost of Goods Sold', account: 'Direct Labor', actual: -28000, budget: -30000 },
  { category: 'Operating Expenses', account: 'Marketing', actual: -12000, budget: -10000 },
  { category: 'Operating Expenses', account: 'Salaries & Wages', actual: -55000, budget: -55000 },
  { category: 'Operating Expenses', account: 'Rent & Utilities', actual: -8500, budget: -8000 },
];
</file>

<file path="template/src/templates/docs/docs.sitemap.ts">
import { type SitemapEntry } from '../../engine/types/sitemap-entry';

// --- PAGE IMPORTS ---
// ‚úÖ Corrected: Kept named import for OverviewPage based on your index.ts export
import { OverviewPage } from '../../features/overview'; 
import AiChat from '../../features/ai/pages/AiChat';

import Styleguide from '../../features/styleguide/Styleguide';

// --- SECTION IMPORTS ---
import TemplatesSection from '../../features/styleguide/sections/templates/TemplatesSection';
import LayoutSection from '../../features/styleguide/sections/layout/LayoutSection';
import ThemingSection from '../../features/styleguide/sections/theming/ThemingSection';
import NavigationSection from '../../features/styleguide/sections/navigation/NavigationSection';
import TablesSection from '../../features/styleguide/sections/tables/TablesSection';
import ChartsSection from '../../features/styleguide/sections/charts/ChartsSection';
import ElementsSection from '../../features/styleguide/sections/elements/ElementsSection';
import FormsSection from '../../features/styleguide/sections/forms/FormsSection';
import FeedbackSection from '../../features/styleguide/sections/feedback/FeedbackSection';
import UtilitiesSection from '../../features/styleguide/sections/utilities/UtilitiesSection';
import ColorsSection from '../../features/styleguide/sections/colors/ColorsSection';
import IconsSection from '../../features/styleguide/sections/icons/IconsSection';

export const docsSitemap: SitemapEntry[] = [
  {
    id: 'dashboard',
    path: '', // Index route
    title: 'Dashboard',
    icon: 'home',
    component: OverviewPage,
  },
  {
    id: 'ai-chat',
    path: 'ai-chat',
    title: 'AI Chat',
    icon: 'bot',
    component: AiChat,
  },
  {
    id: 'styleguide',
    path: 'styleguide',
    title: 'Style Guide',
    icon: 'palette',
    component: Styleguide,
    children: [
        { id: 'templates', path: 'templates', title: 'Templates', component: TemplatesSection },
        { id: 'layout', path: 'layout', title: 'Layout', component: LayoutSection },
        { id: 'theming', path: 'theming', title: 'Theming', component: ThemingSection },
        { id: 'navigation', path: 'navigation', title: 'Navigation', component: NavigationSection },
        { id: 'tables', path: 'tables', title: 'Tables', component: TablesSection },
        { id: 'charts', path: 'charts', title: 'Charts', component: ChartsSection },
        { id: 'elements', path: 'elements', title: 'Elements', component: ElementsSection },
        { id: 'forms', path: 'forms', title: 'Forms', component: FormsSection },
        { id: 'feedback', path: 'feedback', title: 'Feedback', component: FeedbackSection },
        { id: 'utilities', path: 'utilities', title: 'Utilities', component: UtilitiesSection },
        { id: 'colors', path: 'colors', title: 'Colors', component: ColorsSection },
        { id: 'icons', path: 'icons', title: 'Icons', component: IconsSection },
    ],
  },
];
</file>

<file path="template/src/templates/docs/DocsLayout.tsx">
import React from 'react';
import { Outlet, NavLink } from 'react-router-dom';
import { docsSitemap } from './docs.sitemap';
import { SitemapProvider } from '../../engine/runtime/SitemapContext';
import AppHeader from '../../components/AppHeader';
import AppFooter from '../../components/AppFooter';
import { Icon } from '@ramme-io/ui';
import PageTitleUpdater from '../../components/PageTitleUpdater';

const DocsLayout: React.FC = () => {
  return (
    <div className="bg-background text-foreground min-h-screen flex flex-col font-sans">
      <AppHeader />
      
      <main className="flex-grow flex flex-col">
        {/* --- TOP NAVIGATION BAR --- */}
        <div className="bg-card border-b border-border sticky top-16 z-30 w-full">
          <nav className="w-full px-6">
            <ul className="flex items-center gap-6 h-12">
              {docsSitemap.map((item) => (
                <li key={item.id}>
                  <NavLink
                    to={item.path || ''}
                    end={!item.children || item.children.length === 0}
                    className={({ isActive }) =>
                      `flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${
                        isActive
                          ? 'bg-primary/10 text-primary'
                          : 'text-muted-foreground hover:text-foreground hover:bg-muted/50'
                      }`
                    }
                  >
                    {item.icon && <Icon name={item.icon} className="h-4 w-4" />}
                    <span>{item.title}</span>
                  </NavLink>
                </li>
              ))}
            </ul>
          </nav>
        </div>

        {/* --- MAIN CONTENT WRAPPER --- */}
        <div className="w-full flex-1 flex flex-col">
          <SitemapProvider value={docsSitemap}>
            <PageTitleUpdater />
            
            {/* Page Content */}
            <div className="flex-1">
              <Outlet />
            </div>

            {/* Footer - Now part of the content flow */}
            <div className="border-t border-border mt-auto w-full bg-background">
              <div className="max-w-7xl mx-auto px-6">
                 <AppFooter />
              </div>
            </div>
          </SitemapProvider>
        </div>
      </main>
    </div>
  );
};

export default DocsLayout;
</file>

<file path="template/src/templates/settings/settings.sitemap.ts">
/**
 * @file settings.sitemap.ts
 * @repository ramme-app-starter
 * @description
 * Defines the Information Architecture (IA) for the "Settings" layout.
 * Imports components from the /pages/settings/ directory.
 */
import type { SitemapEntry } from '../../engine/types/sitemap-entry';

// --- 1. Import from the new /pages/settings/ directory ---
import ProfilePage from '../../features/settings/pages/ProfilePage';
import BillingPage from '../../features/settings/pages/BillingPage';
import TeamPage from '../../features/settings/pages/TeamPage';

// --- 2. Export with the correct name ---
export const settingsSitemap: SitemapEntry[] = [
  {
    id: 'profile',
    path: 'profile',
    title: 'My Profile',
    icon: 'user',
    component: ProfilePage,
  },
  {
    id: 'settings.billing',
    path: 'billing',
    title: 'Billing',
    icon: 'credit-card',
    component: BillingPage,
  },
  {
    id: 'settings.team',
    path: 'team',
    title: 'Team',
    icon: 'users',
    component: TeamPage,
  },
];
</file>

<file path="template/src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="template/src/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;


/* Add this new rule */
.sidebar-panel {
  min-width: 220px !important;
}
</file>

<file path="template/src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="template/eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { globalIgnores } from 'eslint/config'

export default tseslint.config([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="template/gitignore">
node_modules
</file>

<file path="template/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/orange.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ramme - App Starter</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="template/postcss.config.cjs">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="template/tailwind.config.cjs">
const path = require('path');

// This finds the absolute path to the @ramme-io/ui package's directory
const rammeUiPath = path.dirname(require.resolve('@ramme-io/ui/package.json'));

/** @type {import('tailwindcss').Config} */
module.exports = {
  presets: [
    // Load the preset from the absolute path we found
    require(path.join(rammeUiPath, 'tailwind.preset.js'))
  ],
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
    // Scan the library's files for classes using the absolute path
    path.join(rammeUiPath, 'dist/**/*.js'),
  ],
}
</file>

<file path="template/tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="template/tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="template/tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["../vite.config.ts"]
}
</file>

<file path="template/vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      
      // ‚úÖ FIX: Go up 2 levels to find the sibling 'ramme-ui' folder
      '@ramme-io/ui': path.resolve(__dirname, '../../ramme-ui/src'),
    },
  },
  // ‚úÖ CRITICAL: Allow Vite to serve files outside the current project folder
  server: {
    fs: {
      allow: [
        // Allow serving files from the project root
        '.',
        // Allow serving files from the sibling UI library
        '../../ramme-ui', 
      ],
    },
  },
});
</file>

<file path="index.js">
#!/usr/bin/env node
import fs from 'fs-extra';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const projectPath = process.argv[2];

if (!projectPath) {
  console.error('Error: Please specify the project directory.');
  console.log('  Usage: npm create ramme-app@latest <project-directory>');
  process.exit(1);
}

const templatePath = path.resolve(__dirname, 'template');
const destinationPath = path.resolve(process.cwd(), projectPath);

try {
  if (!fs.existsSync(templatePath)) {
    throw new Error(`Critical Error: The template directory could not be found at ${templatePath}`);
  }

  console.log(`Creating a new Ramme app in ${destinationPath}...`);
  fs.copySync(templatePath, destinationPath);

  // --- This is the new part that renames the files ---
  const pkgJsonPath = path.join(destinationPath, 'pkg.json');
  const gitignorePath = path.join(destinationPath, 'gitignore');

  if (fs.existsSync(pkgJsonPath)) {
    fs.renameSync(pkgJsonPath, path.join(destinationPath, 'package.json'));
  }
  if (fs.existsSync(gitignorePath)) {
    fs.renameSync(gitignorePath, path.join(destinationPath, '.gitignore'));
  }
  // ---------------------------------------------------

  console.log(`\nSuccess! Your new Ramme app is ready.`);
  console.log('\nTo get started:');
  console.log(`  cd ${projectPath}`);
  console.log(`  pnpm install`);
  console.log(`  pnpm run dev\n`);

} catch (err) {
  console.error('\nAn error occurred during installation:', err);
  fs.removeSync(destinationPath); // Clean up in case of failure
  process.exit(1);
}
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2025 Excesspool Limited Liability Company

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="template/src/components/AppHeader.tsx">
/**
 * @file AppHeader.tsx
 * @repository ramme-app-starter
 * @description This is the global application header.
 *
 * @developer_notes
 * STRATEGIC REFACTOR (10/21/2025):
 * 1. Updated logo to include both the `orange.png` image and "Ramme" text.
 * 2. Kept all A.D.A.P.T. manifest, asChild, and z-index fixes.
 */
import React from 'react';
import { Link } from 'react-router-dom';
import {
  Avatar,
  Menu,
  MenuItem,
  MenuDivider,
  Icon,
  useTheme,
  type ThemeName,
} from '@ramme-io/ui';
import { useAuth } from '../features/auth/AuthContext';

// --- STRATEGIC IMPORTS ---
import { appManifest } from '../config/navigation';
import type { ManifestLink } from '../engine/types/manifest-types';
import TemplateSwitcher from './TemplateSwitcher';
import rammeLogo from '../assets/orange.png'; // <-- 1. IMPORT THE LOGO

const AppHeader: React.FC = () => {
  const { theme, availableThemes, setTheme } = useTheme();
  const { user, logout } = useAuth();
  const userNavLinks = appManifest.userMenu;

  const handleResetData = () => {
    if (
      window.confirm(
        'Are you sure you want to reset all user data to the original mock data? This cannot be undone.',
      )
    ) {
      localStorage.removeItem('users');
      window.location.reload();
    }
  };

  return (
    // Z-INDEX FIX: Set to z-50 to render above the z-40 sidebar.
    <header className="flex items-center justify-between p-4 bg-card border-b border-border shadow-sm sticky top-0 z-50">
      
      {/* --- 2. UPDATED LOGO BLOCK --- */}
      {/* Logo - links to dashboard home */}
      <Link to="/dashboard" className="flex items-center gap-2">
        <img src={rammeLogo} alt="Ramme Logo" className="h-8 w-auto" />
        <h1 className="text-2xl font-bold text-text">Ramme</h1>
      </Link>

      <div className="flex items-center gap-4">
        <TemplateSwitcher />
        {user && (
          <Menu
            trigger={
              <button className="rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                <Avatar name={user.name} size="sm" />
              </button>
            }
          >
            {/* 1. User Info (Static) */}
            <div className="p-2 text-sm text-muted-foreground">
              <p className="font-semibold text-text">{user.name}</p>
              <p>{user.email}</p>
            </div>
            <MenuDivider />

            {/* 2. Designer-Controlled Nav Links */}
            {userNavLinks.map((link: ManifestLink) => (
              <MenuItem
                key={link.id}
                asChild
                icon={link.icon ? <Icon name={link.icon} /> : undefined}
              >
                <Link to={link.path}>{link.title}</Link>
              </MenuItem>
            ))}
            <MenuDivider />

            {/* 3. App-Specific: Theme Switcher */}
            <div className="p-2 text-sm text-muted-foreground">
              <p>
                Active Theme:{' '}
                <span className="font-semibold text-text">{theme}</span>
              </p>
            </div>
            {availableThemes.map((themeName: string) => (
              <MenuItem
                key={themeName}
                onClick={() => setTheme(themeName as ThemeName)}
              >
                {themeName.charAt(0).toUpperCase() + themeName.slice(1)}
              </MenuItem>
            ))}
            <MenuDivider />

            {/* 4. App-Specific: Actions */}
            <MenuItem onClick={handleResetData} icon={<Icon name="refresh-cw" />}>
              Reset Data
            </MenuItem>
            <MenuItem onClick={logout} icon={<Icon name="log-out" />}>
              Logout
            </MenuItem>
          </Menu>
        )}
      </div>
    </header>
  );
};

export default AppHeader;
</file>

<file path="template/src/main.tsx">
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App.tsx';
import { ThemeProvider, ToastProvider } from '@ramme-io/ui';
import { AuthProvider } from './features/auth/AuthContext.tsx'; 
import { MqttProvider } from './engine/runtime/MqttContext';
import "@ramme-io/ui/index.css";
import './index.css';

// This import activates all AG Grid Enterprise features
import 'ag-grid-enterprise';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <ThemeProvider>
        <ToastProvider>
          <AuthProvider>
            <MqttProvider>
              <App />
            </MqttProvider>
          </AuthProvider>
        </ToastProvider>
      </ThemeProvider>
    </BrowserRouter>
  </React.StrictMode>,
);
</file>

<file path=".gitignore">
node_modules
template/node_modules
template/dist
template/package.json
template/package-lock.json
.DS_Store
</file>

<file path="CHANGELOG.md">
# Changelog

All notable changes to this project will be documented in this file.

## [1.2.1] - 2025-12-27
### Fixed
- Minor dependency stabilization for the `useDataQuery` hook.
- Prepared internal architecture for Phase 2 (Logic Layer) integration.

## [1.2.0] - 2025-12-27
### Added
- **Runtime Logic Engine**: Introduced `useDataQuery` hook for client-side filtering, sorting, and pagination of mock data.
- **Data Persistence**: Added `useCrudLocalStorage` and `data-seeder.ts` to persist state across reloads.
- **SmartTable Component**: A data-aware wrapper for `DataTable` that auto-generates columns from metadata and handles CRUD actions.
- **AutoForm Component**: A schema-driven form builder that generates inputs based on resource definitions.
- **Ghost Mode Bridge**: Added `postMessage` support to `GhostOverlay` for bi-directional communication with the App Builder.

### Changed
- **Navigation**: Migrated to a centralized `sitemap-driven` architecture for better AI control.
- **Layouts**: Split layouts into `DashboardLayout` (Sidebar) and `DocsLayout` (Top Nav).
</file>

<file path="template/src/data/mockData.ts">
/**
 * @file src/data/mockData.ts
 * @description The "Golden Copy" of seed data. 
 * These records are injected into localStorage when the app first launches.
 */

// ‚úÖ 1. Interface for the Metadata (Schema)
export interface ResourceMeta {
  name: string;
  fields: {
    key: string;
    label: string;
    type: string;
    required?: boolean;
    defaultValue?: any;
    description?: string;
  }[];
}

// --- DATA INTERFACES ---

export interface User {
  id: string;
  name: string;
  email: string;
  role: 'admin' | 'editor' | 'viewer';
  status: 'active' | 'pending' | 'banned';
  avatar?: string;
  joinedAt: string;
}

export interface Product {
  id: string;
  name: string;
  category: string;
  price: number;
  stock: number;
  status: 'in_stock' | 'low_stock' | 'out_of_stock';
}

export interface Invoice {
  id: string;
  userId: string; // Foreign Key -> User
  amount: number;
  status: 'paid' | 'pending' | 'overdue';
  date: string;
}

export interface Review {
  id: string;
  productId: string; // Foreign Key -> Product
  rating: number;
  comment: string;
  author: string;
  date: string;
}

export interface ActivityLog {
  id: string;
  action: string;
  entity: string;
  timestamp: string;
  user: string;
}

// --- SEED DATA ---

export const SEED_USERS: User[] = [
  { id: 'usr_1', name: 'Alex Carter', email: 'alex@example.com', role: 'admin', status: 'active', joinedAt: '2023-01-15' },
  { id: 'usr_2', name: 'Sarah Jenkins', email: 'sarah@example.com', role: 'editor', status: 'active', joinedAt: '2023-03-22' },
  { id: 'usr_3', name: 'Mike Ross', email: 'mike@example.com', role: 'viewer', status: 'pending', joinedAt: '2023-05-10' },
  { id: 'usr_4', name: 'Emily Blunt', email: 'emily@example.com', role: 'editor', status: 'banned', joinedAt: '2023-06-01' },
];

export const SEED_PRODUCTS: Product[] = [
  { id: 'prod_1', name: 'ErgoChair Pro', category: 'Furniture', price: 450, stock: 12, status: 'in_stock' },
  { id: 'prod_2', name: 'Standing Desk', category: 'Furniture', price: 600, stock: 3, status: 'low_stock' },
  { id: 'prod_3', name: 'Monitor Arm', category: 'Accessories', price: 120, stock: 0, status: 'out_of_stock' },
  { id: 'prod_4', name: 'Mechanical Keyboard', category: 'Electronics', price: 180, stock: 25, status: 'in_stock' },
];

export const SEED_INVOICES: Invoice[] = [
  { id: 'inv_001', userId: 'usr_2', amount: 450.00, status: 'paid', date: '2023-10-01' },
  { id: 'inv_002', userId: 'usr_1', amount: 1200.50, status: 'pending', date: '2023-10-05' },
  { id: 'inv_003', userId: 'usr_3', amount: 180.00, status: 'overdue', date: '2023-09-15' },
  { id: 'inv_004', userId: 'usr_2', amount: 600.00, status: 'paid', date: '2023-10-10' },
];

export const SEED_REVIEWS: Review[] = [
  { id: 'rev_1', productId: 'prod_1', rating: 5, comment: 'Life changing comfort!', author: 'Alex Carter', date: '2023-09-01' },
  { id: 'rev_2', productId: 'prod_4', rating: 4, comment: 'Clicky but loud.', author: 'Mike Ross', date: '2023-09-10' },
  { id: 'rev_3', productId: 'prod_2', rating: 2, comment: 'Wobbles at max height.', author: 'Sarah Jenkins', date: '2023-09-12' },
];

export const SEED_LOGS: ActivityLog[] = [
  { id: 'log_1', action: 'User Created', entity: 'User', user: 'System', timestamp: '2023-10-01T10:00:00Z' },
  { id: 'log_2', action: 'Invoice Paid', entity: 'Invoice', user: 'Alex Carter', timestamp: '2023-10-02T14:30:00Z' },
  { id: 'log_3', action: 'Stock Updated', entity: 'Product', user: 'Sarah Jenkins', timestamp: '2023-10-03T09:15:00Z' },
];

// --- REGISTRIES ---

// 1. Data Registry (The Records)
export const DATA_REGISTRY: Record<string, any[]> = {
  users: SEED_USERS,
  products: SEED_PRODUCTS,
  invoices: SEED_INVOICES,
  reviews: SEED_REVIEWS,
  logs: SEED_LOGS,
};

// 2. Metadata Registry (The Schema/Definitions)
export const RESOURCE_METADATA: Record<string, ResourceMeta> = {
  users: {
    name: 'Users',
    fields: [
      { key: 'name', label: 'Name', type: 'text', required: true },
      { key: 'email', label: 'Email', type: 'email', required: true },
      { key: 'role', label: 'Role', type: 'status' },
      { key: 'status', label: 'Status', type: 'status' },
      { key: 'joinedAt', label: 'Joined', type: 'date' },
    ]
  },
  products: {
    name: 'Products',
    fields: [
      { key: 'name', label: 'Product Name', type: 'text', required: true },
      { key: 'category', label: 'Category', type: 'text' },
      { key: 'price', label: 'Price', type: 'currency' },
      { key: 'stock', label: 'Stock', type: 'number' },
      { key: 'status', label: 'Availability', type: 'status' },
    ]
  },
  invoices: {
    name: 'Invoices',
    fields: [
      // ‚úÖ FIX: Changed label from 'User ID' to 'User'
      { key: 'userId', label: 'User', type: 'text', required: true },
      { key: 'amount', label: 'Amount', type: 'currency' },
      { key: 'status', label: 'Status', type: 'status' },
      { key: 'date', label: 'Date', type: 'date' },
    ]
  },
  reviews: {
    name: 'Reviews',
    fields: [
      // ‚úÖ FIX: Changed label from 'Product ID' to 'Product'
      { key: 'productId', label: 'Product', type: 'text' },
      { key: 'rating', label: 'Rating', type: 'number' },
      { key: 'comment', label: 'Comment', type: 'text' },
      { key: 'author', label: 'Author', type: 'text' },
    ]
  },
  logs: {
    name: 'Activity Logs',
    fields: [
      { key: 'action', label: 'Action', type: 'text' },
      { key: 'entity', label: 'Entity', type: 'text' },
      { key: 'user', label: 'User', type: 'text' },
      { key: 'timestamp', label: 'Time', type: 'date' },
    ]
  }
};

// --- HELPERS ---

export const getMockData = (id: string) => DATA_REGISTRY[id] || [];

// ‚úÖ Updated to return ResourceMeta or null (instead of never/null)
export const getResourceMeta = (id: string): ResourceMeta | null => {
  return RESOURCE_METADATA[id] || null;
};
</file>

<file path="template/src/templates/settings/SettingsLayout.tsx">
import React, { useMemo } from 'react';
import { Outlet, useNavigate, useLocation } from 'react-router-dom';
import {
  Sidebar,
  type SidebarItem,
  type IconName,
} from '@ramme-io/ui';
import { settingsSitemap } from './settings.sitemap';
import rammeLogo from '../../assets/orange.png';
import { useAuth } from '../../features/auth/AuthContext';
import { SitemapProvider } from '../../engine/runtime/SitemapContext';
import PageTitleUpdater from '../../components/PageTitleUpdater';
import TemplateSwitcher from '../../components/TemplateSwitcher';

const SettingsLayout: React.FC = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const { user, logout } = useAuth();

  // --- Actions ---
  const handleResetData = () => {
    if (window.confirm('Are you sure you want to reset all user data? This cannot be undone.')) {
      localStorage.removeItem('users');
      window.location.reload();
    }
  };

  // --- Data Mapping ---
  // We combine the Sitemap navigation with the System Actions (Reset/Logout)
  // so they all live harmoniously in the new "Zero Jank" sidebar list.
  const sidebarItems: SidebarItem[] = useMemo(() => {
    // 1. Navigation Items
    const navItems: SidebarItem[] = settingsSitemap.map((item) => ({
      id: item.id,
      label: item.title,
      icon: (item.icon as IconName) || 'settings',
      href: item.path ? `/settings/${item.path}` : '/settings',
    }));

    // 2. System Actions (Appended to bottom)
    const actionItems: SidebarItem[] = [
      {
        id: 'action-reset',
        label: 'Reset Data',
        icon: 'refresh-cw' as IconName,
        onClick: handleResetData,
      },
      {
        id: 'action-logout',
        label: 'Logout',
        icon: 'log-out' as IconName,
        onClick: logout,
      }
    ];

    return [...navItems, ...actionItems];
  }, [logout]);

  // Determine active item (only for nav items, actions don't stay active)
  const activeItemId = useMemo(() => {
    const active = sidebarItems.find(item => 
      item.href && item.href !== '/settings' && location.pathname.startsWith(item.href)
    );
    return active?.id || (location.pathname === '/settings' ? sidebarItems[0]?.id : undefined);
  }, [location.pathname, sidebarItems]);

  return (
    <SitemapProvider value={settingsSitemap}>
      <PageTitleUpdater />
      
      <div className="flex h-screen bg-background text-foreground">
        <Sidebar
          className="relative border-border"
          items={sidebarItems}
          activeItemId={activeItemId}
          // Handle both Navigation (href) and Actions (onClick)
          onNavigate={(item) => {
            if (item.href) {
              navigate(item.href);
            }
            // item.onClick is handled automatically by the Sidebar component if present
          }}
          user={user ? {
            name: user.name,
            email: user.email,
            avatarUrl: undefined // Add avatar URL if available in user object
          } : undefined}
          logo={
            <div className="flex items-center gap-2 px-2">
              <img src={rammeLogo} alt="Ramme" className="h-7 w-auto" />
              <span className="text-xl font-bold">Ramme</span>
            </div>
          }
          // Inject the TemplateSwitcher into the footer slot (above the user profile)
          footerSlot={
            <div className="mb-2">
              <TemplateSwitcher />
            </div>
          }
        />

        <div className="flex flex-col flex-1 overflow-hidden">
          <main className="flex-1 overflow-y-auto p-8 bg-muted/20">
            <Outlet />
          </main>
        </div>
      </div>
    </SitemapProvider>
  );
};

export default SettingsLayout;
</file>

<file path="template/src/App.tsx">
import { useEffect } from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';
import { generateRoutes } from './engine/renderers/route-generator';
import { ThemeProvider } from '@ramme-io/ui';
import { AuthProvider } from './features/auth/AuthContext';
import { MqttProvider } from './engine/runtime/MqttContext';

// --- 1. IMPORT AUTH CLUSTER ---
import { AuthLayout } from './features/auth/pages/AuthLayout';
import LoginPage from './features/auth/pages/LoginPage';
import SignupPage from './features/auth/pages/SignupPage';

// --- 2. IMPORT TEMPLATES ---
import DashboardLayout from './templates/dashboard/DashboardLayout';
import { dashboardSitemap } from './templates/dashboard/dashboard.sitemap';
import DocsLayout from './templates/docs/DocsLayout';
import { docsSitemap } from './templates/docs/docs.sitemap';
import SettingsLayout from './templates/settings/SettingsLayout';
import { settingsSitemap } from './templates/settings/settings.sitemap';

// Other Imports
import ProtectedRoute from './components/ProtectedRoute';
import NotFound from './components/NotFound';

// --- 3. DATA SEEDER ---
import { initializeDataLake } from './engine/runtime/data-seeder';

import ScrollToTop from './components/ScrollToTop';
import HashLinkScroll from './components/HashLinkScroll';

function App() {
  
  // Trigger data seeding on mount
  useEffect(() => {
    initializeDataLake();
  }, []);

  return (
    <ThemeProvider>
      <AuthProvider>
        <MqttProvider>
          <ScrollToTop />
          <HashLinkScroll />
          <Routes>
            {/* --- NEW AUTH CLUSTER --- */}
            {/* This handles the layout and background for all auth pages */}
            <Route path="/auth" element={<AuthLayout />}>
              <Route index element={<Navigate to="/auth/login" replace />} />
              <Route path="login" element={<LoginPage />} />
              <Route path="signup" element={<SignupPage />} />
            </Route>

            {/* Fallback for legacy /login access */}
            <Route path="/login" element={<Navigate to="/auth/login" replace />} />

            {/* --- PROTECTED APP ROUTES --- */}
            <Route element={<ProtectedRoute />}>
              <Route path="/" element={<Navigate to="/dashboard/welcome" replace />} />

              {/* Dashboard Template */}
              <Route path="/dashboard/*" element={<DashboardLayout />}>
              <Route index element={<Navigate to="welcome" replace />} />
                {generateRoutes(dashboardSitemap)}
              </Route>

              {/* Docs Template */}
              <Route path="/docs/*" element={<DocsLayout />}>
                {generateRoutes(docsSitemap)}
              </Route>

              {/* Settings Template */}
              <Route path="/settings/*" element={<SettingsLayout />}>
                {generateRoutes(settingsSitemap)}
              </Route>
            </Route>

            {/* 404 Handler */}
            <Route path="*" element={<NotFound />} />
          </Routes>
        </MqttProvider>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;
</file>

<file path="template/DESIGNER_GUIDE.md">
## üöÄ Quick Start for Designers

You don't need to be a coding wizard to use this. Just follow these 3 steps:

### 1. Setup (Do this once)
You need **Node.js** installed on your computer.
- Open your terminal (Command Prompt or Terminal app).
- Type `node -v` to see if you have it. If not, download it from [nodejs.org](https://nodejs.org).

### 2. Create your Project
Run this magic command in your terminal:

```bash
npm create @ramme-io/app@latest
```

It will ask you for a project name (e.g., my-smart-home). Type it and hit Enter.

---

## Run it!

You will be prompted to name your project.

**1. Enter the project directory**
```bash
cd my-new-project
```

**2. Install dependencies**
```bash
pnpm install
# or npm install
```

**3. Start the dev server**
```bash
pnpm run dev
```

Your prototype is now running locally at `http://localhost:5173`.

---
</file>

<file path="template/README.md">
# Ramme App Starter

Welcome to your new **Ramme** application!
This project was scaffolded using `create-ramme-app`.

## üö¶ Getting Started

**Install dependencies:**
```bash
npm install
# or
pnpm install
# or
yarn
```

**Start the development server:**
```bash
npm run dev
```

**Open your browser:**
Visit `http://localhost:5173` to see your app.

## üèóÔ∏è Project Structure

**`src/config/app.manifest.ts`**: The "Brain" of your app. Define your app's title, description, and high-level settings here.
**`src/config/sitemap.ts`**: The "Skeleton." Define your pages and navigation structure here.
**`src/core/component-registry.tsx`**: Maps JSON component names (from the builder) to actual React components.
**`src/pages`**: Your actual page components.
**`src/data`**: Mock data generators and seed files.

## üé® Customization

### changing the Theme
Go to `src/index.css` or `tailwind.config.js` to update your brand colors.

### Adding New Pages
1.  Create a new component in `src/pages`.
2.  Register it in your `sitemap.ts` (or the relevant template sitemap).
3.  The `RouteGenerator` will automatically handle the routing!

## üìö Learn More

- [Ramme UI Documentation](https://ramme.io/docs)
- [Vite Documentation](https://vitejs.dev/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)
</file>

<file path="template/src/config/app.manifest.ts">
import type { AppSpecification } from '../engine/validation/schema';



export const appManifest: AppSpecification = {
  meta: {
    name: "Ramme System Check",
    version: "1.0.0",
    description: "Verifying the Smart Runtime.",
    author: "Ramme Builder",
  },
  config: {
    theme: 'system',
    mockMode: false,
    brokerUrl: 'wss://test.mosquitto.org:8081',
  },
  domain: { signals: [], entities: [] },
  pages: [
    {
      id: "dashboard",
      slug: "dashboard",
      title: "System Status",
      description: "Verifying Week 1 Logic Engine",
      sections: [
        {
          id: "sect-users",
          title: "User Management (CRUD Test)",
          layout: { columns: 1 },
          blocks: [
            {
              id: "table_users",
              type: "SmartTable",
              props: {
                title: "Active Users",
                dataId: "users" // ‚úÖ Points to SEED_USERS
              }
            }
          ]
        },
        {
          id: "sect-invoices",
          title: "Invoices (Relational Test)",
          layout: { columns: 1 },
          blocks: [
            {
              id: "table_invoices",
              type: "SmartTable",
              props: {
                title: "Recent Invoices",
                dataId: "invoices" // ‚úÖ Points to SEED_INVOICES
              }
            }
          ]
        }
      ]
    }
  ]
};
</file>

<file path="template/src/templates/dashboard/dashboard.sitemap.ts">
import { type SitemapEntry } from '../../engine/types/sitemap-entry';
import { appManifest } from '../../config/app.manifest';

// Existing pages (Legacy location)
import Welcome from '../../features/onboarding/pages/Welcome'; 
import { OverviewPage } from '../../features/overview'; 
import AiChat from '../../features/ai/pages/AiChat'; 

// ‚úÖ NEW: Import from the Feature Domain (Clean API)
import { UsersPage } from '../../features/users'; 

export const dashboardSitemap: SitemapEntry[] = [
  // 1. The New Landing Page
  {
    id: 'welcome',
    path: 'welcome',
    title: 'Start Here',
    icon: 'rocket',
    component: Welcome,
  },
  // 2. The "Mission Control" Charts Page
  {
  id: 'overview',
  path: 'overview',
  title: 'Overview',
  icon: 'layout-dashboard',
  component: OverviewPage, 
},
  // 3. ‚úÖ The User Management Module
  {
    id: 'users',
    path: 'users',
    title: 'Users',
    icon: 'users',
    component: UsersPage,
  }
];

// B. Dynamic Modules
if (appManifest.modules?.includes('ai-chat')) {
  dashboardSitemap.push({
    id: 'ai-chat',
    path: 'ai-chat',
    title: 'AI Assistant',
    icon: 'bot',
    component: AiChat,
  });
}
</file>

<file path="template/src/templates/dashboard/DashboardLayout.tsx">
import React, { useState, useMemo } from 'react';
import { Outlet, useNavigate, useLocation } from 'react-router-dom';
import {
  Sidebar,
  type SidebarItem,
  ChatFAB,
  type IconName, // Type for safety
} from '@ramme-io/ui'; // ‚úÖ Import only what exists in v1.2.0

import { dashboardSitemap } from './dashboard.sitemap';
import { SitemapProvider } from '../../engine/runtime/SitemapContext';
import PageTitleUpdater from '../../components/PageTitleUpdater';
import AppHeader from '../../components/AppHeader';
import { AIChatWidget } from '../../components/AIChatWidget';
import { useWorkflowEngine } from '../../engine/runtime/useWorkflowEngine';

// Main Layout Component
const DashboardLayout: React.FC = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const [isChatOpen, setIsChatOpen] = useState(false);
  
  useWorkflowEngine();

  // 1. Transform Sitemap to Sidebar Items
  // The new Sidebar expects a simple array of items.
  const sidebarItems: SidebarItem[] = useMemo(() => {
    return dashboardSitemap.map((route) => ({
      id: route.id,
      label: route.title,
      icon: route.icon as IconName, // Ensure your sitemap strings match valid icon names
      href: route.path ? `/dashboard/${route.path}` : '/dashboard',
      // Note: v1.2.0 Sidebar currently handles top-level items. 
      // If you need nested items, we would flatten them here or update Sidebar.tsx later.
    }));
  }, []);

  // 2. Determine Active Item based on URL
  const activeItemId = useMemo(() => {
    // Find the item whose href matches the start of the current path
    const active = sidebarItems.find(item => 
      item.href !== '/dashboard' && location.pathname.startsWith(item.href!)
    );
    // Default to dashboard (first item) if no specific match
    return active?.id || sidebarItems[0]?.id;
  }, [location.pathname, sidebarItems]);

  return (
    <SitemapProvider value={dashboardSitemap}>
      <PageTitleUpdater />
      
      {/* 3. New Layout Structure (No Provider needed) */}
      <div className="flex h-screen bg-background text-foreground relative">
        
        <Sidebar
          className="relative border-border"
          items={sidebarItems}
          activeItemId={activeItemId}
          onNavigate={(item) => {
            if (item.href) navigate(item.href);
          }}
          user={{
            name: "Demo User",
            email: "user@example.com",
            avatarUrl: "https://i.pravatar.cc/150?u=ramme"
          }}
          logo={
            <div className="flex items-center gap-2 px-2 font-bold text-xl tracking-tight">
              <span className="text-primary">Ramme</span>App
            </div>
          }
        />

        <div className="flex flex-col flex-1 overflow-hidden">
          <AppHeader />
          <main className="flex-1 overflow-y-auto p-8 bg-muted/20">
            <Outlet />
          </main>
        </div>

        {/* --- AI COPILOT SECTION --- */}
        {isChatOpen && (
          <AIChatWidget onClose={() => setIsChatOpen(false)} />
        )}

        <div className="fixed bottom-6 right-6 z-50">
          <ChatFAB 
            onClick={() => setIsChatOpen(!isChatOpen)} 
            tooltipContent={isChatOpen ? "Close Assistant" : "Open Bodewell AI"}
          />
        </div>

      </div>
    </SitemapProvider>
  );
};

export default DashboardLayout;
</file>

<file path="README.md">
# Create Ramme App

[![NPM Version](https://img.shields.io/npm/v/@ramme-io/create-app.svg)](https://www.npmjs.com/package/@ramme-io/create-app) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

The easiest way to start a new **Ramme** project.
This CLI tool scaffolds a production-ready React application configured with:
- **@ramme/ui:** Our pre-built component library.
- **Tailwind CSS:** Fully configured for the Ramme design system.
- **Vite:** For lightning-fast development.
- **TypeScript:** For type-safe code.

## üöÄ Quick Start

Get started in seconds. No global installation required.

```bash
npm create @ramme-io/app@latest
# or
npm init @ramme-io/app@latest
```

You will be prompted to name your project.

**1. Enter the project directory**
```bash
cd my-new-project
```

**2. Install dependencies**
```bash
pnpm install
# or npm install
```

**3. Start the dev server**
```bash
pnpm run dev
```

Your prototype is now running locally at `http://localhost:5173`.

---

## The Tech Stack

This starter kit is an opinionated selection of the best open-source tools available:

* **Vite:** Next-generation tooling for instant server start and lightning-fast HMR (Hot Module Replacement).
* **React:** The standard library for building composable user interfaces.
* **TypeScript:** Statically typed JavaScript for scalable, robust application logic.
* **Tailwind CSS:** A utility-first styling engine configured with Ramme design tokens.
* **@ramme-io/ui:** A pre-installed suite of accessible, unstyled primitives based on Radix UI.

---

## Project Links

* **`@ramme-io/ui`**: The core library of visual primitives.
* **`@ramme-io/create-app`** (This Repository): The quick start kit.

---

## License

Copyright ¬© 2025 Excesspool Limited Liability Company.
This project is licensed under the [MIT License](LICENSE).
</file>

<file path="template/pkg.json">
{
  "name": "ramme-app",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@ramme-io/ui": "^1.2.1",
    "mqtt": "^5.3.5",
    "zustand": "^4.5.0",
    "ag-grid-community": "^31.3.1",
    "ag-grid-enterprise": "^31.3.1",
    "ag-grid-react": "^31.3.1",
    "framer-motion": "^11.0.0",
    "fs-extra": "^11.2.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.22.0",
    "react-resizable-panels": "^2.0.9",
    "ai": "^3.0.0",
    "@ai-sdk/google": "^0.0.10",
    "zod": "^3.22.0"
  },
  "devDependencies": {
    "@types/node": "^20.11.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@vitejs/plugin-react": "^4.2.0",
    "autoprefixer": "^10.4.19",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.3",
    "typescript": "^5.2.0",
    "vite": "^5.2.0"
  }
}
</file>

<file path="package.json">
{
  "name": "@ramme-io/create-app",
  "version": "1.2.1",
  "type": "module",
  "bin": {
    "create-ramme-app": "./index.js"
  },
  "files": [
    "index.js",
    "template"
  ],
  "scripts": {
    "dev": "cd template && vite",
    "build": "cd template && tsc && vite build",
    "preview": "cd template && vite preview",
    "pack-tarball": "npm pack",
    "bundle:ai": "repomix --ignore '**/*.lock,**/dist/**,**/template/dist/**,**/template/node_modules/**' --output 'ramme-starter-context.txt'",
    "zip:builder": "cd template && zip -r ../base.zip . -x \"node_modules/*\" \"dist/*\" \".DS_Store\" && mv ../base.zip ../../ramme-app-builder/public/base.zip && echo '‚úÖ base.zip updated in Builder!'"
  },
  "dependencies": {
    "ag-grid-community": "^34.1.2",
    "ag-grid-enterprise": "^34.1.2",
    "ag-grid-react": "^34.1.2",
    "framer-motion": "^12.23.12",
    "fs-extra": "^11.3.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-resizable-panels": "^3.0.4",
    "react-router-dom": "6.30.1"
  },
  "devDependencies": {
    "@types/node": "^20.14.2",
    "@types/react": "^18.2.66",
    "@types/react-dom": "^18.2.22",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.19",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.2.2",
    "vite": "^5.2.0"
  },
  "pnpm": {
    "overrides": {
      "react-router-dom": "6.30.1"
    }
  }
}
</file>

</files>
