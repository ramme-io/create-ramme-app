This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: **/*.lock, **/dist/**, **/template/dist/**, **/template/node_modules/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
template/
  public/
    api_mock.json
    orange.png
    vite.svg
  src/
    adaptors/
      .gitkeep
    assets/
      orange.png
      react.svg
    blocks/
      SmartTable.tsx
    components/
      dev/
        GhostOverlay.tsx
      AddItemsModal.tsx
      AIChatWidget.tsx
      AppFooter.tsx
      AppHeader.tsx
      AutoForm.tsx
      DynamicBlock.tsx
      HashLinkScroll.tsx
      LocalSideNav.tsx
      PageTitleUpdater.tsx
      PageWithSideNav.tsx
      ProtectedRoute.tsx
      TemplateSwitcher.tsx
    config/
      app.manifest.ts
      dashboard.layout.ts
      navigation.ts
    contexts/
      AuthContext.tsx
      MqttContext.tsx
      SitemapContext.tsx
    core/
      component-registry.tsx
      data-seeder.ts
      manifest-types.ts
      route-generator.tsx
      sitemap-entry.ts
    data/
      mock-charts.ts
      mockData.ts
      mockLedger.ts
      mockUsers.ts
    generated/
      hooks.ts
    hooks/
      useAction.ts
      useCrudLocalStorage.ts
      useDataQuery.ts
      useDevTools.ts
      useMockChat.ts
      useSignal.ts
      useWorkflowEngine.ts
    layouts/
      DataLayout.tsx
      SideNavLayout.tsx
    pages/
      prototypes/
        ItemSelectorPage.tsx
      settings/
        BillingPage.tsx
        ProfilePage.tsx
        TeamPage.tsx
      styleguide/
        sections/
          charts/
            ChartsSection.tsx
          colors/
            ColorsSection.tsx
          elements/
            ElementsSection.tsx
          feedback/
            FeedbackSection.tsx
          forms/
            FormsSection.tsx
          icons/
            IconsSection.tsx
          layout/
            LayoutSection.tsx
          navigation/
            NavigationSection.tsx
          tables/
            TablesSection.tsx
          templates/
            TemplatesSection.tsx
          theming/
            ThemingSection.tsx
          utilities/
            UtilitiesSection.tsx
        NotFound.tsx
        Styleguide.tsx
      AccountingLedgerPage.tsx
      AiChat.tsx
      Dashboard.tsx
      DataGridPage.tsx
      DynamicPage.tsx
      GenericContentPage.tsx
      LoginPage.tsx
    templates/
      dashboard/
        dashboard.sitemap.ts
        DashboardLayout.tsx
      docs/
        pages/
          Introduction.tsx
        docs.sitemap.ts
        DocsLayout.tsx
      settings/
        settings.sitemap.ts
        SettingsLayout.tsx
    types/
      schema.ts
      signal.ts
    App.css
    App.tsx
    index.css
    main.tsx
    vite-env.d.ts
  DESIGNER_GUIDE.md
  eslint.config.js
  gitignore
  index.html
  pkg.json
  postcss.config.cjs
  README.md
  tailwind.config.cjs
  tsconfig.app.json
  tsconfig.json
  tsconfig.node.json
  vite.config.ts
.gitignore
1.1.4
CHANGELOG.md
index.js
LICENSE
package.json
README.md
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="template/src/blocks/SmartTable.tsx">
import React, { useState, useMemo } from 'react';
import { DataTable, Button, Icon, Card, useToast, type ColDef } from '@ramme-io/ui';
import { getResourceMeta, getMockData } from '../data/mockData';
import { AutoForm } from '../components/AutoForm';
// âœ… Import types that now definitely exist
import { useDataQuery, type FilterOption, type SortOption } from '../hooks/useDataQuery';
import { useCrudLocalStorage } from '../hooks/useCrudLocalStorage';

interface SmartTableProps {
  dataId: string;
  title?: string;
  initialFilter?: Record<string, any>; 
  initialSort?: SortOption;
}

export const SmartTable: React.FC<SmartTableProps> = ({ 
  dataId, 
  title,
  initialFilter, 
  initialSort 
}) => {
  const { addToast } = useToast();
  
  // 1. STATE
  const [page, setPage] = useState(1);
  const [pageSize] = useState(10); // Kept as state in case we add a selector later
  
  // 2. METADATA
  const meta = getResourceMeta(dataId);

  // 3. STORAGE LAYER
  // Seed data if local storage is empty
  const seedData = useMemo(() => getMockData(dataId) || [], [dataId]);
  
  const { 
    data: rawData, 
    createItem, 
    updateItem 
  } = useCrudLocalStorage<any>(`ramme_db_${dataId}`, seedData);

  // 4. LOGIC LAYER
  const activeFilters = useMemo<FilterOption[]>(() => {
    if (!initialFilter) return [];
    return Object.entries(initialFilter).map(([key, value]) => ({
      field: key,
      operator: 'equals',
      value
    }));
  }, [initialFilter]);

  const { data: processedRows, total, pageCount } = useDataQuery(rawData, {
    filters: activeFilters,
    sort: initialSort, // Using the prop directly for now (Fixes 'setSort' unused)
    page,
    pageSize
  });

  // 5. UI STATE
  const [isEditOpen, setIsEditOpen] = useState(false);
  const [currentRecord, setCurrentRecord] = useState<any>(null);

  // 6. COLUMNS
  const columns = useMemo(() => {
    if (meta?.fields) {
      const cols: ColDef[] = meta.fields.map((f: any) => {
        const colDef: ColDef = {
          field: f.key,
          headerName: f.label,
          filter: true,
          sortable: true,
          flex: 1,
        };

        if (f.key.endsWith('Id')) {
           const collectionName = f.key.replace('Id', 's'); 
           const relatedData = getMockData(collectionName);
           if (relatedData) {
             colDef.valueFormatter = (params) => {
               const match = relatedData.find((item: any) => item.id === params.value);
               return match ? (match.name || match.title || params.value) : params.value;
             };
           }
        }

        if (f.type === 'currency') colDef.valueFormatter = (p: any) => p.value ? `$${p.value}` : '';
        if (f.type === 'date') colDef.valueFormatter = (p: any) => p.value ? new Date(p.value).toLocaleDateString() : '';
        
        if (f.type === 'status') {
          colDef.cellRenderer = (p: any) => (
            <span className={`px-2 py-1 rounded-full text-xs font-medium border
              ${['active', 'paid'].includes(p.value?.toLowerCase()) ? 'bg-green-100 text-green-800 border-green-200' : 
                ['pending'].includes(p.value?.toLowerCase()) ? 'bg-yellow-100 text-yellow-800 border-yellow-200' : 'bg-slate-100 text-slate-800 border-slate-200'}`}>
              {p.value}
            </span>
          );
        }
        return colDef;
      });

      cols.push({
        headerName: "Actions",
        field: "id",
        width: 100,
        pinned: 'right',
        cellRenderer: (params: any) => (
          <Button variant="ghost" size="sm" onClick={() => { setCurrentRecord(params.data); setIsEditOpen(true); }}>
            <Icon name="edit-2" className="w-4 h-4 text-slate-500" />
          </Button>
        )
      });
      return cols;
    }
    
    if (processedRows.length > 0) {
      return Object.keys(processedRows[0]).map(k => ({ field: k, headerName: k.toUpperCase(), flex: 1 }));
    }
    return [];
  }, [meta, processedRows]);

  const handleSave = (record: any) => {
    if (record.id && currentRecord?.id) {
        updateItem(record);
        addToast('Record updated successfully', 'success');
    } else {
        const { id, ...newItem } = record;
        createItem(newItem);
        addToast('New record created', 'success');
    }
    setIsEditOpen(false);
  };

  return (
    <Card className="p-0 overflow-hidden border border-border flex flex-col h-full min-h-[500px]"> 
      <div className="p-4 border-b border-border flex justify-between items-center bg-muted/20">
        <div className="flex items-center gap-2">
          <h3 className="text-lg font-semibold text-foreground">
            {title || meta?.name || dataId}
          </h3>
          <span className="text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full">
            {total} records
          </span>
        </div>
        <Button size="sm" variant="outline" onClick={() => { setCurrentRecord({}); setIsEditOpen(true); }}>
          <Icon name="plus" className="mr-2 w-4 h-4" /> Add Item
        </Button>
      </div>

      <div className="flex-1 w-full bg-card relative">
        <DataTable 
          rowData={processedRows} 
          columnDefs={columns} 
          pagination={false} // We handle pagination logic manually below
        />
        
        {/* Pagination Controls */}
        <div className="p-2 border-t border-border flex justify-between items-center text-sm">
           <span className="text-muted-foreground">
             Page {page} of {pageCount || 1}
           </span>
           <div className="flex gap-2">
             <Button 
               variant="ghost" 
               size="sm" 
               disabled={page === 1} 
               onClick={() => setPage(p => Math.max(1, p - 1))}
             >
               Prev
             </Button>
             <Button 
               variant="ghost" 
               size="sm" 
               disabled={page >= pageCount} 
               onClick={() => setPage(p => p + 1)}
             >
               Next
             </Button>
           </div>
        </div>
      </div>

      <AutoForm
        isOpen={isEditOpen}
        onClose={() => setIsEditOpen(false)}
        onSubmit={handleSave}
        title={meta?.name || 'Item'}
        fields={meta?.fields || []}
        initialData={currentRecord}
      />
    </Card>
  );
};
</file>

<file path="template/src/components/AutoForm.tsx">
import React, { useMemo } from 'react';
import { Drawer, FormTemplate, Button, type FormField } from '@ramme-io/ui';

interface AutoFormProps {
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (data: any) => void;
  title: string;
  fields: any[]; // The raw metadata from app.manifest.ts
  initialData?: any;
}

export const AutoForm: React.FC<AutoFormProps> = ({
  isOpen,
  onClose,
  onSubmit,
  title,
  fields,
  initialData
}) => {
  
  // 1. Safe Data Handling
  const safeData = initialData || {};
  const isEditMode = !!safeData.id;

  // 2. Schema-to-UI Mapping Engine
  const formFields = useMemo<FormField[]>(() => {
    return fields
      // ðŸ›‘ RULE 1: Hide ID field during creation (System handles it)
      .filter((f: any) => !(f.key === 'id' && !isEditMode))
      .map((f: any) => {
      
      const isIdField = f.key === 'id';

      // Base Configuration for all fields
      const baseConfig = {
        name: f.key,
        label: f.label,
        required: f.required,
        placeholder: f.description || `Enter ${f.label.toLowerCase()}`,
        // Pre-fill data if editing, or use default from schema
        value: safeData[f.key] !== undefined ? safeData[f.key] : (f.defaultValue || ''),
        colSpan: 1,
        // ðŸ›‘ RULE 2: If it's the ID field, force it to be disabled (View Only)
        disabled: isIdField
      };

      // Intelligent Type Switching
      switch (f.type) {
        case 'number':
        case 'integer':
        case 'currency':
          return { 
            ...baseConfig, 
            type: 'number',
            value: Number(baseConfig.value) || 0 
          };

        case 'boolean':
          return { 
            ...baseConfig, 
            type: 'toggle', 
            checked: !!baseConfig.value 
          };

        case 'date':
          return { 
            ...baseConfig, 
            type: 'datepicker', 
            value: baseConfig.value ? new Date(baseConfig.value) : null 
          };

        case 'status':
          return { 
            ...baseConfig, 
            type: 'select', 
            options: [
              { value: 'Active', label: 'Active' },
              { value: 'Pending', label: 'Pending' },
              { value: 'Inactive', label: 'Inactive' },
              { value: 'Archived', label: 'Archived' }
            ]
          };

        case 'textarea':
          return { 
            ...baseConfig, 
            type: 'textarea', 
            colSpan: 2 
          };

        case 'email':
          return { ...baseConfig, type: 'email' };

        default:
          return { ...baseConfig, type: 'text' };
      }
    });
  }, [fields, safeData, isEditMode]);

  return (
    <Drawer
      isOpen={isOpen}
      onClose={onClose}
      title={`${isEditMode ? 'Edit' : 'New'} ${title}`}
      size="500px"
    >
      <div className="p-6">
        <FormTemplate 
          fields={formFields} 
          onSubmit={(formData) => {
            // Merge original ID to ensure we update the correct record
            onSubmit({ ...safeData, ...formData }); 
          }} 
        >
            <div className="flex justify-end gap-2 mt-8 pt-4 border-t border-border">
                <Button variant="outline" onClick={onClose} type="button">
                  Cancel
                </Button>
                <Button type="submit" variant="primary">
                  {isEditMode ? 'Save Changes' : 'Create Record'}
                </Button>
            </div>
        </FormTemplate>
      </div>
    </Drawer>
  );
};
</file>

<file path="template/src/core/data-seeder.ts">
// âœ… Match the export from your new mockData.ts
import { DATA_REGISTRY } from '../data/mockData'; 

const DB_PREFIX = 'ramme_db_';

export const initializeDataLake = () => {
  if (typeof window === 'undefined') return;

  console.groupCollapsed('ðŸŒŠ [Data Lake] Initialization');
  
  Object.entries(DATA_REGISTRY).forEach(([key, seedData]) => {
    const storageKey = `${DB_PREFIX}${key}`;
    const existing = localStorage.getItem(storageKey);

    if (!existing) {
      console.log(`âœ¨ Seeding collection: ${key} (${seedData.length} records)`);
      localStorage.setItem(storageKey, JSON.stringify(seedData));
    } else {
      console.log(`âœ… Collection exists: ${key}`);
    }
  });

  console.groupEnd();
};

/**
 * Utility to clear the lake (useful for a "Reset Data" button)
 */
export const resetDataLake = () => {
  // âœ… FIX: Use DATA_REGISTRY (the new name)
  Object.keys(DATA_REGISTRY).forEach((key) => {
    localStorage.removeItem(`${DB_PREFIX}${key}`);
  });
  window.location.reload();
};
</file>

<file path="template/src/hooks/useDataQuery.ts">
import { useMemo } from 'react';

// --- 1. Export the Missing Types (Fixes ts(2305)) ---

export type SortDirection = 'asc' | 'desc';

export interface SortOption {
  field: string;
  direction: SortDirection;
}

export interface FilterOption {
  field: string;
  operator: 'equals' | 'contains' | 'gt' | 'lt' | 'neq';
  value: any;
}

export interface QueryOptions {
  filters?: FilterOption[];
  sort?: SortOption;
  page?: number;
  pageSize?: number;
}

export interface QueryResult<T> {
  data: T[];
  total: number;
  pageCount: number;
}

// --- 2. Update the Hook Signature (Fixes ts(2345)) ---

export function useDataQuery<T>(
  rawData: T[], // <--- Now accepts an Array, NOT a string ID
  options: QueryOptions = {}
): QueryResult<T> {
  const { filters, sort, page = 1, pageSize = 10 } = options;

  // A. Filtering Logic
  const filteredData = useMemo(() => {
    if (!filters || filters.length === 0) return rawData;

    return rawData.filter((item: any) => {
      return filters.every((filter) => {
        const itemValue = item[filter.field];
        
        switch (filter.operator) {
          case 'equals': return itemValue == filter.value;
          case 'neq': return itemValue != filter.value;
          case 'contains': 
            return String(itemValue).toLowerCase().includes(String(filter.value).toLowerCase());
          case 'gt': return itemValue > filter.value;
          case 'lt': return itemValue < filter.value;
          default: return true;
        }
      });
    });
  }, [rawData, filters]);

  // B. Sorting Logic
  const sortedData = useMemo(() => {
    if (!sort) return filteredData;

    return [...filteredData].sort((a: any, b: any) => {
      const aValue = a[sort.field];
      const bValue = b[sort.field];
      if (aValue < bValue) return sort.direction === 'asc' ? -1 : 1;
      if (aValue > bValue) return sort.direction === 'asc' ? 1 : -1;
      return 0;
    });
  }, [filteredData, sort]);

  // C. Pagination Logic
  const paginatedResult = useMemo(() => {
    const startIndex = (page - 1) * pageSize;
    return sortedData.slice(startIndex, startIndex + pageSize);
  }, [sortedData, page, pageSize]);

  return {
    data: paginatedResult,
    total: filteredData.length,
    pageCount: Math.ceil(filteredData.length / pageSize),
  };
}
</file>

<file path="template/src/hooks/useWorkflowEngine.ts">
// Placeholder for the Generated Engine
export const useWorkflowEngine = () => {
  // This will be overwritten by the Builder at runtime
  console.log(" [Mock] Workflow Engine Mounted");
  return {};
};
</file>

<file path="template/public/api_mock.json">
{
  "meta": {
    "status": 200,
    "region": "us-east-1"
  },
  "data": {
    "finance": {
      "mrr": 99999.00,
      "growth": 0.12
    },
    "users": {
      "total": 1245,
      "active": 890
    }
  }
}
</file>

<file path="template/public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="template/src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="template/src/components/dev/GhostOverlay.tsx">
import React from 'react';
import { Icon } from '@ramme-io/ui';

interface GhostOverlayProps {
  children: React.ReactNode;
  componentId: string;
  componentType: string;
  signalId?: string;
  isActive?: boolean;
}

export const GhostOverlay: React.FC<GhostOverlayProps> = ({
  children,
  componentId,
  componentType,
  signalId,
  isActive = false,
}) => {
  
  if (!isActive) {
    return <>{children}</>;
  }

  const handleClick = (e: React.MouseEvent) => {
    // ðŸ›‘ Stop the click from triggering app logic (like navigation or toggles)
    e.preventDefault();
    e.stopPropagation();

    // ðŸš€ THE GHOST BRIDGE: Signal the Parent (The Builder)
    window.parent.postMessage({
      type: 'RAMME_SELECT_BLOCK',
      payload: { blockId: componentId }
    }, '*');
  };

  return (
    <div 
      className="relative group cursor-pointer"
      onClick={handleClick} // âœ… Add Click Handler
    >
      {/* The "Ghost" Border */}
      <div className="absolute inset-0 z-50 border-2 border-dashed border-accent/50 rounded-lg bg-accent/5 group-hover:bg-accent/10 transition-colors pointer-events-none" />

      {/* The "Info Tag" */}
      <div className="absolute top-0 left-0 z-50 p-2 transform -translate-y-1/2 translate-x-2 pointer-events-none">
        <div className="flex items-center gap-2 bg-accent text-accent-foreground text-xs font-mono py-1 px-2 rounded shadow-sm">
          <Icon name="box" size={12} />
          <span className="font-bold">{componentType}</span>
        </div>
      </div>

      {/* The "Signal Wire" */}
      {signalId && (
        <div className="absolute bottom-0 right-0 z-50 p-2 transform translate-y-1/2 -translate-x-2 pointer-events-none">
           <div className="flex items-center gap-1.5 bg-blue-600 text-white text-xs font-mono py-1 px-2 rounded shadow-sm">
            <Icon name="activity" size={12} />
            <span>{signalId}</span>
          </div>
        </div>
      )}

      {/* Render the actual component underneath */}
      <div className="opacity-50 grayscale transition-all duration-200 group-hover:opacity-75 group-hover:grayscale-0 pointer-events-none">
        {children}
      </div>
    </div>
  );
};
</file>

<file path="template/src/components/AddItemsModal.tsx">
import React, { useMemo } from 'react';
import {
  Modal,
  Button,
  SearchInput,
  DataTable,
  Checkbox,
  type ColDef
} from '@ramme-io/ui';

// Mock data is fine as is
const mockData = [
  { id: 34561, name: 'Item Name 1', color: 'Blue' },
  { id: 76552, name: 'Item Name 2', color: 'Red' },
  { id: 54364, name: 'Item Name 3', color: 'Yellow' },
  { id: 87655, name: 'Item Name 3', color: 'Red' },
  { id: 98676, name: 'Item Name 3', color: 'Yellow' },
];

interface AddItemsModalProps {
  isOpen: boolean;
  onClose: () => void;
}

export const AddItemsModal: React.FC<AddItemsModalProps> = ({
  isOpen,
  onClose,
}) => {
  const [selectedCount, setSelectedCount] = React.useState(0);

  // --- FIX: Use AG Grid's column definition format ---
  const columnDefs = useMemo<ColDef[]>(() => [
    {
      headerName: 'Name',
      field: 'name', // Use 'field' instead of 'accessor'
      // AG Grid uses cellRenderer for custom components
      cellRenderer: (params: any) => (
        <div className="flex items-center">
          {params.value}
        </div>
      ),
      // Add a custom header component for the "select all" checkbox
      headerCheckboxSelection: true,
      checkboxSelection: true,
    },
    {
      headerName: 'ID', // Use 'headerName' instead of 'Header'
      field: 'id',
    },
    {
      headerName: 'Color',
      field: 'color',
    },
  ], []);

  const modalFooter = (
    <div className="flex items-center justify-between w-full">
      <div className="font-bold">{`(${selectedCount}) Selected`}</div>
      <div className="flex gap-2">
        <Button variant="secondary" onClick={onClose}>
          Cancel
        </Button>
        <Button variant="primary">Add Items</Button>
      </div>
    </div>
  );

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      title="Add Items"
      footer={modalFooter}
    >
      <div className="space-y-4">
        <h3 className="text-lg font-semibold">Select Item(s)</h3>
        <SearchInput placeholder="Search by name" />
        <DataTable
          // --- FIX: Use the correct prop names ---
          columnDefs={columnDefs}
          rowData={mockData}
          rowSelection="multiple" // Enable row selection
          onSelectionChanged={(event) => {
            setSelectedCount(event.api.getSelectedRows().length);
          }}
        />
      </div>
    </Modal>
  );
};
</file>

<file path="template/src/components/AIChatWidget.tsx">
import React, { useState } from 'react';
import { 
  Card, 
  Conversation, 
  Message, 
  PromptInput, 
  Button,
  Icon,
} from '@ramme-io/ui';
import { useMockChat } from '../hooks/useMockChat';

interface AIChatWidgetProps {
  onClose: () => void;
}

export const AIChatWidget: React.FC<AIChatWidgetProps> = ({ onClose }) => {
  // 1. Use the shared "Brain"
  const { messages, isLoading, sendMessage } = useMockChat();
  const [input, setInput] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    sendMessage(input);
    setInput('');
  };

  return (
    <Card className="fixed bottom-24 right-6 w-96 h-[500px] shadow-2xl flex flex-col z-50 animate-in slide-in-from-bottom-5 border-border">
      
      {/* Header */}
      <div className="p-4 border-b flex justify-between items-center bg-muted/50 rounded-t-lg">
        <div className="flex items-center gap-2">
          <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse" />
          <span className="font-semibold text-sm">Bodewell AI</span>
        </div>
        <Button variant="ghost" size="icon" onClick={onClose} className="h-6 w-6">
          <Icon name="x" size={16} />
        </Button>
      </div>

      {/* Chat History Area */}
      <div className="flex-1 overflow-hidden p-0 bg-background">
        <Conversation>
          {messages.map((msg) => (
            <Message
              key={msg.id}
              author={msg.author}
              content={msg.content}
              isUser={msg.isUser}
              suggestions={msg.suggestions}
              onSuggestionClick={(s) => sendMessage(s)}
            />
          ))}
          {isLoading && <Message author="Bodewell AI" isUser={false} loading />}
        </Conversation>
      </div>

      {/* Input Footer */}
      <div className="p-4 border-t bg-card">
        <PromptInput
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onSubmit={handleSubmit}
          placeholder="Ask to adjust temperature..."
        />
      </div>
    </Card>
  );
};
</file>

<file path="template/src/components/AppFooter.tsx">
// src/components/AppFooter.tsx
import React from 'react';

const AppFooter: React.FC = () => {
  return (
    <footer className="py-6 text-center text-muted-foreground">
      <p>&copy; {new Date().getFullYear()} Ramme. All Rights Reserved.</p>
    </footer>
  );
};

export default AppFooter;
</file>

<file path="template/src/components/HashLinkScroll.tsx">
import { useEffect } from 'react';
import { useLocation } from 'react-router-dom';

/**
 * A component that listens for hash changes in the URL and smoothly
 * scrolls the corresponding element into view.
 */
const HashLinkScroll = () => {
  const { hash } = useLocation();

  useEffect(() => {
    if (hash) {
      // We need to remove the '#' from the hash string
      const id = hash.substring(1);
      const element = document.getElementById(id);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
      }
    }
  }, [hash]); // Re-run this effect whenever the hash changes

  // This component does not render any UI
  return null;
};

export default HashLinkScroll;
</file>

<file path="template/src/components/LocalSideNav.tsx">
import React, { useState, useEffect } from 'react';
import { NavLink, useLocation } from 'react-router-dom';
import { Icon, type IconName } from '@ramme-io/ui';
import { motion, AnimatePresence } from 'framer-motion';

export interface NavItem {
  label: string;
  href: string;
  icon?: IconName;
  children?: NavItem[];
}

interface LocalSideNavProps {
  navItems: NavItem[];
  className?: string;
  onLinkClick?: () => void; // 1. Add the optional prop
}

const LocalSideNav: React.FC<LocalSideNavProps> = ({ navItems, className, onLinkClick }) => { // 2. Destructure prop
  const location = useLocation();
  const [expandedItems, setExpandedItems] = useState<Record<string, boolean>>({});

  useEffect(() => {
    const currentParent = navItems.find(item => 
      item.children?.some(child => location.pathname === child.href)
    );
    if (currentParent) {
      setExpandedItems(prev => ({ ...prev, [currentParent.href]: true }));
    }
  }, [location.pathname, navItems]);

  const handleToggle = (href: string) => {
    setExpandedItems(prev => ({ ...prev, [href]: !prev[href] }));
  };
  
  const childNavLinkClasses = ({ isActive }: { isActive: boolean }) =>
    `flex items-center gap-2 text-sm transition-colors duration-200 py-1 ${
      isActive
        ? 'text-primary font-medium'
        : 'text-muted-foreground hover:text-text'
    }`;
  
  const renderNavLinks = (items: NavItem[]) => {
    return items.map(item => {
      const isExpanded = !!expandedItems[item.href];

      if (item.children) {
        return (
          //Section link
          <li key={item.href}>
            <button
              onClick={() => handleToggle(item.href)}
              className="flex w-full items-center justify-between gap-2 py-1 font-normal text-text transition-colors duration-200 hover:text-primary"
            >
              <span className="flex items-center gap-2">
                {item.icon && <Icon name={item.icon} className="h-4 w-4" />}
                <span className="text-md">{item.label}</span>
              </span>
              <Icon
                name="chevron-right"
                className={`h-4 w-4 transition-transform duration-200 ${isExpanded ? 'rotate-90' : ''}`}
              />
            </button>
            <AnimatePresence initial={false}>
              {isExpanded && (
                <motion.ul
                  key="content"
                  initial="collapsed"
                  animate="open"
                  exit="collapsed"
                  variants={{
                    open: { opacity: 1, height: 'auto' },
                    collapsed: { opacity: 0, height: 0 },
                  }}
                  transition={{ duration: 0.3, ease: 'easeInOut' }}
                  className="space-y-1 overflow-hidden border-l border-border pl-5 mt-1 ml-1"
                >
                  {item.children.map(child => (
                    <li key={child.href}>
                      <NavLink
                        to={child.href}
                        className={childNavLinkClasses}
                        onClick={onLinkClick} // 3. Add onClick to child NavLink
                      >
                        {child.label}
                      </NavLink>
                    </li>
                  ))}
                </motion.ul>
              )}
            </AnimatePresence>
          </li>
        );
      }
      
      return (
        <li key={item.href}>
          <NavLink
            to={item.href}
            className="flex items-center gap-2 py-1 text-lg font-semibold"
            onClick={onLinkClick} // 3. Add onClick to top-level NavLink
          >
            {item.icon && <Icon name={item.icon} className="h-4 w-4" />}
            {item.label}
          </NavLink>
        </li>
      );
    });
  };

  return (
    <nav className={`w-full ${className || ''}`}>
      <ul className="space-y-1">
        {renderNavLinks(navItems)}
      </ul>
    </nav>
  );
};

export default LocalSideNav;
</file>

<file path="template/src/components/PageTitleUpdater.tsx">
/**
 * @file PageTitleUpdater.tsx
 * @repository ramme-app-starter
 * @description Updates the browser tab title based on the current route
 * by looking up the title in the active sitemap.
 */
import React, { useEffect } from 'react';
import { useLocation } from 'react-router-dom';
import { useSitemap } from '../contexts/SitemapContext'; // Import our context hook
import type { SitemapEntry } from '../core/sitemap-entry';

// Helper function to recursively find a route by path
const findRouteByPath = (
  sitemap: SitemapEntry[],
  pathname: string,
  basePath: string = '',
): SitemapEntry | null => {
  for (const entry of sitemap) {
    // Construct the full path for the current entry
    const fullPath = `${basePath}/${entry.path}`.replace(/\/+/g, '/'); // Normalize slashes

    if (pathname === fullPath) {
      return entry;
    }

    if (entry.children) {
      const foundInChildren = findRouteByPath(
        entry.children,
        pathname,
        fullPath,
      );
      if (foundInChildren) {
        return foundInChildren;
      }
    }
  }
  return null;
};

const PageTitleUpdater: React.FC = () => {
  const location = useLocation();
  const sitemap = useSitemap(); // Get the sitemap from the current layout's context

  useEffect(() => {
    // Determine the base path prefix based on the current top-level route
    let baseRoutePrefix = '';
    if (location.pathname.startsWith('/dashboard')) {
      baseRoutePrefix = '/dashboard';
    } else if (location.pathname.startsWith('/docs')) {
      baseRoutePrefix = '/docs';
    } else if (location.pathname.startsWith('/settings')) {
      baseRoutePrefix = '/settings';
    }

    const currentRoute = findRouteByPath(sitemap, location.pathname, baseRoutePrefix);

    if (currentRoute) {
      document.title = `Ramme - ${currentRoute.title}`;
    } else {
      // Fallback title if no route is matched (e.g., for 404 or base layout path)
      document.title = 'Ramme - App Starter';
    }
    // Rerun effect whenever the pathname or the sitemap context changes
  }, [location.pathname, sitemap]);

  return null; // This component doesn't render anything itself
};

export default PageTitleUpdater;
</file>

<file path="template/src/components/PageWithSideNav.tsx">
import React, { useState } from 'react';
import { Button, Drawer, Icon } from '@ramme-io/ui';
import LocalSideNav from './LocalSideNav';
import type { NavItem } from './LocalSideNav';

interface PageWithSideNavProps {
  navItems: NavItem[];
  children: React.ReactNode;
  sideNavHeader?: React.ReactNode;
  contentWidth?: 'fixed' | 'full';
}

export const PageWithSideNav: React.FC<PageWithSideNavProps> = ({
  navItems,
  children,
  sideNavHeader,
  contentWidth = 'fixed',
}) => {
  const [isMobileNavOpen, setIsMobileNavOpen] = useState(false);

  const contentContainerClass = contentWidth === 'fixed'
    ? 'max-w-7xl mx-auto'
    : '';

  return (
    <div className="flex flex-col md:flex-row h-full">
      {/* --- Mobile Header --- */}
      <div className="md:hidden p-4 bg-card border-b border-border flex items-center justify-between sticky top-[65px] z-10">
        {sideNavHeader}
        <Button onClick={() => setIsMobileNavOpen(true)} variant="ghost" size="icon">
          <Icon name="panel-left" />
        </Button>
      </div>

      {/* --- Desktop Sidebar --- */}
      <aside className="hidden md:flex flex-col w-64 border-r border-border p-4 sticky top-[65px] h-[calc(100vh-65px)]">
        {sideNavHeader}
        <LocalSideNav navItems={navItems} className="mt-1" />
      </aside>
      
      {/* --- Mobile Drawer --- */}
      <Drawer
        isOpen={isMobileNavOpen}
        onClose={() => setIsMobileNavOpen(false)}
        position="left"
      >
        <div className="p-4">
            <Button 
              onClick={() => setIsMobileNavOpen(false)} 
              variant="ghost" 
              size="icon" 
              className="absolute top-4 right-4"
            >
                <Icon name="x" />
            </Button>
            <div className="mt-2">{sideNavHeader}</div>
            <LocalSideNav navItems={navItems} onLinkClick={() => setIsMobileNavOpen(false)} />
        </div>
      </Drawer>

      {/* --- Main Content --- */}
      <main className="flex-1 p-6 overflow-y-auto">
        <div className={contentContainerClass}>
          {children}
        </div>
      </main>
    </div>
  );
};
</file>

<file path="template/src/components/ProtectedRoute.tsx">
import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { Icon } from '@ramme-io/ui';

const ProtectedRoute: React.FC = () => {
  const { user, isLoading } = useAuth();

  if (isLoading) {
    // You can replace this with a proper loading spinner component
    return (
      <div className="flex h-screen w-full items-center justify-center">
        <Icon name="loader-circle" className="animate-spin h-12 w-12 text-primary" />
      </div>
    );
  }

  if (!user) {
    return <Navigate to="/login" replace />;
  }

  return <Outlet />;
};

export default ProtectedRoute;
</file>

<file path="template/src/components/TemplateSwitcher.tsx">
/**
 * @file TemplateSwitcher.tsx
 * @repository ramme-app-starter
 * @description A reusable component to switch between application templates.
 */
import React from 'react';
import { Link, useLocation } from 'react-router-dom';

const TemplateSwitcher: React.FC = () => {
  const location = useLocation();
  const isDashboard = location.pathname.startsWith('/dashboard');
  const isDocs = location.pathname.startsWith('/docs');
  const isSettings = location.pathname.startsWith('/settings');

  return (
    <div className="bg-muted text-muted-foreground p-1 rounded-md text-sm flex items-center gap-1">
      <Link
        to="/dashboard"
        className={`px-3 py-1 rounded ${
          isDashboard
            ? 'bg-background shadow-sm text-foreground font-semibold'
            : ''
        }`}
      >
        Dashboard
      </Link>
      <Link
        to="/docs"
        className={`px-3 py-1 rounded ${
          isDocs ? 'bg-background shadow-sm text-foreground font-semibold' : ''
        }`}
      >
        Docs
      </Link>
      <Link
        to="/settings"
        className={`px-3 py-1 rounded ${
          isSettings
            ? 'bg-background shadow-sm text-foreground font-semibold'
            : ''
        }`}
      >
        Settings
      </Link>
    </div>
  );
};

export default TemplateSwitcher;
</file>

<file path="template/src/config/navigation.ts">
/**
 * @file navigation.ts
 * @repository ramme-app-starter
 * @description
 * This is the central manifest for all GLOBAL, shared navigation elements.
 * Corrected paths to point within the /settings layout.
 */
import type { ManifestLink } from '../core/manifest-types';

interface AppManifest {
  userMenu: ManifestLink[];
  settingsMenu: ManifestLink[];
  footerLinks: ManifestLink[];
}

export const appManifest: AppManifest = {
  /**
   * Used for the user dropdown menu in the AppHeader.
   * NOTE: Logout is handled by the onClick={logout} in AppHeader,
   * so it's removed from this manifest.
   */
  userMenu: [
    {
      id: 'user.profile',
      // --- FIX: Point to the settings layout ---
      path: '/settings/profile', // Correct path
      title: 'Your Profile',
      icon: 'user',
    },
    {
      id: 'user.settings',
      // --- FIX: Point to the settings layout base ---
      path: '/settings', // Correct path
      title: 'Settings',
      icon: 'settings',
    },
    // --- REMOVED: Logout link is redundant ---
    // {
    //   id: 'user.logout',
    //   path: '/login', // Was pointing here, but onClick is better
    //   title: 'Log Out',
    //   icon: 'logOut',
    // },
  ],

  /**
   * Used for a dedicated settings page (e.g., /settings/...)
   * These paths were already correct.
   */
  settingsMenu: [
    {
      id: 'settings.account',
      path: '/settings/profile',
      title: 'Account',
      icon: 'user',
    },
    {
      id: 'settings.billing',
      path: '/settings/billing',
      title: 'Billing',
      icon: 'creditCard',
    },
    {
      id: 'settings.team',
      path: '/settings/team',
      title: 'Team Members',
      icon: 'users',
    },
  ],

  /**
   * Used in the AppFooter. (Placeholders)
   */
  footerLinks: [
    {
      id: 'footer.help',
      path: '/help',
      title: 'Help Center',
    },
    {
      id: 'footer.terms',
      path: '/terms',
      title: 'Terms of Service',
    },
  ],
};
</file>

<file path="template/src/contexts/AuthContext.tsx">
import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { mockUsers, type User } from '../data/mockUsers';

interface AuthContextType {
  user: User | null;
  login: (username: string, password?: string) => Promise<User | null>;
  logout: () => void;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    // Check for a logged-in user in localStorage on initial load
    const storedUser = localStorage.getItem('authUser');
    if (storedUser) {
      setUser(JSON.parse(storedUser));
    }
    setIsLoading(false);
  }, []);

  const login = async (username: string, password?: string): Promise<User | null> => {
    // Simulate API call
    return new Promise((resolve) => {
      setTimeout(() => {
        const foundUser = mockUsers.find(
          u => u.username === username && u.password === password
        );
        if (foundUser) {
          const userToStore = { ...foundUser };
          delete userToStore.password; // Don't store password
          localStorage.setItem('authUser', JSON.stringify(userToStore));
          setUser(userToStore);
          resolve(userToStore);
        } else {
          resolve(null);
        }
      }, 500);
    });
  };

  const logout = () => {
    localStorage.removeItem('authUser');
    setUser(null);
  };

  return (
    <AuthContext.Provider value={{ user, login, logout, isLoading }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
</file>

<file path="template/src/contexts/SitemapContext.tsx">
/**
 * @file SitemapContext.tsx
 * @repository ramme-app-starter
 * @description This file implements a React Context for the sitemap.
 *
 * STRATEGIC IMPORTANCE:
 * This context is the "plumbing" that makes our swappable layout
 * strategy possible. It allows a top-level layout component (like
 * `DashboardLayout.tsx` or `DocsLayout.tsx`) to "provide" its specific
 * sitemap array (e.g., `dashboard.sitemap.ts`) to all of its children.
 *
 * Any component deep in the tree (like a sidebar, breadcrumbs, or page
 * header) can then "consume" this sitemap data using the `useSitemap`
 * hook to render the correct navigation, titles, and icons.
 *
 * This effectively decouples the navigation UI from the sitemap data,
 * allowing us to change the entire application's IA simply by changing
 * the data provided by the `SitemapProvider`.
 */

import { createContext, useContext } from 'react';
// Import the canonical "schema" for a sitemap entry
import type { SitemapEntry } from '../core/sitemap-entry';

// 1. Create the context
// We initialize it with an empty array as a safe default.
// This context will hold the sitemap array specific to the active layout.
const SitemapContext = createContext<SitemapEntry[]>([]);

/**
 * A custom hook to easily access the active sitemap array.
 * This abstracts the `useContext` logic and provides a clean API
 * for components that need to read the sitemap.
 *
 * @returns {SitemapEntry[]} The sitemap array provided by the nearest
 * `SitemapProvider`.
 */
export const useSitemap = () => {
  const context = useContext(SitemapContext);

  // This is a critical developer-friendly check.
  // If a component tries to call `useSitemap` outside of a layout
  // that provides the context, we throw an explicit error.
  if (context === undefined) {
    throw new Error('useSitemap must be used within a SitemapProvider');
  }
  
  return context;
};

// 3. Export the Provider
// We export the Provider component directly. This is what our layout
// components will use to wrap their content and supply the sitemap data.
//
// Example Usage (in a layout file):
// <SitemapProvider value={dashboardSitemap}>
//   <AppHeader />
//   <AppSidebar />
//   <Outlet />
// </SitemapProvider>
export const SitemapProvider = SitemapContext.Provider;
</file>

<file path="template/src/core/route-generator.tsx">
/**
 * @file route-generator.tsx
 * @description This file is the core engine of the Sitemap-Driven Architecture.
 * Its purpose is to dynamically generate all application routes by reading directly
 * from a designer-friendly `sitemap` array. This abstracts all routing logic
 * away from our designers, empowering them to manage the app's structure from
 * a single, simple configuration file.
 */

import { Route, Navigate } from 'react-router-dom';
// CORRECTED IMPORT: Point to the canonical type definition
import type { SitemapEntry } from './sitemap-entry';

/**
 * Recursively generates React Router `<Route>` components from a sitemap array.
 * @param {SitemapEntry[]} routes - The array of sitemap entries to process.
 * @returns {JSX.Element[]} An array of React Router `<Route>` components.
 */

export const generateRoutes = (routes: SitemapEntry[]) => {
  return routes.map((route) => {
    // Check if the current route is a "parent" route with children
    if (route.children && route.children.length > 0) {
      // Get the path of the first child to use for redirection
      const firstChildPath = route.children[0].path;
      
      return (
        // Create the parent <Route> (e.g., /data)
        <Route key={route.id} path={route.path} element={<route.component />}>
          
          {/* PROFESSIONAL PROTOTYPING: This is a key feature for DX.
            It creates an "index" route that automatically redirects the user
            from the parent path (e.g., /data) to its first child (e.g., /data/grid).
            This prevents designers from ever seeing a blank parent page.
          */}
          <Route index element={<Navigate to={firstChildPath} replace />} />
          
          {/* Recursively generate all nested child routes */}
          {generateRoutes(route.children)}
        </Route>
      );
    }

    // Standard case: This is a simple route with no children.
    return <Route key={route.id} path={route.path} element={<route.component />} />;
  });
};
</file>

<file path="template/src/core/sitemap-entry.ts">
/**
 * @file sitemap-entry.ts
 * @repository ramme-app-starter
 * @description This file defines the canonical TypeScript interface for a single
 * sitemap entry. It is the "schema" or "contract" that governs the entire
 * Sitemap-Driven Architecture.
 *
 * STRATEGIC IMPORTANCE:
 * 1. Designer DX: It provides strict type-safety and autocompletion for any
 * designer editing a `sitemap.ts` file, dramatically lowering the risk of errors.
 * 2. Repo-Linking: It directly imports `IconName` from `@ramme-io/ui`, creating
 * a type-safe link between our starter kit and our component library.
 * 3. AI-Ready: This interface is the precise data structure that the AI Assistant
 * in the (private) `ramme-app-builder` will be trained to generate.
 * The "Architect" phase of the A.D.A.P.T. Framework will result in the
 * AI creating an array of these objects.
 */

// Import the type definition for all available icon names from our open-source
// UI library. This is a critical integration point.
import { type IconName } from '@ramme-io/ui';

/**
 * Defines the required shape for a single entry in any `sitemap.ts` file.
 */
export interface SitemapEntry {
  /**
   * A unique string identifier.
   * Used by React as the `key` prop during route generation.
   * e.g., 'dashboard.home'
   */
  id: string;

  /**
   * The URL path segment for this route.
   * e.g., 'home', 'users', 'settings'
   */
  path: string;

  /**
   * The human-readable name for the route.
   * Used to populate navigation links, breadcrumbs, and page titles.
   * e.g., 'Home', 'User Management'
   */
  title: string;

  /**
   * (Optional) The name of the icon to display in the navigation.
   * This MUST be a valid `IconName` from the `@ramme-io/ui` library.
   * e.g., 'home', 'users', 'settings'
   */
  icon?: IconName;

  /**
   * The actual React component to render when this route is active.
   * e.g., DashboardPage, SettingsPage
   */
  component: React.ComponentType;

  /**
   * (Optional) An array of nested `SitemapEntry` objects.
   * This is the property that enables recursive, nested navigation
   * (e.g., /settings/profile, /settings/billing).
   */
  children?: SitemapEntry[];
}
</file>

<file path="template/src/data/mock-charts.ts">
// src/data/mock-charts.ts
import type { ChartData } from 'chart.js';

// The centralized registry of "Heavy Data"
export const MOCK_CHART_DATA: Record<string, ChartData<any>> = {
  
  // ID: energy_history
  energy_history: {
    labels: ["12am", "4am", "8am", "12pm", "4pm", "8pm"],
    datasets: [
      {
        label: "Energy (kWh)",
        data: [12, 19, 3, 5, 2, 3],
        borderColor: "#3b82f6",
        backgroundColor: "rgba(59, 130, 246, 0.5)",
        tension: 0.4
      }
    ]
  },

  // ID: server_load
  server_load: {
    labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
    datasets: [
      {
        label: "CPU Load %",
        data: [45, 52, 38, 70, 65, 30, 40],
        borderColor: "#10b981",
        backgroundColor: "rgba(16, 185, 129, 0.5)"
      }
    ]
  }
};

export const getChartData = (id: string) => {
  return MOCK_CHART_DATA[id] || null;
};
</file>

<file path="template/src/data/mockLedger.ts">
export interface LedgerEntry {
  category: 'Revenue' | 'Cost of Goods Sold' | 'Operating Expenses';
  account: string;
  actual: number;
  budget: number;
}

export const mockLedgerData: LedgerEntry[] = [
  // --- Raw Data Only ---
  { category: 'Revenue', account: 'Product Sales', actual: 125000, budget: 120000 },
  { category: 'Revenue', account: 'Service Fees', actual: 32000, budget: 35000 },
  { category: 'Cost of Goods Sold', account: 'Raw Materials', actual: -45000, budget: -42000 },
  { category: 'Cost of Goods Sold', account: 'Direct Labor', actual: -28000, budget: -30000 },
  { category: 'Operating Expenses', account: 'Marketing', actual: -12000, budget: -10000 },
  { category: 'Operating Expenses', account: 'Salaries & Wages', actual: -55000, budget: -55000 },
  { category: 'Operating Expenses', account: 'Rent & Utilities', actual: -8500, budget: -8000 },
];
</file>

<file path="template/src/data/mockUsers.ts">
export interface User {
  id: number;
  name: string;
  email: string;
  username: string; // <-- Add this
  password?: string; // <-- Add this (optional for security)
  role: 'Admin' | 'Editor' | 'Viewer';
  status: 'Active' | 'Pending' | 'Banned';
  createdAt: string; 
}

// NOTE: In a real app, passwords would be hashed. This is for simulation only.
export const mockUsers: User[] = [
  { id: 1, name: 'Jane Cooper', email: 'jane.cooper@example.com', username: 'jane', password: 'password', role: 'Admin', status: 'Active', createdAt: '2023-01-15T10:00:00Z' },
  { id: 2, name: 'Cody Fisher', email: 'cody.fisher@example.com', username: 'cody', password: 'password', role: 'Editor', status: 'Active', createdAt: '2023-02-20T11:30:00Z' },
  { id: 3, name: 'Esther Howard', email: 'esther.howard@example.com', username: 'esther', password: 'password', role: 'Viewer', status: 'Pending', createdAt: '2023-03-05T09:15:00Z' },
  // ... other users
];
</file>

<file path="template/src/hooks/useAction.ts">
// src/hooks/useAction.ts
import { useCallback } from 'react';
import { useMqtt } from '../contexts/MqttContext';
import { appManifest } from '../config/app.manifest';

export const useAction = () => {
  const { publish, isConnected } = useMqtt();
  const { config, domain } = appManifest;

  const sendAction = useCallback(async (entityId: string, value: any) => {
    // 1. Find the Entity definition
    const entity = domain.entities.find(e => e.id === entityId);
    if (!entity) {
      console.warn(`[Action] Entity not found: ${entityId}`);
      return;
    }

    // 2. Find the Primary Signal (The target of the action)
    const signalId = entity.signals[0];
    const signal = domain.signals.find(s => s.id === signalId);

    if (!signal) {
      console.warn(`[Action] No signal linked to entity: ${entityId}`);
      return;
    }

    // 3. EXECUTE based on Mode & Source
    
    // --- Mock Mode ---
    if (config.mockMode) {
      console.log(`%c[Mock Action] Setting ${entity.name} to:`, 'color: #10b981; font-weight: bold;', value);
      // In a real app, we would update the local cache optimistically here
      return;
    }

    // --- Live Mode (MQTT) ---
    if (signal.source === 'mqtt' && signal.topic) {
      if (!isConnected) {
        console.warn('[Action] Cannot send: MQTT disconnected');
        return;
      }
      const payload = typeof value === 'object' ? JSON.stringify(value) : String(value);
      console.log(`[MQTT] Publishing to '${signal.topic}': ${payload}`);
      publish(signal.topic, payload);
    }

    // --- Live Mode (HTTP) ---
    if (signal.source === 'http' && signal.endpoint) {
      console.log(`[HTTP] POST to ${signal.endpoint}:`, value);
      // Note: This will likely fail (404/405) against a static .json file, 
      // but this is the correct code for a real API.
      try {
        await fetch(signal.endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ id: signal.id, value })
        });
      } catch (err) {
        // We expect this to fail on the static demo, so we suppress the error alert
        console.log('[HTTP] (Simulation) Request sent.'); 
      }
    }

  }, [config.mockMode, isConnected, publish, domain]);

  return { sendAction };
};
</file>

<file path="template/src/hooks/useCrudLocalStorage.ts">
import { useState, useCallback } from 'react';

/**
 * A generic hook for performing CRUD (Create, Read, Update, Delete)
 * operations on an array of items stored in the browser's localStorage.
 *
 * @param storageKey The unique key for this data in localStorage.
 * @param initialData The default data to seed localStorage with if it's empty.
 * @returns An object with the current data and functions to manipulate it.
 */
export const useCrudLocalStorage = <T extends { id: any }>(
  storageKey: string,
  initialData: T[]
) => {
  const [data, setData] = useState<T[]>(() => {
    try {
      const item = window.localStorage.getItem(storageKey);
      if (item) {
        // If data exists in localStorage, parse and return it.
        return JSON.parse(item);
      } else {
        // Otherwise, seed localStorage with the initial data.
        window.localStorage.setItem(storageKey, JSON.stringify(initialData));
        return initialData;
      }
    } catch (error) {
      console.error("Error reading from localStorage", error);
      return initialData;
    }
  });

  const createItem = useCallback((newItem: Omit<T, 'id'>) => {
    setData(prevData => {
      // Find the highest existing ID to safely create a new one.
      const maxId = prevData.reduce((max, item) => (item.id > max ? item.id : max), 0);
      const fullNewItem = { ...newItem, id: maxId + 1 } as T;
      
      const updatedData = [...prevData, fullNewItem];
      window.localStorage.setItem(storageKey, JSON.stringify(updatedData));
      return updatedData;
    });
  }, [storageKey]);

  const updateItem = useCallback((updatedItem: T) => {
    setData(prevData => {
      const updatedData = prevData.map(item =>
        item.id === updatedItem.id ? updatedItem : item
      );
      window.localStorage.setItem(storageKey, JSON.stringify(updatedData));
      return updatedData;
    });
  }, [storageKey]);

  const deleteItem = useCallback((id: T['id']) => {
    setData(prevData => {
      const updatedData = prevData.filter(item => item.id !== id);
      window.localStorage.setItem(storageKey, JSON.stringify(updatedData));
      return updatedData;
    });
  }, [storageKey]);

  return { data, createItem, updateItem, deleteItem };
};
</file>

<file path="template/src/hooks/useDevTools.ts">
import { useState, useEffect, useCallback } from 'react';

// Keys for localStorage to persist state across reloads
const STORAGE_KEY_GHOST_MODE = 'ramme_dev_ghost_mode';

export interface DevToolsState {
  isGhostMode: boolean;
  toggleGhostMode: () => void;
}

/**
 * @hook useDevTools
 * @description
 * Manages the state of development tools within the running application.
 * It persists preferences (like "Ghost Mode") to localStorage so debugging
 * sessions aren't interrupted by refreshes.
 */
export const useDevTools = (): DevToolsState => {
  // 1. Lazy initializer to read from storage immediately
  const [isGhostMode, setIsGhostMode] = useState<boolean>(() => {
    if (typeof window === 'undefined') return false;
    try {
      const stored = window.localStorage.getItem(STORAGE_KEY_GHOST_MODE);
      return stored ? JSON.parse(stored) : false;
    } catch (e) {
      console.warn('Failed to read dev tools state', e);
      return false;
    }
  });

  // 2. Toggle Handler with Persistence
  const toggleGhostMode = useCallback(() => {
    setIsGhostMode((prev) => {
      const newValue = !prev;
      try {
        window.localStorage.setItem(STORAGE_KEY_GHOST_MODE, JSON.stringify(newValue));
      } catch (e) {
        console.warn('Failed to save dev tools state', e);
      }
      return newValue;
    });
  }, []);

  // 3. Keyboard Shortcut (Optional but Pro-Level)
  // Ctrl + Shift + G to toggle Ghost Mode
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.ctrlKey && e.shiftKey && e.key === 'G') {
        e.preventDefault();
        toggleGhostMode();
      }
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [toggleGhostMode]);

  return { isGhostMode, toggleGhostMode };
};
</file>

<file path="template/src/hooks/useMockChat.ts">
import { useState, useCallback } from 'react';
import { useToast } from '@ramme-io/ui';

export interface ChatMessage {
  id: string;
  author: string;
  content: string;
  isUser: boolean;
  suggestions?: string[];
  loading?: boolean;
}

export const useMockChat = () => {
  // 1. FIX: Destructure 'addToast' (the correct name from your Provider)
  const { addToast } = useToast(); 
  
  const [isLoading, setIsLoading] = useState(false);
  const [messages, setMessages] = useState<ChatMessage[]>([
    { 
      id: '1', 
      author: 'Bodewell AI', 
      content: 'Hello! I am monitoring your 12 active devices. How can I help?', 
      isUser: false, 
      suggestions: ['Check System Status', 'Turn off Living Room AC']
    }
  ]);

  const sendMessage = useCallback((content: string) => {
    if (!content.trim()) return;

    // Add User Message
    const userMsg = { id: Date.now().toString(), author: 'You', content, isUser: true };
    setMessages(prev => [...prev, userMsg]);
    setIsLoading(true);

    // Simulate AI Delay
    setTimeout(() => {
      setIsLoading(false);
      
      // Mock Response Logic
      const aiMsg = {
        id: (Date.now() + 1).toString(),
        author: 'Bodewell AI',
        content: `I received your command: "${content}". Executing protocol...`,
        isUser: false,
        suggestions: ['View Logs', 'Undo Action']
      };
      
      setMessages(prev => [...prev, aiMsg]);
      
      // 2. FIX: Call addToast with separate arguments, not an object
      // Signature: addToast(message, type, duration)
      if (addToast) {
        addToast(
          `Successfully processed: ${content}`, // message
          'success',                            // type
          3000                                  // duration
        );
      }
      
    }, 1500);
  }, [addToast]);

  return {
    messages,
    isLoading,
    sendMessage
  };
};
</file>

<file path="template/src/hooks/useSignal.ts">
import { useState, useEffect } from 'react';
import { useMqtt } from '../contexts/MqttContext';
import type { Signal } from '../types/signal';

interface SignalConfig<T> {
  initialValue?: T;
  min?: number;     
  max?: number;
  interval?: number; // Mock mode only
  unit?: string;
  topic?: string;    // Real mode only
}

export function useSignal<T = any>(signalId: string, config: SignalConfig<T> = {}): Signal<T> {
  const { 
    initialValue, 
    min = -Infinity, 
    max = Infinity, 
    interval = 2000, 
    unit,
    topic 
  } = config;

  const { subscribe, unsubscribe, lastMessage, isConnected } = useMqtt();

  const [signal, setSignal] = useState<Signal<T>>({
    id: signalId,
    value: initialValue as T,
    unit: unit,
    timestamp: Date.now(),
    status: 'fresh',
    max: max 
  });

  // --- REAL MODE: MQTT ---
  useEffect(() => {
    if (!topic || !isConnected) return;
    subscribe(topic);
    return () => unsubscribe(topic);
  }, [topic, isConnected, subscribe, unsubscribe]);

  useEffect(() => {
    if (!topic || !lastMessage[topic]) return;

    const rawValue = lastMessage[topic];
    let parsedValue: any = rawValue;

    // Auto-parse numbers and booleans
    if (!isNaN(Number(rawValue))) parsedValue = Number(rawValue);
    else if (rawValue.toLowerCase() === 'true' || rawValue === 'on') parsedValue = true;
    else if (rawValue.toLowerCase() === 'false' || rawValue === 'off') parsedValue = false;

    setSignal(prev => ({
        ...prev,
        value: parsedValue,
        timestamp: Date.now(),
        status: 'fresh'
    }));
  }, [lastMessage, topic]);

  // --- MOCK MODE: SIMULATION ---
  useEffect(() => {
    if (topic) return; // Disable mock if topic exists

    const timer = setInterval(() => {
      setSignal(prev => {
        let newValue: any = prev.value;
        if (typeof prev.value === 'number') {
            const variance = (Math.random() - 0.5) * 2; 
            let nextNum = prev.value + variance;
            if (min !== undefined) nextNum = Math.max(min, nextNum);
            if (max !== undefined) nextNum = Math.min(max, nextNum);
            newValue = Number(nextNum.toFixed(1));
        }
        return { ...prev, value: newValue, timestamp: Date.now(), status: 'fresh' };
      });
    }, interval); 

    return () => clearInterval(timer);
  }, [topic, min, max, interval]);

  return signal;
}
</file>

<file path="template/src/layouts/DataLayout.tsx">
import React from 'react';
import { Outlet, useLocation } from 'react-router-dom';
import { PageWithSideNav } from '../components/PageWithSideNav';
import { useSitemap } from '../contexts/SitemapContext'; // Import the custom hook

const DataLayout: React.FC = () => {
  const location = useLocation();
  const sitemap = useSitemap(); // Consume the sitemap from context
  const isDocsTemplate = location.pathname.startsWith('/docs');

  if (isDocsTemplate) {
    const dataSitemapSection = sitemap.find(item => item.id === 'data');
    
    const navItems = (dataSitemapSection?.children || []).map(child => ({
      label: child.title,
      href: child.path,
      icon: child.icon,
    }));

    return (
      <PageWithSideNav
        sideNavHeader={
          <h2 className="text-lg font-semibold tracking-tight mb-2">
            {dataSitemapSection?.title || 'Data'}
          </h2>
        }
        navItems={navItems}
      >
        <Outlet />
      </PageWithSideNav>
    );
  }

  return <Outlet />;
};

export default DataLayout;
</file>

<file path="template/src/layouts/SideNavLayout.tsx">
import React from 'react';
import { Outlet } from 'react-router-dom';
import { PageWithSideNav } from '../components/PageWithSideNav';
import type { NavItem } from '../components/LocalSideNav';

interface SideNavLayoutProps {
  navItems: NavItem[];
  sideNavHeader?: React.ReactNode;
  contentWidth?: 'fixed' | 'full';
}

const SideNavLayout: React.FC<SideNavLayoutProps> = ({
  navItems,
  sideNavHeader,
  contentWidth = 'fixed',
}) => {
  return (
    <PageWithSideNav
      navItems={navItems}
      sideNavHeader={sideNavHeader}
      contentWidth={contentWidth}
    >
      <Outlet />
    </PageWithSideNav>
  );
};

export default SideNavLayout;
</file>

<file path="template/src/pages/prototypes/ItemSelectorPage.tsx">
import { useState } from 'react';
import { Button, PageHeader } from '@ramme-io/ui';
import { AddItemsModal } from '../../components/AddItemsModal';



const ItemSelectorPage = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);

  return (
    <div>
      <PageHeader
        title="Prototype: Item Selection"
        description="This page demonstrates the 'Add Items' modal component."
      />
      <div className="mt-8">
        <Button onClick={() => setIsModalOpen(true)}>
          Open Modal
        </Button>
      </div>

      <AddItemsModal
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)}
      />
    </div>
  );
};

export default ItemSelectorPage;
</file>

<file path="template/src/pages/settings/BillingPage.tsx">
import React from 'react';
// --- 1. Import the new generic page ---
import GenericContentPage from '../GenericContentPage'; 

// A simple page component for settings
const BillingPage: React.FC = () => {
  return <GenericContentPage pageTitle="Billing & Subscriptions" />;
};

export default BillingPage;
</file>

<file path="template/src/pages/settings/ProfilePage.tsx">
import React from 'react';
// --- 1. Import the new generic page ---
import GenericContentPage from '../GenericContentPage'; 

const ProfilePage: React.FC = () => {
  // --- 2. Use the generic page component ---
  return <GenericContentPage pageTitle="Profile Settings" />;
};

export default ProfilePage;
</file>

<file path="template/src/pages/settings/TeamPage.tsx">
import React from 'react';
// --- 1. Import the new generic page ---
import GenericContentPage from '../GenericContentPage'; 

// A simple page component for settings
const TeamPage: React.FC = () => {
  return <GenericContentPage pageTitle="Team Management" />;
};

export default TeamPage;
</file>

<file path="template/src/pages/styleguide/sections/charts/ChartsSection.tsx">
// src/pages/styleguide/sections/charts/ChartsSection.tsx
import React from 'react';
import {
  BarChart,
  LineChart,
  PieChart,
  ChartWithTable,
  SectionHeader
} from '@ramme-io/ui';

// Mock data included locally for the style guide
const mockChartData = [
  { name: 'Jan', uv: 4000, pv: 2400, amt: 2400 },
  { name: 'Feb', uv: 3000, pv: 1398, amt: 2210 },
  { name: 'Mar', uv: 2000, pv: 9800, amt: 2290 },
  { name: 'Apr', uv: 2780, pv: 3908, amt: 2000 },
  { name: 'May', uv: 1890, pv: 4800, amt: 2181 },
  { name: 'Jun', uv: 2390, pv: 3800, amt: 2500 },
];

const mockPieChartData = [
  { name: 'Group A', value: 400 },
  { name: 'Group B', value: 300 },
  { name: 'Group C', value: 300 },
  { name: 'Group D', value: 200 },
];


const ChartsSection: React.FC = () => {
  return (
    <div className="space-y-8">
      <SectionHeader title="Charts & Data Visualization" />
      <p className="text-muted-foreground -mt-6">
        These components are theme-aware wrappers around the Recharts library. For convenience, the `ChartWithTable` component automatically provides a menu to view the underlying data in a table.
      </p>

      {/* Bar Chart with Table View */}
      <div id="charts-bar" className="scroll-mt-20">
        <ChartWithTable
          title="Monthly Revenue"
          data={mockChartData}
          tableHeaders={[
            { key: 'name', label: 'Month' },
            { key: 'pv', label: 'Page Views' },
            { key: 'uv', label: 'Unique Visitors' },
          ]}
        >
          <BarChart
            data={mockChartData}
            dataKeyX="name"
            // FIX: Pass only the keys as an array of strings
            barKeys={['pv', 'uv']}
          />
        </ChartWithTable>
      </div>

      {/* Line Chart with Table View */}
      <div id="charts-line" className="scroll-mt-20">
        <ChartWithTable
          title="User Growth"
          data={mockChartData}
          tableHeaders={[
            { key: 'name', label: 'Month' },
            { key: 'uv', label: 'UV' },
            { key: 'pv', label: 'PV' },
          ]}
        >
          <LineChart
            data={mockChartData}
            dataKeyX="name"
            // FIX: Pass only the keys as an array of strings
            lineKeys={['uv', 'pv']}
          />
        </ChartWithTable>
      </div>

      {/* Pie Chart with Table View */}
      <div id="charts-pie" className="scroll-mt-20">
      <ChartWithTable
        title="Data Distribution"
        data={mockPieChartData}
        tableHeaders={[
          { key: 'name', label: 'Group' },
          { key: 'value', label: 'Value' },
        ]}
      >
        <PieChart data={mockPieChartData} dataKey="value" nameKey="name" />
      </ChartWithTable>
      </div>
    </div>
  );
};

export default ChartsSection;
</file>

<file path="template/src/pages/styleguide/sections/colors/ColorsSection.tsx">
// src/pages/styleguide/sections/colors/ColorsSection.tsx
import React from 'react';
import { Card, SectionHeader } from '@ramme-io/ui';

// Sub-component for your themed colors
const ThemeColorSwatch: React.FC<{ name: string; utility: string; }> = ({ name, utility }) => {
  const bgClass = utility.startsWith('text-') ? 'bg-background' : `bg-${utility.split('-')[1]}`;
  const textClass = utility.startsWith('text-') ? 'text-text' : '';
  const borderClass = utility.startsWith('border-') ? 'border-4 border-border' : 'border border-border';

  return (
    <div className="flex flex-col w-36 text-center">
      <div className={`h-24 w-full rounded-lg flex items-center justify-center ${bgClass} ${borderClass}`}>
        {utility.startsWith('text-') && <span className={`text-2xl font-bold ${textClass}`}>Aa</span>}
      </div>
      <div className="mt-2">
        <p className="font-semibold text-text">{name}</p>
        <p className="text-sm text-muted-foreground font-mono">{utility}</p>
      </div>
    </div>
  );
};

// Sub-component for default Tailwind colors
const TailwindColorSwatch: React.FC<{ name: string; className: string; }> = ({ name, className }) => {
  return (
    <div className="flex items-center space-x-4">
      <div className={`w-10 h-10 rounded-full shrink-0 ${className}`} />
      <div className="text-sm font-medium text-text">{name}</div>
    </div>
  );
};

// The main component for the full colors page
const ColorsSection: React.FC = () => {
  const themeColors = [
    { name: 'Primary', utility: 'bg-primary' },
    { name: 'Secondary', utility: 'bg-secondary' },
    { name: 'Accent', utility: 'bg-accent' },
    { name: 'Text', utility: 'text-text' },
    { name: 'Background', utility: 'bg-background' },
    { name: 'Card', utility: 'bg-card' },
    { name: 'Border', utility: 'border-border' },
    { name: 'Hover', utility: 'bg-bg-hover' },
  ];

  const defaultColors = [
    { name: 'Slate', className: 'bg-slate-500' },
    { name: 'Gray', className: 'bg-gray-500' },
    { name: 'Zinc', className: 'bg-zinc-500' },
    { name: 'Neutral', className: 'bg-neutral-500' },
    { name: 'Stone', className: 'bg-stone-500' },
    { name: 'Red', className: 'bg-red-500' },
    { name: 'Orange', className: 'bg-orange-500' },
    { name: 'Amber', className: 'bg-amber-500' },
    { name: 'Yellow', className: 'bg-yellow-500' },
    { name: 'Lime', className: 'bg-lime-500' },
    { name: 'Green', className: 'bg-green-500' },
    { name: 'Emerald', className: 'bg-emerald-500' },
    { name: 'Teal', className: 'bg-teal-500' },
    { name: 'Cyan', className: 'bg-cyan-500' },
    { name: 'Sky', className: 'bg-sky-500' },
    { name: 'Blue', className: 'bg-blue-500' },
    { name: 'Indigo', className: 'bg-indigo-500' },
    { name: 'Violet', className: 'bg-violet-500' },
    { name: 'Purple', className: 'bg-purple-500' },
    { name: 'Fuchsia', className: 'bg-fuchsia-500' },
    { name: 'Pink', className: 'bg-pink-500' },
    { name: 'Rose', className: 'bg-rose-500' },
  ];

  return (
    <div className="space-y-8">
       <SectionHeader title="Color Palette" />
       <p className="text-muted-foreground -mt-6">A showcase of the dynamic, theme-aware colors and the default Tailwind CSS color palette available for use.</p>
      
      <Card id="colors-theme" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-2 text-text">Themed Color Palette</h3>
        <p className="text-muted-foreground mb-8">
          These colors are defined by the current theme and will change dynamically when you switch themes. These colors are defined in the theme and can be applied using utility classes like bg-*, text-*, and border-*.
        </p>
        <div className="flex flex-wrap justify-center gap-x-8 gap-y-12">
          {themeColors.map((color) => (
            <ThemeColorSwatch
              key={color.name}
              name={color.name}
              utility={color.utility}
            />
          ))}
        </div>
      </Card>
      
      <Card id="colors-tailwind" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-2 text-text">Default Tailwind Palette</h3>
        <p className="text-muted-foreground mb-8">
          A summary of the static default colors built into Tailwind CSS. Each color typically comes in 10 shades (e.g., `slate-50` to `slate-900`).
          You can view the{' '}
          <a
            href="https://tailwindcss.com/docs/customizing-colors"
            target="_blank"
            rel="noopener noreferrer"
            className="text-primary hover:underline"
          >
            full palette on the official documentation site
          </a>.
        </p>
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-x-6 gap-y-8">
          {defaultColors.map((color) => (
            <TailwindColorSwatch
              key={color.name}
              name={color.name}
              className={color.className}
            />
          ))}
        </div>
      </Card>
    </div>
  );
};

export default ColorsSection;
</file>

<file path="template/src/pages/styleguide/sections/elements/ElementsSection.tsx">
// src/pages/styleguide/sections/elements/ElementsSection.tsx
import React, { useState, memo } from 'react';
import {
  Card,
  Avatar,
  Badge,
  StatCard,
  ToggleSwitch,
  ActivityFeed,
  SectionHeader
} from '@ramme-io/ui';

// --- Mock Data for ActivityFeed ---
const mockActivity = [
  {
    id: 1,
    author: 'Olivia Rhye',
    action: 'Upcoming deprecation of GPU machine type',
    timestamp: new Date(Date.now() - 20 * 60 * 60 * 1000) // 20 hours ago
  },
  {
    id: 2,
    author: 'Phoenix Baker',
    action: 'Update on GitHub Copilot consumptive billing',
    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000) // Yesterday
  },
  {
    id: 3,
    author: 'Lana Steiner',
    action: 'GitHub Actions: New APIs and windows-latest migration',
    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000) // 2 days ago
  },
];

// Memoize the sections that don't need to re-render.
const AvatarsSection = memo(() => (
  <Card id="elements-avatars" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Avatars</h3>
    <div className="flex flex-wrap items-center gap-4">
      <Avatar name="Bode Ditko" size="sm" />
      <Avatar name="Jane Doe" size="md" />
      <Avatar name="John Smith" size="lg" />
      <Avatar name="Ramme UI" src="https://github.com/ramme-io.png" size="lg" />
    </div>
  </Card>
));

const BadgesSection = memo(() => (
  <Card id="elements-badges" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Badges</h3>
    <div className="flex flex-wrap items-center gap-4">
      <Badge variant="primary">Primary</Badge>
      <Badge variant="secondary">Secondary</Badge>
      <Badge variant="success">Success</Badge>
      <Badge variant="danger">Danger</Badge>
    </div>
  </Card>
));

const StatCardsSection = memo(() => (
  <Card id="elements-stats" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Stat Cards</h3>
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <StatCard
        title="Total Sales"
        value="$12,345"
        icon="dollar-sign"
        changeText="+5.2% since last week"
        changeDirection="positive"
        footerText="Aggregated by day"
      />
      <StatCard
        title="New Users"
        value="1,234"
        icon="users"
        changeText="-1.8% since last month"
        changeDirection="negative"
      />
      <StatCard
        title="Open Tickets"
        value="56"
        icon="inbox"
      />
    </div>
  </Card>
));

const ActivityFeedSection = memo(() => (
  <Card id="elements-activity" className="p-6 scroll-mt-20">
    <h3 className="text-2xl font-semibold mb-4 text-text">Activity Feed</h3>
    <p className="text-muted-foreground mb-6">
      Displays a chronological list of events or changes.
    </p>
    <div className="max-w-md">
      <ActivityFeed items={mockActivity} title="Latest Changes" />
    </div>
  </Card>
));


const ElementsSection: React.FC = () => {
  const [isToggled, setIsToggled] = useState(true);

  return (
   <div className="space-y-8">
      <SectionHeader title="UI Elements" />
      <p className="text-muted-foreground -mt-6">
        These are small, atomic components that can be composed to build more complex UI patterns.
      </p>

      <AvatarsSection />
      <BadgesSection />
      <StatCardsSection />
      <ActivityFeedSection />

      <Card id="elements-toggle" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Toggle Switches</h3>
        <div className="flex flex-col space-y-4">
          <ToggleSwitch
            label="Enable Notifications"
            checked={isToggled}
            onChange={setIsToggled}
          />
          <ToggleSwitch
            label="Marketing Emails"
            checked={false}
            onChange={() => {}}
          />
          <ToggleSwitch
            label="Disabled Toggle"
            checked={false}
            onChange={() => {}}
            disabled
          />
        </div>
      </Card>
    </div>
  );
};

export default ElementsSection;
</file>

<file path="template/src/pages/styleguide/sections/feedback/FeedbackSection.tsx">
// src/pages/styleguide/sections/feedback/FeedbackSection.tsx
import React from 'react';
import {
  Card,
  Button,
  TippyTooltip,
  EmptyState,
  Alert,
  useToast,
  SectionHeader
} from '@ramme-io/ui';

const FeedbackSection: React.FC = () => {
  const { addToast } = useToast();

  const handleEmptyStateClearSearch = () => {
    addToast('Search cleared!', 'info');
  };
  const handleEmptyStateAddItem = () => {
    addToast('Navigating to "Add Item" page...', 'success');
  };

  return (
    <div className="space-y-8">
      <SectionHeader title="Feedback Components" />
      <p className="text-muted-foreground -mt-6">
        Use these components to provide feedback to the user in response to their actions or system events.
      </p>

      {/* Alerts */}
      <Card id="feedback-alerts" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Alerts</h3>
        <div className="space-y-4">
          <Alert variant="info" title="Informational Message">
            This is a standard informational alert.
          </Alert>
          <Alert variant="success" title="Success!">
            Your action was completed successfully.
          </Alert>
          <Alert variant="warning" title="Warning">
            There might be a problem with your configuration.
          </Alert>
          <Alert variant="danger" title="Error: Unable to Proceed">
            We could not save your changes.
          </Alert>
        </div>
      </Card>

      {/* Tooltips */}
      <Card id="feedback-tooltip" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Tooltips</h3>
        <p className="text-muted-foreground mb-6">Tooltips are powered by Tippy.js for robust positioning and accessibility.</p>
        <div className="flex flex-wrap items-center gap-8">
          <TippyTooltip content="This is a top tooltip." placement="top">
            <Button variant="secondary">Hover Me (Top)</Button>
          </TippyTooltip>
          <TippyTooltip content="This is a right tooltip." placement="right">
            <Button variant="secondary">Hover Me (Right)</Button>
          </TippyTooltip>
           <TippyTooltip content="This is a bottom tooltip." placement="bottom">
            <Button variant="secondary">Hover Me (Bottom)</Button>
          </TippyTooltip>
           <TippyTooltip content="This is a left tooltip." placement="left">
            <Button variant="secondary">Hover Me (Left)</Button>
          </TippyTooltip>
        </div>
      </Card>

      {/* Toast Notifications */}
      <Card id="feedback-toast" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Toast Notifications</h3>
         <p className="text-muted-foreground mb-6">Click the buttons to trigger a global toast notification. Ensure the application is wrapped in a <code className="bg-primary/10 text-primary px-1 rounded">ToastProvider</code>.</p>
        <div className="flex flex-wrap items-center gap-4">
          <Button onClick={() => addToast('This is a default toast.')}>Show Default</Button>
          <Button onClick={() => addToast('Success message!', 'success')}>Show Success</Button>
          <Button onClick={() => addToast('Informational message.', 'info')}>Show Info</Button>
          <Button onClick={() => addToast('Warning message.', 'warning')}>Show Warning</Button>
          <Button onClick={() => addToast('Error message!', 'error')}>Show Error</Button>
        </div>
      </Card>

      {/* Empty State */}
      <Card id="feedback-empty" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Empty State / No Data</h3>
        <div className="space-y-12">
          <EmptyState
            title="No Data Found"
            description="It looks like there's no information to display here yet."
            icon="bar-chart-2"
          />
          <EmptyState
            title="Search Results Empty"
            description="We couldn't find any items matching your search criteria."
            icon="search"
            actionButton={<Button variant="primary" onClick={handleEmptyStateClearSearch}>Clear Search</Button>}
          />
           <EmptyState
            title="Welcome! Get Started"
            description="You haven't created any items yet. Click the button below to add your first entry."
            icon="rocket"
            actionButton={<Button variant="accent" onClick={handleEmptyStateAddItem}>Add New Item</Button>}
          />
        </div>
      </Card>
    </div>
  );
};

export default FeedbackSection;
</file>

<file path="template/src/pages/styleguide/sections/forms/FormsSection.tsx">
// src/pages/styleguide/sections/forms/FormsSection.tsx
import React, { useState } from 'react';
import {
  Card,
  Button,
  ButtonGroup,
  Input,
  SearchInput,
  Select,
  Checkbox,
  Radio,
  ToggleSwitch,
  ComboBox,
  MultiSelect,
  DatePicker,
  FileUpload,
  FormTemplate,
  useToast,
  SectionHeader,
  Icon,
  type FormField,
  type MultiSelectOption,
} from '@ramme-io/ui';


const FormsSection: React.FC = () => {
  const { addToast } = useToast();

  // State for various form controls
  const [selectedOption, setSelectedOption] = useState('option1');
  const [isChecked, setIsChecked] = useState(false);
  const [isToggled, setIsToggled] = useState(true);
  const [selectedRadio, setSelectedRadio] = useState('optionA');
  const [isLoading, setIsLoading] = useState(false);
  const [inputValue, setInputValue] = useState('');
  const [selectedDate, setSelectedDate] = useState<Date | null>(null);
  const [selectedFruit, setSelectedFruit] = useState<string | number | null>('apple');
  const [selectedCountries, setSelectedCountries] = useState<MultiSelectOption[] | null>([
    { value: 'usa', label: 'United States' },
    { value: 'can', label: 'Canada' }
  ]);

  const isError = inputValue.length > 0 && inputValue.length < 5;

  const selectOptions = [
    { value: 'option1', label: 'Option 1' },
    { value: 'option2', label: 'Option 2' },
    { value: 'option3', label: 'Option 3' },
  ];

  const fruitOptions = [
    { value: 'apple', label: 'Apple' },
    { value: 'banana', label: 'Banana' },
    { value: 'orange', label: 'Orange' },
  ];

  const countryOptions: MultiSelectOption[] = [
    { value: 'usa', label: 'United States' },
    { value: 'can', label: 'Canada' },
    { value: 'mex', label: 'Mexico' },
  ];

  const handleFileUpload = (files: File[]) => {
    addToast(`Files uploaded: ${files.map(f => f.name).join(', ')}`, 'success');
  };

  const handleFormSubmit = (formData: Record<string, any>) => {
    addToast('Form submitted successfully!', 'success');
    console.log('Form Submitted:', formData);
  };

  const userProfileFields: FormField[] = [
    { name: 'fullName', label: 'Full Name', type: 'text', placeholder: 'John Doe', colSpan: 2 },
    { name: 'email', label: 'Email Address', type: 'email', placeholder: 'john.doe@example.com', colSpan: 2 },
    {
      name: 'country',
      label: 'Country',
      type: 'select',
      options: countryOptions,
      value: 'can',
    },
    { name: 'subscribeNewsletter', label: 'Subscribe to Newsletter', type: 'checkbox', checked: true },
  ];


  return (
    <div className="space-y-8">
      <SectionHeader title="Form Components & Patterns" />
       <p className="text-muted-foreground -mt-6">
        A collection of components for building forms, from basic inputs and buttons to advanced file uploads and declarative form templates.
      </p>

      <Card id="form-buttons" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Buttons & Button Groups</h3>
        <div className="space-y-6">
            <div className="flex flex-wrap items-center gap-4">
              <Button variant="primary">Primary</Button>
              <Button variant="secondary">Secondary</Button>
              <Button variant="accent">Accent</Button>
              <Button variant="danger">Danger</Button>
              <Button variant="outline">Outline</Button>
              <Button variant="ghost">Ghost</Button>
            </div>
            <div className="flex flex-wrap items-center gap-4">
              <Button variant="primary" size="sm">Small</Button>
              <Button variant="primary" size="md">Medium</Button>
              <Button variant="primary" size="lg">Large</Button>
            </div>
            <div className="flex flex-wrap items-center gap-4">
              <Button variant="primary" disabled>Disabled</Button>
              <Button variant="primary" loading={isLoading} onClick={() => { setIsLoading(true); setTimeout(() => setIsLoading(false), 2000); }}>
                {isLoading ? 'Loading...' : 'Click to Load'}
              </Button>
              <Button variant="primary" iconBefore={<Icon name="plus" />}>Create</Button>
            </div>
            <div>
            <ButtonGroup>
              <Button variant="outline">Copy</Button>
              <Button variant="outline">Paste</Button>
            </ButtonGroup>
          </div>
        </div>
      </Card>

      <Card id="form-inputs" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Standard & Search Inputs</h3>
        <div className="space-y-6 max-w-md">
          <Input label="Standard Input" type="text" placeholder="Placeholder text..." />
          <Input
            label="Validation Example"
            type="text"
            value={inputValue}
            onChange={(e) => setInputValue(e.target.value)}
            error={isError}
            helperText={isError ? "Input must be at least 5 characters long." : "This is a hint."}
          />
          <SearchInput placeholder="Search for anything..." />
        </div>
      </Card>

      <Card id="form-select" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Selection Controls</h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div className="space-y-4">
            <Select label="Choose an option" options={selectOptions} value={selectedOption} onChange={(e) => setSelectedOption(e.target.value)} />
            <Checkbox label="Remember me" checked={isChecked} onChange={(e) => setIsChecked(e.target.checked)} />
            <ToggleSwitch label="Enable Notifications" checked={isToggled} onChange={setIsToggled} />
          </div>
          <div className="space-y-4">
              <p className="font-medium text-text">Radio Group</p>
              <Radio name="radioGroup1" label="Option A" value="optionA" checked={selectedRadio === 'optionA'} onChange={(e) => setSelectedRadio(e.target.value)} />
              <Radio name="radioGroup1" label="Option B" value="optionB" checked={selectedRadio === 'optionB'} onChange={(e) => setSelectedRadio(e.target.value)} />
          </div>
        </div>
      </Card>

      <Card id="form-advanced" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Advanced Inputs</h3>
        <div className="space-y-6 max-w-md">
          <ComboBox
            label="Combo Box (Autocomplete)"
            options={fruitOptions}
            value={selectedFruit}
            onOptionSelect={(value) => setSelectedFruit(value)}
            placeholder="Search for a fruit..."
          />
          <MultiSelect
            label="Multi-Select"
            options={countryOptions}
            value={selectedCountries}
            onChange={setSelectedCountries}
          />
          <DatePicker
            label="Date Picker"
            selected={selectedDate}
            onChange={(date) => setSelectedDate(date)}
            placeholderText="Click to select a date"
          />
        </div>
      </Card>

      <Card id="form-upload" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">File Upload</h3>
        <div className="max-w-md">
            <FileUpload
                label="Upload your document"
                onFileUpload={handleFileUpload}
            />
        </div>
      </Card>
      
      <Card id="form-template" className="p-6 scroll-mt-20">
        <SectionHeader title="User Registration Template" className="mb-6" />
        <FormTemplate
          fields={userProfileFields}
          onSubmit={handleFormSubmit}
        >
          <div className="flex justify-end">
            <Button type="submit" variant="primary">Register</Button>
          </div>
        </FormTemplate>
      </Card>
    </div>
  );
};

export default FormsSection;
</file>

<file path="template/src/pages/styleguide/sections/icons/IconsSection.tsx">
// src/pages/styleguide/sections/icons/IconsSection.tsx
import React from 'react';
import { Card, Icon, SectionHeader } from '@ramme-io/ui';
import type { IconName } from '@ramme-io/ui';

// A sample list of icons to display in the gallery.
const iconList: { name: IconName; category: string }[] = [
  { name: 'home', category: 'Navigation' },
  { name: 'user', category: 'User' },
  { name: 'settings', category: 'System' },
  { name: 'search', category: 'Actions' },
  { name: 'plus', category: 'Actions' },
  { name: 'minus', category: 'Actions' },
  { name: 'x', category: 'Actions' },
  { name: 'check', category: 'Actions' },
  { name: 'chevron-down', category: 'Navigation' },
  { name: 'chevron-up', category: 'Navigation' },
  { name: 'chevron-left', category: 'Navigation' },
  { name: 'chevron-right', category: 'Navigation' },
  { name: 'log-out', category: 'User' },
  { name: 'edit', category: 'Actions' },
  { name: 'trash-2', category: 'Actions' },
  { name: 'copy', category: 'Actions' },
  { name: 'mail', category: 'Communication' },
  { name: 'phone', category: 'Communication' },
  { name: 'calendar', category: 'Time' },
  { name: 'clock', category: 'Time' },
  { name: 'bell', category: 'System' },
  { name: 'alert-triangle', category: 'System' },
  { name: 'info', category: 'System' },
  { name: 'help-circle', category: 'System' },
];

const IconsSection: React.FC = () => {
  return (
    <div className="space-y-8">
      <SectionHeader title="Icons (Lucide)" />
      <p className="text-muted-foreground -mt-6">
        This project uses the <a href="https://lucide.dev/" target="_blank" rel="noopener noreferrer" className="text-primary hover:underline">Lucide</a> icon library. Use the generic `Icon` component to display any icon by name.
      </p>

      <Card id="icons-usage"  className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Usage</h3>
        <p className="text-muted-foreground mb-4">
          Import the `Icon` component and provide the `name` of the icon you wish to display. You can also pass any other props that Lucide icons accept, such as `size` or `className`.
        </p>
        <div className="bg-card-alt p-4 rounded-md">
          <code className="text-sm text-text whitespace-pre-wrap">
            {`import { Icon } from '@ramme-io/ui';

<Icon name="home" size={24} className="text-primary" />`}
          </code>
        </div>
      </Card>

      <Card id="icons-gallery" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Icon Gallery</h3>
        <p className="text-muted-foreground mb-6">
          This is a small sample of the icons available. For a full list, please visit the official Lucide documentation.
        </p>
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
          {iconList.map((icon) => (
            <div
              key={icon.name}
              className="flex flex-col items-center justify-center p-4 bg-card-alt rounded-lg text-center"
            >
              <Icon name={icon.name} size={32} className="mb-2 text-text" />
              <code className="text-xs text-muted-foreground">{icon.name}</code>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default IconsSection;
</file>

<file path="template/src/pages/styleguide/sections/layout/LayoutSection.tsx">
// src/pages/styleguide/sections/layout/LayoutSection.tsx
import React, { useState } from 'react';
import {
  Card,
  Button,
  Input,
  Select,
  Modal,
  Drawer,
  Icon,
  Accordion,
  AccordionItem,
  useTheme,
  SectionHeader,
  type ThemeName,
} from '@ramme-io/ui';

const LayoutSection: React.FC = () => {
  const { theme, availableThemes, setTheme } = useTheme();
  const [isModalOpen, setIsModalOpen] = useState(false);

  // Drawer states specific to this section
  const [isRightDrawerOpen, setIsRightDrawerOpen] = useState(false);
  const [isLeftDrawerOpen, setIsLeftDrawerOpen] = useState(false);
  const [isTopDrawerOpen, setIsTopDrawerOpen] = useState(false);
  const [isBottomDrawerOpen, setIsBottomDrawerOpen] = useState(false);

  return (
    <div className="space-y-8">
      <SectionHeader title="Layout & Structure" />
      <p className="text-muted-foreground -mt-6">
        This section showcases high-level components for structuring pages and content. For low-level layout helpers like flexbox or grid, see the "Utilities" section.
      </p>

      {/* Theme Info */}
      <Card id="layout-theme"  className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Theme Controls</h3>
        <p className="text-lg text-muted-foreground">
          Active Theme: <span className="font-bold text-primary">{theme.charAt(0).toUpperCase() + theme.slice(1)}</span>
        </p>
        <div className="mt-4 flex items-center space-x-2">
          <label htmlFor="layout-theme-select" className="text-text">Switch Theme:</label>
          <Select
            id="layout-theme-select"
            options={availableThemes.map(t => ({ value: t, label: t.charAt(0).toUpperCase() + t.slice(1) }))}
            value={theme}
            onChange={(e) => setTheme(e.target.value as ThemeName)}
            className="w-40"
          />
        </div>
      </Card>

      {/* Typography */}
      <Card id="layout-typography" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Typography</h3>
         <p className="text-muted-foreground mb-6">
          The typographic scale is controlled by font-size (<code className="bg-primary/10 text-primary px-1 rounded">text-*</code>) and font-weight (<code className="bg-primary/10 text-primary px-1 rounded">font-*</code>) utility classes.
        </p>
        <div className="space-y-4">
            <div className="flex items-baseline justify-between"><h1 className="text-5xl font-extrabold text-text">Heading 1</h1><code className="text-sm text-muted-foreground">.text-5xl .font-extrabold</code></div>
            <div className="flex items-baseline justify-between"><h2 className="text-4xl font-bold text-text">Heading 2</h2><code className="text-sm text-muted-foreground">.text-4xl .font-bold</code></div>
            <div className="flex items-baseline justify-between"><h3 className="text-3xl font-semibold text-text">Heading 3</h3><code className="text-sm text-muted-foreground">.text-3xl .font-semibold</code></div>
            <div className="flex items-baseline justify-between"><p className="text-base text-text">Paragraph text</p><code className="text-sm text-muted-foreground">.text-base</code></div>
            <div className="flex items-baseline justify-between"><p className="text-sm text-muted-foreground">Small text for captions</p><code className="text-sm text-muted-foreground">.text-sm</code></div>
        </div>
      </Card>

      {/* Card Examples */}
      <Card id="layout-card" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Cards</h3>
        <p className="text-muted-foreground mb-6">
          The Card is a flexible container. Use props to override default theme styles for background, border, padding, and shadow.
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <Card className="p-6"><h4 className="font-semibold text-lg mb-2 text-text">Default Card</h4><p className="text-text-light">This card uses theme defaults.</p></Card>
          <Card className="p-6" shadow="shadow-xl"><h4 className="font-semibold text-lg mb-2 text-text">Shadow Override</h4><p className="text-text-light">This card has a large `shadow-xl`.</p></Card>
          <Card className="p-6" background="bg-primary/30" border="border-2 border-primary/50"><h4 className="font-semibold text-lg mb-2 text-primary">Style Override</h4><p className="text-primary/80">Custom background and a thicker, colored border.</p></Card>
        </div>
      </Card>

      {/* Modals */}
      <Card id="layout-modal" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Modals</h3>
        <Button onClick={() => setIsModalOpen(true)} variant="accent">Open Modal</Button>
        <Modal
          isOpen={isModalOpen}
          onClose={() => setIsModalOpen(false)}
          title="Layout Test Modal"
          footer={
            <div className="flex justify-end gap-2">
              <Button variant="outline" onClick={() => setIsModalOpen(false)}>Close</Button>
              <Button variant="primary" onClick={() => setIsModalOpen(false)}>Confirm</Button>
            </div>
          }
        >
          <p className="text-text">This is a modal instance from the layout section.</p>
          <Input type="text" placeholder="Modal Input Field" className="mt-4" />
        </Modal>
      </Card>

      {/* Drawers */}
      <Card id="layout-drawer" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Drawers</h3>
        <div className="flex flex-wrap items-center gap-4">
          <Button onClick={() => setIsRightDrawerOpen(true)}>Open Right Drawer</Button>
          <Button onClick={() => setIsLeftDrawerOpen(true)}>Open Left Drawer</Button>
          <Button onClick={() => setIsTopDrawerOpen(true)}>Open Top Drawer</Button>
          <Button onClick={() => setIsBottomDrawerOpen(true)}>Open Bottom Drawer</Button>
        </div>
        <Drawer isOpen={isRightDrawerOpen} onClose={() => setIsRightDrawerOpen(false)} position="right" title="Right-Side Drawer"><p className="p-4 text-text">This drawer slides in from the right.</p></Drawer>
        <Drawer isOpen={isLeftDrawerOpen} onClose={() => setIsLeftDrawerOpen(false)} position="left" title="Left-Side Drawer"><p className="p-4 text-text">This drawer slides in from the left.</p></Drawer>
        <Drawer isOpen={isTopDrawerOpen} onClose={() => setIsTopDrawerOpen(false)} position="top" title="Top Drawer"><p className="p-4 text-text">This drawer slides down from the top.</p></Drawer>
        <Drawer isOpen={isBottomDrawerOpen} onClose={() => setIsBottomDrawerOpen(false)} position="bottom" title="Bottom Drawer"><p className="p-4 text-text">This drawer slides up from the bottom.</p></Drawer>
      </Card>

      {/* Accordion */}
      <Card id="layout-accordion" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Accordion / Collapsible Panels</h3>
        <Accordion>
          <AccordionItem id="item1" header="Section 1: What is this boilerplate?"><p className="p-4 text-text">This is a React and Tailwind CSS boilerplate designed for rapid prototyping. It comes with a comprehensive set of pre-built, theme-aware UI components.</p></AccordionItem>
          <AccordionItem id="item2" header="Section 2: How do I use it?"><p className="p-4 text-text">Simply use `npm create ramme-app@latest` to start a new project. Explore this Style Guide for component examples.</p></AccordionItem>
        </Accordion>
      </Card>
    </div>
  );
};

export default LayoutSection;
</file>

<file path="template/src/pages/styleguide/sections/navigation/NavigationSection.tsx">
// src/pages/styleguide/sections/navigation/NavigationSection.tsx
import React, { useState } from 'react';
import {
  Card,
  Button,
  Input,
  Stepper,
  Tabs,
  TabPanel,
  Menu,
  MenuItem,
  MenuDivider,
  Breadcrumbs,
  BreadcrumbItem,
  Icon,
  SectionHeader,
} from '@ramme-io/ui';


const NavigationSection: React.FC = () => {
  const handleMenuItemClick = (item: string) => {
    alert(`Menu Item Clicked: ${item}`);
  };

  const stepperSteps = [
    { label: 'Account Setup', summary: 'Create your account' },
    { label: 'Personal Details', summary: 'Add your information' },
    { label: 'Verification', summary: 'Verify your email' },
    { label: 'Done', summary: 'You are all set!' },
  ];
  const [currentStep, setCurrentStep] = useState(1);

  return (
    <div className="space-y-8">
      <SectionHeader title="Navigation Components" />
      <p className="text-muted-foreground -mt-6">
        A collection of components designed to help users navigate through pages and content flows.
      </p>

      <Card id="navigation-stepper" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Stepper</h3>
        <p className="text-muted-foreground mb-6">
          Guide users through a multi-step process with the Stepper component.
        </p>
        <Stepper steps={stepperSteps} currentStep={currentStep} />
        <div className="flex justify-center mt-6 gap-4">
            <Button onClick={() => setCurrentStep(s => Math.max(0, s - 1))} disabled={currentStep === 0}>Previous</Button>
            <Button onClick={() => setCurrentStep(s => Math.min(stepperSteps.length - 1, s + 1))} disabled={currentStep === stepperSteps.length - 1}>Next</Button>
        </div>
      </Card>

      <Card id="navigation-tabs" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Tabs with Icons</h3>
        <Tabs defaultActiveTab="tab1">
          <TabPanel id="tab1" label="Dashboard" icon={<Icon name="layout-dashboard" />}>
            <div className="p-4">
                <p className="text-text">Content for the Dashboard tab.</p>
            </div>
          </TabPanel>
          <TabPanel id="tab2" label="Users" icon={<Icon name="users" />}>
            <div className="p-4">
                <p className="text-text">Content for User Management.</p>
            </div>
          </TabPanel>
          <TabPanel id="tab3" label="Settings" icon={<Icon name="settings" />}>
            <div className="p-4">
                <p className="text-text">Content for Application Settings.</p>
            </div>
          </TabPanel>
        </Tabs>
      </Card>

      <Card id="navigation-menus" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Menus</h3>
        <div className="flex flex-wrap items-center gap-8">
          <Menu
            trigger={<Button variant="primary">Menu with Icons</Button>}
          >
            <MenuItem icon={<Icon name="edit" />} onClick={() => handleMenuItemClick('Edit')}>
              Edit Profile
            </MenuItem>
            <MenuItem icon={<Icon name="copy" />} onClick={() => handleMenuItemClick('Duplicate')}>
              Duplicate
            </MenuItem>
            <MenuDivider />
            <MenuItem icon={<Icon name="archive" />} onClick={() => handleMenuItemClick('Archive')}>
              Archive
            </MenuItem>
            <MenuItem icon={<Icon name="trash-2" />} onClick={() => handleMenuItemClick('Delete')}>
              Delete
            </MenuItem>
          </Menu>
          
          <Menu
            trigger={<Button variant="secondary">Simple Menu</Button>}
          >
            <MenuItem icon={<Icon name="settings" />} onClick={() => handleMenuItemClick('Account Settings')}>Account Settings</MenuItem>
            <MenuItem icon={<Icon name="user-plus" />} onClick={() => handleMenuItemClick('Invite Team')}>Invite Team</MenuItem>
            <MenuDivider />
            <MenuItem icon={<Icon name="help-circle" />} onClick={() => handleMenuItemClick('Support')}>Support</MenuItem>
          </Menu>
        </div>
      </Card>

      <Card id="navigation-breadcrumbs" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Breadcrumbs with Icons</h3>
        <div className="space-y-4">
          <Breadcrumbs>
            <BreadcrumbItem icon={<Icon name="home" />} label="Home"  />
            <BreadcrumbItem icon={<Icon name="folder" />} label="Dashboard"  />
            <BreadcrumbItem icon={<Icon name="file-text" />} label="Current Page" isCurrent />
          </Breadcrumbs>
        </div>
      </Card>
    </div>
  );
};

export default NavigationSection;
</file>

<file path="template/src/pages/styleguide/sections/tables/TablesSection.tsx">
// src/pages/styleguide/sections/tables/TablesSection.tsx
import React, { useState, useMemo, useCallback } from 'react';
import {
  Card,
  Input,
  Button,
  Table,
  Pagination,
  DataTable,
  Badge,
  SectionHeader,
  useDataFetch,
  type ColDef,
  type ICellRendererParams,
  type IRowNode,
} from '@ramme-io/ui';

// --- Local Mock Data ---
const mockLargeTableData = Array.from({ length: 23 }, (_, i) => ({
  id: `USR-00${i + 1}`,
  name: `User ${i + 1}`,
  email: `user${i + 1}@example.com`,
  status: ['Active', 'Inactive', 'Pending'][i % 3],
}));

const mockTableData = [
    { make: 'Tesla', model: 'Model Y', price: 65990, electric: true },
    { make: 'Ford', model: 'F-150', price: 33850, electric: false },
    { make: 'Toyota', model: 'Corolla', price: 29600, electric: false },
    { make: 'Rivian', model: 'R1T', price: 79500, electric: true },
    { make: 'Honda', model: 'CR-V', price: 32450, electric: false },
];

// --- Custom Cell Renderers ---
const ElectricCarRenderer: React.FC<ICellRendererParams> = (props) => {
  return <span>{props.value ? 'âš¡ Electric' : 'â›½ Gasoline'}</span>;
};

const StatusCell: React.FC<{ value: string }> = ({ value }) => {
  const variant = {
    Active: 'success' as const,
    Inactive: 'danger' as const,
    Pending: 'warning' as const,
  }[value] || 'secondary';
  return <Badge variant={variant}>{value}</Badge>;
};

const EmailCell: React.FC<{ value: string }> = ({ value }) => {
  return <a href={`mailto:${value}`} className="text-primary hover:underline">{value}</a>;
};

const TablesSection: React.FC = () => {
  const [simpleTablePage, setSimpleTablePage] = useState(1);
  const ITEMS_PER_PAGE = 5;
  const simpleTableHeaders = [
    { key: 'id', label: 'ID' },
    { key: 'name', label: 'Name' },
    { key: 'email', label: 'Email', render: (value: string) => <EmailCell value={value} /> },
    { key: 'status', label: 'Status', render: (value: string) => <StatusCell value={value} /> },
  ];
  const paginatedData = useMemo(() => {
    const start = (simpleTablePage - 1) * ITEMS_PER_PAGE;
    return mockLargeTableData.slice(start, start + ITEMS_PER_PAGE);
  }, [simpleTablePage]);
  const totalSimplePages = Math.ceil(mockLargeTableData.length / ITEMS_PER_PAGE);

  const { data: fetchedTableData } = useDataFetch(null, mockTableData);
  const [filterText, setFilterText] = useState<string>('');
  const [gridApi, setGridApi] = useState<any>(null);

  const onGridReady = useCallback((params: any) => setGridApi(params.api), []);

  const onFilterTextBoxChanged = useCallback(() => {
    gridApi?.setQuickFilter(filterText);
  }, [filterText, gridApi]);

  const columnDefs: ColDef[] = useMemo(() => [
    { field: 'make', headerName: 'Manufacturer', sortable: true, filter: true, floatingFilter: true, checkboxSelection: true, headerCheckboxSelection: true, minWidth: 150 },
    { field: 'model', headerName: 'Model Name', sortable: true, filter: true, floatingFilter: true, minWidth: 150 },
    { field: 'price', headerName: 'Price ($)', sortable: true, filter: 'agNumberColumnFilter', floatingFilter: true, valueFormatter: p => '$' + p.value.toLocaleString(), minWidth: 120 },
    { field: 'electric', headerName: 'Type', cellRenderer: ElectricCarRenderer, minWidth: 120 },
  ], []);

  const getSelectedRows = useCallback(() => {
    const selectedNodes: IRowNode[] = gridApi?.getSelectedNodes() || [];
    const selectedData = selectedNodes.map(node => node.data);
    alert(`Selected Rows: \n${JSON.stringify(selectedData, null, 2)}`);
  }, [gridApi]);

  return (
    <div className="space-y-8">
      <SectionHeader title="Tables & Data Grids" />
      <p className="text-muted-foreground -mt-6">Components for displaying tabular data, from simple tables to advanced data grids.</p>
      
      <Card id="tables-simple" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">Simple Paginated Table</h3>
        <p className="text-muted-foreground mb-4">
          A basic HTML table with client-side pagination and custom cell renderers.
        </p>
        <Table headers={simpleTableHeaders} data={paginatedData} />
        <div className="mt-4 flex justify-center">
          <Pagination currentPage={simpleTablePage} totalPages={totalSimplePages} onPageChange={setSimpleTablePage} />
        </div>
      </Card>

      <Card id="tables-aggrid" className="p-6 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-4 text-text">AG Grid Data Table (Advanced)</h3>
        <p className="text-muted-foreground mb-4">
          A powerful grid with sorting, filtering, and row selection, powered by AG Grid.
        </p>
        <div className="flex flex-col md:flex-row md:items-center gap-4 mb-6">
          <Input
            type="text"
            placeholder="Quick Filter (searches all columns)..."
            value={filterText}
            onChange={(e) => setFilterText(e.target.value)}
            onKeyUp={onFilterTextBoxChanged}
            className="flex-1"
          />
          <Button onClick={getSelectedRows} variant="primary">
            Get Selected Rows
          </Button>
        </div>

        {fetchedTableData && (
          <DataTable
            rowData={fetchedTableData}
            columnDefs={columnDefs}
            height="500px"
            onGridReady={onGridReady}
            rowSelection="multiple"
          />
        )}
      </Card>
    </div>
  );
};

export default TablesSection;
</file>

<file path="template/src/pages/styleguide/sections/templates/TemplatesSection.tsx">
// src/pages/styleguide/sections/templates/TemplatesSection.tsx
import React from 'react';
import {
  Card,
  Button,
  Input,
  Icon,
  PageHeader,
  SectionHeader,
  ActionBar,
} from '@ramme-io/ui';


const TemplatesSection: React.FC = () => {
  return (
    <div className="space-y-8">
      <SectionHeader title="Page & Layout Templates" />
      <p className="text-muted-foreground -mt-6">
        Combine these high-level components to quickly build consistent and professional page layouts.
      </p>

      {/* Page Layout Example */}
      <Card id="template-standard" className="scroll-mt-20 p-6">
        <div className="p-6">
          <PageHeader
            title="Standard Page Template"
            description="A standard page layout with a header, content sections, and a persistent action bar."
            actions={
              <Button variant="primary" iconBefore={<Icon name="plus" />}>
                Add New Item
              </Button>
            }
          />
        </div>
        <div className="p-6 border-t border-border space-y-4">
          <SectionHeader title="User Details" />
          <p className="text-muted-foreground">This is the main content area for a section. You can place forms, tables, or any other content here.</p>
          <Input type="text" placeholder="Example Input" />
        </div>
        <ActionBar>
          <Button variant="outline">Cancel</Button>
          <Button variant="primary" iconBefore={<Icon name="save" />}>
            Save Changes
          </Button>
        </ActionBar>
      </Card>

      {/* Responsive Layout Example */}
      <Card id="template-responsive" className="scroll-mt-20 p-6">
        <div className="p-6">
            <PageHeader
                title="Responsive Two-Column Template"
                description="This layout features a sidebar that stacks on mobile screens. Try resizing your browser to see it in action."
            />
        </div>
        <div className="p-6 border-t border-border">
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                {/* Main Content Area */}
                <main className="lg:col-span-2 space-y-6">
                    <SectionHeader title="Main Content" />
                    <Card className="p-6">
                        <p className="text-text">This is the primary content area. On large screens, it takes up two-thirds of the available space.</p>
                    </Card>
                </main>

                {/* Sidebar */}
                <aside className="space-y-6">
                    <SectionHeader title="Sidebar" />
                    <Card className="p-6">
                        <h4 className="font-semibold text-text mb-2">Metadata</h4>
                        <p className="text-muted-foreground text-sm">This sidebar stacks below the main content on smaller screens.</p>
                    </Card>
                </aside>
            </div>
        </div>
      </Card>
    </div>
  );
};

export default TemplatesSection;
</file>

<file path="template/src/pages/styleguide/sections/theming/ThemingSection.tsx">
import React, { useState, useEffect } from 'react';
import {
  SectionHeader,
  Card,
  CodeBlock,
  Alert,
  useTheme,
  ButtonGroup,
  Button,
  Icon,
} from '@ramme-io/ui';
import type { ThemeName } from '@ramme-io/ui';


// --- HELPER DATA ---

interface ColorInfo {
  name: string;
  variable: string;
  category: 'Brand' | 'UI' | 'Text & Borders' | 'Form Controls' | 'Notifications' | 'Charts';
}

// UPDATED: Added new color definitions
const colorPaletteData: ColorInfo[] = [
  { name: 'Primary', variable: '--app-primary-color', category: 'Brand' },
  { name: 'Primary Content', variable: '--app-primary-foreground-color', category: 'Brand' },
  { name: 'Secondary', variable: '--app-secondary-color', category: 'Brand' },
  { name: 'Accent', variable: '--app-accent-color', category: 'Brand' },
  { name: 'Destructive', variable: '--app-danger-color', category: 'Brand' },
  { name: 'Page Background', variable: '--app-bg-color', category: 'UI' },
  { name: 'Card Background', variable: '--app-card-bg-color', category: 'UI' },
  { name: 'Default Text', variable: '--app-text-color', category: 'Text & Borders' },
  { name: 'Border', variable: '--app-border-color', category: 'Text & Borders' },
  { name: 'Input Border', variable: '--app-input-border-color', category: 'Form Controls' },
  { name: 'Input Focus Ring', variable: '--app-input-focus-ring-color', category: 'Form Controls' },
  { name: 'Info', variable: '--app-info-color', category: 'Notifications' },
  { name: 'Info Content', variable: '--app-info-foreground-color', category: 'Notifications' },
  { name: 'Success', variable: '--app-success-color', category: 'Notifications' },
  { name: 'Success Content', variable: '--app-success-foreground-color', category: 'Notifications' },
  { name: 'Warning', variable: '--app-warning-color', category: 'Notifications' },
  { name: 'Warning Content', variable: '--app-warning-foreground-color', category: 'Notifications' },
  { name: 'Chart 1', variable: '--app-chart-1', category: 'Charts' },
  { name: 'Chart 2', variable: '--app-chart-2', category: 'Charts' },
  { name: 'Chart 3', variable: '--app-chart-3', category: 'Charts' },
  { name: 'Chart 4', variable: '--app-chart-4', category: 'Charts' },
  { name: 'Chart 5', variable: '--app-chart-5', category: 'Charts' },
];

interface PropertyInfo {
  name: string;
  variable: string;
  category: 'Typography' | 'Shape';
}

const propertyAuditData: PropertyInfo[] = [
  { name: 'Sans Serif Font', variable: '--app-font-sans', category: 'Typography' },
  { name: 'Base Font Size', variable: '--app-font-size-base', category: 'Typography' },
  { name: 'Radius Small', variable: '--app-border-radius-sm', category: 'Shape' },
  { name: 'Radius Medium', variable: '--app-border-radius-md', category: 'Shape' },
  { name: 'Radius Large', variable: '--app-border-radius-lg', category: 'Shape' },
];

// --- HELPER COMPONENTS ---

const ColorSwatch: React.FC<{ color: ColorInfo; value: string }> = ({ color, value }) => {
  if (!value) {
    return <div className="border border-border rounded-lg h-36 bg-background animate-pulse"></div>;
  }
  const [r, g, b] = value.split(' ').map(Number);
  const hex = `#${[r, g, b].map(x => x.toString(16).padStart(2, '0')).join('')}`;

  return (
    <div className="border border-border rounded-lg overflow-hidden shadow-sm">
      <div className="h-24" style={{ backgroundColor: `rgb(${value})` }}></div>
      <div className="p-3 text-sm bg-card">
        <p className="font-semibold text-foreground">{color.name}</p>
        <div className="mt-2 text-xs font-mono text-muted-foreground space-y-1">
          <p>var({color.variable})</p>
          <p>{`rgb(${value})`}</p>
          <p>{hex.toUpperCase()}</p>
        </div>
      </div>
    </div>
  );
};

const ColorPalette: React.FC<{ colors: ColorInfo[] }> = ({ colors }) => {
  const { theme } = useTheme();
  const [colorValues, setColorValues] = useState<Record<string, string>>({});

  useEffect(() => {
    const timer = setTimeout(() => {
      const computedStyle = getComputedStyle(document.documentElement);
      const newValues: Record<string, string> = {};
      colors.forEach(color => {
        newValues[color.variable] = computedStyle.getPropertyValue(color.variable).trim();
      });
      setColorValues(newValues);
    }, 50);

    return () => clearTimeout(timer);
  }, [theme, colors]);

  const groupedColors = colors.reduce((acc, color) => {
      (acc[color.category] = acc[color.category] || []).push(color);
      return acc;
  }, {} as Record<string, ColorInfo[]>);

  return (
    <div className="space-y-6">
      {Object.entries(groupedColors).map(([category, colorsInCategory]) => (
        <div key={category}>
          <h3 className="text-lg font-semibold mb-3">{category}</h3>
          <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            {colorsInCategory.map(color => (
              <ColorSwatch key={color.variable} color={color} value={colorValues[color.variable] || ''} />
            ))}
          </div>
        </div>
      ))}
    </div>
  );
};

const PropertyDisplay: React.FC<{ property: PropertyInfo; value: string }> = ({ property, value }) => {
  return (
    <div className="bg-background border border-border rounded-lg p-4 flex items-center justify-between">
      <div>
        <div className="text-sm font-semibold text-foreground">{property.name}</div>
        <div className="text-xs font-mono text-muted-foreground mt-1">
          var({property.variable})
        </div>
        <div className="text-sm font-mono text-primary mt-2">{value}</div>
      </div>
      {property.category === 'Shape' && (
        <div
          className="w-16 h-16 bg-primary/20 border-2 border-dashed border-primary/50"
          style={{ borderRadius: value }}
        ></div>
      )}
      {property.category === 'Typography' && property.variable.includes('font-sans') && (
        <div className="text-3xl text-primary" style={{ fontFamily: value }}>Aa</div>
      )}
    </div>
  );
};

const LiveAuditSection: React.FC<{ title: string; data: PropertyInfo[] }> = ({ title, data }) => {
  const { theme } = useTheme();
  const [liveValues, setLiveValues] = useState<Record<string, string>>({});

  useEffect(() => {
    const timer = setTimeout(() => {
      const computedStyle = getComputedStyle(document.documentElement);
      const newValues: Record<string, string> = {};
      data.forEach(prop => {
        newValues[prop.variable] = computedStyle.getPropertyValue(prop.variable).trim();
      });
      setLiveValues(newValues);
    }, 50);
    return () => clearTimeout(timer);
  }, [theme, data]);

  return (
    <Card className="mb-6 p-6">
      <h2 className="text-xl font-bold mb-4">{title}</h2>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {data.map(prop => (
          <PropertyDisplay key={prop.variable} property={prop} value={liveValues[prop.variable] || '...'} />
        ))}
      </div>
    </Card>
  );
};

// --- MAIN COMPONENT ---

const ThemingSection: React.FC = () => {
  const { theme, setTheme, availableThemes, borderRadius, setBorderRadius, fontSize, setFontSize } = useTheme();

  const radii = [ { label: 'None', value: '0rem' }, { label: 'Sm', value: '0.25rem' }, { label: 'Md', value: '0.5rem' }, { label: 'Lg', value: '1rem' }];
  const fontSizes = [ { label: 'Sm', value: '0.875rem' }, { label: 'Base', value: '1rem' }, { label: 'Lg', value: '1.125rem' }];
  
  const themeCssVariables = `
  .dark {
    /* ... existing variables ... */
  }
  `;

  return (
    <div id="theming">
      <SectionHeader title="Theming System" />
      <p className="mt-2 mb-6 text-muted-foreground">
        An interactive guide to the visual identity of your application.
      </p>

      <Card className="mb-6 p-6">
        <h2 className="text-xl font-bold mb-4">Theme Playground</h2>
        <div className="space-y-6">
          <div>
            <label className="block text-sm font-medium mb-2 text-foreground/80">Color Theme</label>
            <ButtonGroup>
              {availableThemes.map((t: ThemeName) => (
                <Button 
                  key={t}
                  variant={theme === t ? 'primary' : 'secondary'}
                  onClick={() => setTheme(t)}
                >
                  {t}
                </Button>
              ))}
            </ButtonGroup>
          </div>
          <div>
            <label className="block text-sm font-medium mb-2 text-foreground/80">Border Radius</label>
            <ButtonGroup>
              {radii.map(r => (
                <Button
                  key={r.value}
                  variant={borderRadius === r.value ? 'primary' : 'secondary'}
                  onClick={() => setBorderRadius(r.value)}
                >
                  {r.label}
                </Button>
              ))}
            </ButtonGroup>
          </div>
          <div>
            <label className="block text-sm font-medium mb-2 text-foreground/80">Base Font Size</label>
            <ButtonGroup>
              {fontSizes.map(fs => (
                <Button
                  key={fs.value}
                  variant={fontSize === fs.value ? 'primary' : 'secondary'}
                  onClick={() => setFontSize(fs.value)}
                >
                  {fs.label}
                </Button>
              ))}
            </ButtonGroup>
          </div>
        </div>
      </Card>

      <LiveAuditSection title="Live Typography Audit" data={propertyAuditData.filter(p => p.category === 'Typography')} />
      <LiveAuditSection title="Live Shape Audit" data={propertyAuditData.filter(p => p.category === 'Shape')} />
      
      <Card className="mb-6 p-6">
        <h2 className="text-xl font-bold mb-2">Live Color Palette</h2>
        <p className="text-muted-foreground mb-4">The swatches below use the live CSS variables from the active theme. Use the controls above to see them update.</p>
        <ColorPalette colors={colorPaletteData} />
      </Card>

      <Card className="mb-6 p-6">
        <h2 className="text-xl font-bold mb-2">Core Theme Variables</h2>
        <p className="mb-4">To create a theme, copy an existing block in `src/index.css` and customize the variable values.</p>
        <Alert variant="info" title="Color Format" className="mb-4">
          All color variables must be defined as three space-separated R G B values (e.g., `255 255 255`) for Tailwind's opacity modifiers to work.
        </Alert>
        <CodeBlock language="css" code={themeCssVariables.trim()} />
      </Card>
    </div>
  );
};

export default ThemingSection;
</file>

<file path="template/src/pages/styleguide/sections/utilities/UtilitiesSection.tsx">
// src/pages/styleguide/sections/utilities/UtilitiesSection.tsx
import React from 'react';
import { Card, SectionHeader } from '@ramme-io/ui';

// A small component to render the visual items inside our flex examples
const FlexItem: React.FC<{ className?: string }> = ({ className }) => (
  <div className={`h-8 w-8 rounded-md bg-primary flex-shrink-0 ${className}`} />
);


// Updated component to accept an optional description and a more flexible example
const UtilityClassReference: React.FC<{
  title: string;
  classes: {
    name: string;
    description: string;
    exampleClass?: string;
    exampleNode?: React.ReactNode; // Allow passing a custom node for the example
  }[];
  sectionDescription?: React.ReactNode;
}> = ({ title, classes, sectionDescription }) => (
  <Card className="mb-8 p-6">
    <h3 className="text-2xl font-semibold mb-2 text-text">{title}</h3>
    {/* Render the description if it exists */}
    {sectionDescription && <div className="mb-4 text-text-light">{sectionDescription}</div>}
    <div className="overflow-x-auto">
      <table className="w-full text-left border-collapse">
        <thead>
          <tr>
            <th className="p-2 border-b-2 border-border text-text w-1/4">Class Name</th>
            <th className="p-2 border-b-2 border-border text-text w-1/2">Description</th>
            <th className="p-2 border-b-2 border-border text-text w-1/4">Example</th>
          </tr>
        </thead>
        <tbody>
          {classes.map((item, index) => (
            <tr key={index} className="hover:bg-primary/5">
              <td className="p-2 border-b border-border text-text-light font-mono">{item.name}</td>
              <td className="p-2 border-b border-border text-text-light">{item.description}</td>
              <td className="p-2 border-b border-border">
                {/* Render the custom node if it exists, otherwise fall back to the simple class example */}
                {item.exampleNode ? item.exampleNode : (
                  <div className={`flex items-center justify-center p-2 rounded ${item.exampleClass}`}>
                    <span className={`text-sm ${item.exampleClass?.includes('text-') ? '' : 'text-text'}`}>{item.name}</span>
                  </div>
                )}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  </Card>
);

const UtilitiesSection: React.FC = () => {
  const spacingClasses = [
    { name: 'p-4', description: 'Sets 1rem (16px) of padding on all sides.', exampleClass: 'bg-primary/10' },
    { name: 'pt-6', description: 'Sets 1.5rem of padding on the top.', exampleClass: 'bg-primary/10' },
    { name: 'px-8', description: 'Sets 2rem of padding on the left and right (x-axis).', exampleClass: 'bg-primary/10' },
    { name: 'm-2', description: 'Sets 0.5rem of margin on all sides.', exampleClass: 'bg-accent/20' },
    { name: 'mx-auto', description: 'Sets auto margin on the left and right, often for centering.', exampleClass: 'bg-accent/20 w-1/2' },
  ];

  const flexboxClasses = [
    { name: 'justify-start', description: 'Aligns items to the start of the main axis.', exampleNode: <div className="flex justify-start border border-border rounded-md p-2 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'justify-center', description: 'Aligns items to the center of the main axis.', exampleNode: <div className="flex justify-center border border-border rounded-md p-2 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'justify-end', description: 'Aligns items to the end of the main axis.', exampleNode: <div className="flex justify-end border border-border rounded-md p-2 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'justify-between', description: 'Distributes items evenly with space between them.', exampleNode: <div className="flex justify-between border border-border rounded-md p-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'items-start', description: 'Aligns items to the start of the cross-axis.', exampleNode: <div className="flex items-start border border-border rounded-md p-2 h-20 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'items-center', description: 'Aligns items to the center of the cross-axis.', exampleNode: <div className="flex items-center border border-border rounded-md p-2 h-20 space-x-2"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
    { name: 'gap-4', description: 'Sets a 1rem gap between flex items.', exampleNode: <div className="flex justify-start border border-border rounded-md p-2 gap-4"><FlexItem /><FlexItem className="bg-secondary" /><FlexItem className="bg-accent" /></div> },
  ];

  const typographyClasses = [
    { name: 'text-lg', description: 'Sets a large font size.', exampleClass: 'text-lg' },
    { name: 'font-bold', description: 'Applies a bold font weight.', exampleClass: 'font-bold' },
    { name: 'text-center', description: 'Centers the text.', exampleClass: 'text-center' },
    { name: 'text-primary', description: 'Applies the primary theme color to the text.', exampleClass: 'text-primary font-semibold' },
    { name: 'italic', description: 'Makes the text italic.', exampleClass: 'italic' },
    { name: 'truncate', description: 'Truncates overflowing text with an ellipsis.', exampleClass: 'truncate w-24' },
  ];

  const borderClasses = [
    { name: 'rounded-lg', description: 'Applies a large border radius.', exampleClass: 'border-2 border-accent h-10' },
    { name: 'border-2', description: 'Sets a 2px border width.', exampleClass: 'border-2 border-primary h-10' },
    { name: 'border-dashed', description: 'Sets the border style to dashed.', exampleClass: 'border-2 border-dashed border-secondary h-10' },
    { name: 'divide-y', description: 'Adds a border between vertical items.', exampleClass: '' },
  ];

  const shadowClasses = [
    { name: 'shadow-sm', description: 'Applies a small box shadow.', exampleClass: 'shadow-sm border border-border' },
    { name: 'shadow-lg', description: 'Applies a large box shadow.', exampleClass: 'shadow-lg border border-border' },
    { name: 'shadow-inner', description: 'Applies an inner shadow.', exampleClass: 'shadow-inner border border-border' },
  ];

  return (
    <div className="space-y-8">
      <SectionHeader title="Tailwind CSS Utility Classes" />
      <p className="text-text-light -mt-6 mb-8">
        A quick reference for some of the most common utility classes available in Tailwind. For a full list, always refer to the official Tailwind CSS documentation.
      </p>

      <div id="utilities-spacing" className=" scroll-mt-20">
        <UtilityClassReference
        title="Spacing (Padding & Margin)"
        classes={spacingClasses}
        sectionDescription={ <p>Tailwind's spacing scale is based on a <code className="bg-primary/10 text-primary px-1 rounded">0.25rem</code> unit, where <code className="bg-primary/10 text-primary px-1 rounded">1rem = 16px</code> by default. The number in the class name is a multiplier. For example, <code className="bg-primary/10 text-primary px-1 rounded">p-4</code> equals <code className="bg-primary/10 text-primary px-1 rounded">4 * 0.25rem = 1rem (16px)</code>.</p> }
      />
      </div>


      <div id="utilities-flexbox" className=" scroll-mt-20">
        <UtilityClassReference
        title="Flexbox"
        classes={flexboxClasses}
        sectionDescription={ <p>Flexbox is a layout model for arranging items in a single dimensionâ€”either a row or a column. Use <code className="bg-primary/10 text-primary px-1 rounded">justify-*</code> to control spacing along the main axis and <code className="bg-primary/10 text-primary px-1 rounded">items-*</code> for alignment on the cross axis.</p> }
      />
      </div>

      {/* Moved Layout Utilities Section */}
      <Card id="utilities-layout" className="p-6 mb-8 scroll-mt-20">
        <h3 className="text-2xl font-semibold mb-2 text-text">Layout (Display, Sizing, Position)</h3>
        <p className="text-text-light mb-6">
          Use these utility classes to control the display, sizing, and positioning of elements. These are fundamental for building any UI structure.
        </p>
        <div className="space-y-8">
          <div>
            <h4 className="text-lg font-semibold mb-2 text-text">Display</h4>
            <div className="space-y-4">
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">display: block</code> (takes up the full width available)</p><div className="bg-secondary/20 p-2 rounded-md"><div className="block bg-secondary text-white p-2 rounded">.block</div><div className="block bg-secondary text-white p-2 rounded mt-1">.block</div></div></div>
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">display: inline-block</code> (flows with text, respects width/height)</p><div className="bg-secondary/20 p-2 rounded-md"><div className="inline-block bg-secondary text-white p-2 rounded">.inline-block</div><div className="inline-block bg-secondary text-white p-2 rounded ml-1">.inline-block</div></div></div>
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">display: grid</code> (for two-dimensional layouts)</p><div className="grid grid-cols-3 gap-2 bg-secondary/20 p-2 rounded-md"><div className="bg-secondary text-white p-2 rounded text-center">1</div><div className="bg-secondary text-white p-2 rounded text-center">2</div><div className="bg-secondary text-white p-2 rounded text-center">3</div></div></div>
            </div>
          </div>
          <div>
            <h4 className="text-lg font-semibold mt-6 mb-2 text-text">Sizing</h4>
            <div className="space-y-4">
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">w-1/2</code> (50% width)</p><div className="bg-accent/20 p-2 rounded-md"><div className="w-1/2 bg-accent text-white p-2 rounded">.w-1/2</div></div></div>
              <div><p className="text-text-light mb-1"><code className="bg-primary/10 text-primary px-1 rounded">w-full</code> (100% width)</p><div className="bg-accent/20 p-2 rounded-md"><div className="w-full bg-accent text-white p-2 rounded">.w-full</div></div></div>
            </div>
          </div>
          <div>
            <h4 className="text-lg font-semibold mt-6 mb-2 text-text">Positioning</h4>
            <p className="text-text-light mb-2">Positioning utilities require a parent with a set position (like <code className="bg-primary/10 text-primary px-1 rounded">relative</code>) for <code className="bg-primary/10 text-primary px-1 rounded">absolute</code> children to be placed correctly.</p>
            <div className="relative bg-red-600/10 p-4 rounded-md h-24"><p className="text-text-light">Parent (.relative)</p><div className="absolute top-2 right-2 bg-red-600 text-white p-2 rounded text-sm">.absolute .top-2 .right-2</div></div>
          </div>
        </div>
      </Card>

      <div id="utilities-typography" className="scroll-mt-20">
        <UtilityClassReference title="Typography" classes={typographyClasses} />
        </div>
      <div id="utilities-borders" className="scroll-mt-20">
        <UtilityClassReference title="Borders & Rounded Corners" classes={borderClasses} />
        </div>
      <div id="utilities-shadows" className="scroll-mt-20">
        <UtilityClassReference title="Shadows" classes={shadowClasses} />
        </div>
    </div>
  );
};

export default UtilitiesSection;
</file>

<file path="template/src/pages/styleguide/NotFound.tsx">
// src/pages/NotFound.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Button } from '@ramme-io/ui';

const NotFound: React.FC = () => {
  return (
    <div className="flex flex-col items-center justify-center text-center p-12">
      <h1 className="text-9xl font-black text-primary/20">404</h1>
      <h2 className="text-3xl font-bold mt-4">Page Not Found</h2>
      <p className="text-muted-foreground mt-2 mb-6">
        Sorry, the page you are looking for does not exist.
      </p>
      {/* Wrap the Button with the Link component */}
      <Link to="/">
        <Button size="lg">Return to Style Guide</Button>
      </Link>
    </div>
  );
};

export default NotFound;
</file>

<file path="template/src/pages/styleguide/Styleguide.tsx">
import React from 'react';
import { Outlet, useLocation } from 'react-router-dom';
import { PageWithSideNav } from '../../components/PageWithSideNav';
import { useSitemap } from '../../contexts/SitemapContext';

const Styleguide: React.FC = () => {
  const location = useLocation();
  const sitemap = useSitemap();
  const isDocsTemplate = location.pathname.startsWith('/docs');

  if (isDocsTemplate) {
    // Find the 'styleguide' section from the sitemap to get its children
    const styleguideSitemapSection = sitemap.find(item => item.id === 'styleguide');
    
    // Transform the sitemap children into the shape the nav component expects
    const navItems = (styleguideSitemapSection?.children || []).map(child => ({
      label: child.title,
      href: child.path,
      icon: child.icon,
    }));

    return (
      <PageWithSideNav
        sideNavHeader={
          <h2 className="text-lg font-semibold tracking-tight mb-2">
            {styleguideSitemapSection?.title || 'Style Guide'}
          </h2>
        }
        navItems={navItems}
      >
        <Outlet />
      </PageWithSideNav>
    );
  }

  // In the dashboard template, the main layout handles navigation.
  return <Outlet />;
};

export default Styleguide;
</file>

<file path="template/src/pages/AccountingLedgerPage.tsx">
import React, { useMemo, useState } from 'react';
import {
  PageHeader,
  DataTable,
  Badge,
  type ColDef,
  type ICellRendererParams,
  // 1. Import the specific event type for cell value changes
  type CellValueChangedEvent,
} from '@ramme-io/ui';
import { mockLedgerData, type LedgerEntry } from '../data/mockLedger';

// --- Custom Renderer for Variance ---
// 2. Correctly type the component and ensure it returns a ReactNode (JSX or null)
const VarianceRenderer: React.FC<ICellRendererParams> = ({ value }) => {
  if (value === null || value === undefined) return null;
  const isPositive = value >= 0;
  const variant = isPositive ? 'success' : 'danger';
  const formattedValue = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value);
  return <Badge variant={variant}>{formattedValue}</Badge>;
};

// --- Custom Renderer for Account Status ---
// 2. Correctly type the component and ensure it returns a ReactNode (JSX or null)
const StatusRenderer: React.FC<ICellRendererParams<LedgerEntry>> = ({ data }) => {
    if (!data) return null;
    const variance = data.actual - data.budget;
    if (variance > 1000) return <Badge variant="success">On Target</Badge>;
    if (variance < -1000) return <Badge variant="danger">Over Budget</Badge>;
    return <Badge variant="warning">Watch</Badge>;
}

const AccountingLedgerPage: React.FC = () => {
  const [rowData, setRowData] = useState<LedgerEntry[]>(mockLedgerData);

  const columnDefs = useMemo<ColDef<LedgerEntry>[]>(() => [
    { field: 'category', rowGroup: true, hide: true },
    { field: 'account', headerName: 'Account', flex: 2 },
    {
      field: 'actual',
      headerName: 'Actual',
      type: 'numericColumn',
      valueFormatter: params => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(params.value),
      aggFunc: 'sum',
    },
    {
      field: 'budget',
      headerName: 'Budget',
      type: 'numericColumn',
      editable: true,
      valueFormatter: params => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(params.value),
      aggFunc: 'sum',
      // 3. Apply the specific event type to the params object
      onCellValueChanged: (params: CellValueChangedEvent<LedgerEntry>) => {
          if (params.newValue !== params.oldValue) {
              const updatedData = rowData.map(row => 
                  row.account === params.data.account ? { ...row, budget: Number(params.newValue) } : row
              );
              setRowData(updatedData);
          }
      },
    },
    {
      headerName: 'Variance',
      type: 'numericColumn',
      valueGetter: params => params.data ? params.data.actual - params.data.budget : 0,
      cellRenderer: VarianceRenderer,
      aggFunc: 'sum',
    },
    {
      headerName: 'Status',
      cellRenderer: StatusRenderer,
      flex: 1,
    }
  ], [rowData]);

  const autoGroupColumnDef: ColDef = useMemo(() => ({
    headerName: 'Category',
    minWidth: 250,
    flex: 2,
    cellRendererParams: {
      footerValueGetter: (params: any) => {
        const isRootLevel = params.node.level === -1;
        if (isRootLevel) return 'Grand Total (Net Profit)';
        return `Total ${params.node.key}`;
      },
    },
  }), []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Financial Ledger"
        description="Showcase of advanced data analysis: grouping, aggregation, in-cell editing, and custom renderers."
      />
      <DataTable
        rowData={rowData}
        columnDefs={columnDefs}
        height="calc(100vh - 280px)"
        autoGroupColumnDef={autoGroupColumnDef}
        groupDefaultExpanded={-1}
        groupIncludeFooter={true}
        groupIncludeTotalFooter={true}
      />
    </div>
  );
};

export default AccountingLedgerPage;
</file>

<file path="template/src/pages/DataGridPage.tsx">
import React, { useState, useMemo } from 'react';
import {
  PageHeader, // <-- Add PageHeader back
  DataTable,
  Button,
  Icon,
  Drawer,
  FormTemplate,
  useToast,
  Badge,
  type ColDef,
  type FormField,
  type ICellRendererParams,
} from '@ramme-io/ui';
import { useCrudLocalStorage } from '../hooks/useCrudLocalStorage';
import { mockUsers, type User } from '../data/mockUsers';

// --- Custom Cell Renderers (No changes needed here) ---
const ActionsRenderer: React.FC<ICellRendererParams & { onEdit: (data: User) => void; onDelete: (data: User) => void; }> = ({ data, onEdit, onDelete }) => (
  <div className="flex items-center justify-center gap-2 h-full">
    <Button size="sm" variant="outline" onClick={() => onEdit(data)} aria-label="Edit">
      <Icon name="edit" className="h-4 w-4" />
    </Button>
    <Button size="sm" variant="danger" onClick={() => onDelete(data)} aria-label="Delete">
      <Icon name="trash-2" className="h-4 w-4" />
    </Button>
  </div>
);
interface StatusRendererProps extends ICellRendererParams {
  value: User['status'];
}
const StatusRenderer: React.FC<StatusRendererProps> = ({ value }) => {
    const variantMap: Record<User['status'], 'success' | 'warning' | 'danger'> = {
        Active: 'success',
        Pending: 'warning',
        Banned: 'danger',
    };
    const variant = variantMap[value] || 'secondary';
    return <Badge variant={variant}>{value}</Badge>;
};


const DataGridPage: React.FC = () => {
  const { addToast } = useToast();
  const { data: users, createItem, updateItem, deleteItem } = useCrudLocalStorage<User>('users', mockUsers);

  const [isDrawerOpen, setIsDrawerOpen] = useState(false);
  const [editingUser, setEditingUser] = useState<User | null>(null);

  const handleOpenDrawer = (user: User | null = null) => {
    setEditingUser(user);
    setIsDrawerOpen(true);
  };

  // ... (handleDelete and handleFormSubmit functions remain the same)
  const handleDelete = (user: User) => {
    if (window.confirm(`Are you sure you want to delete ${user.name}?`)) {
      deleteItem(user.id);
      addToast('User deleted successfully', 'success');
    }
  };

  const handleFormSubmit = (formData: Record<string, any>) => {
    if (editingUser) {
      updateItem({ ...editingUser, ...formData });
      addToast('User updated successfully', 'success');
    } else {
      const newUser: Omit<User, 'id' | 'createdAt'> = {
        ...formData,
      } as Omit<User, 'id' | 'createdAt'>;
      createItem({ ...newUser, createdAt: new Date().toISOString() });
      addToast('User created successfully', 'success');
    }
    setIsDrawerOpen(false);
    setEditingUser(null);
  };

  // ... (columnDefs and formFields definitions remain the same)
    const columnDefs = useMemo<ColDef[]>(() => [
    { field: 'id', headerName: 'ID', width: 80, sortable: true },
    { field: 'name', headerName: 'Name', flex: 2, sortable: true, filter: 'agTextColumnFilter' },
    { field: 'email', headerName: 'Email', flex: 3, sortable: true, filter: 'agTextColumnFilter' },
    { field: 'role', headerName: 'Role', flex: 1, filter: 'agTextColumnFilter' },
    { 
        field: 'status', 
        headerName: 'Status', 
        flex: 1,
        cellRenderer: StatusRenderer,
        filter: 'agTextColumnFilter'
    },
    {
      field: 'createdAt',
      headerName: 'Created At',
      flex: 2,
      sortable: true,
      filter: 'agDateColumnFilter',
      filterParams: {
        comparator: (filterLocalDateAtMidnight: Date, cellValue: string) => {
          if (cellValue == null) return -1;
          const cellDate = new Date(cellValue);
          cellDate.setHours(0,0,0,0);
          if (filterLocalDateAtMidnight.getTime() === cellDate.getTime()) return 0;
          return cellDate < filterLocalDateAtMidnight ? -1 : 1;
        },
      },
      valueFormatter: params => new Date(params.value).toLocaleDateString(),
    },
    {
      headerName: 'Actions',
      width: 120,
      pinned: 'right',
      cellRenderer: (props: ICellRendererParams) => (
        <ActionsRenderer {...props} onEdit={handleOpenDrawer} onDelete={handleDelete} />
      ),
    },
  ], [handleDelete]);

  const formFields: FormField[] = useMemo(() => [
    { name: 'name', label: 'Full Name', type: 'text', placeholder: 'Jane Doe', required: true, value: editingUser?.name },
    { name: 'email', label: 'Email Address', type: 'email', placeholder: 'jane.doe@example.com', required: true, value: editingUser?.email },
    { name: 'username', label: 'Username', type: 'text', placeholder: 'jane.doe', required: true, value: editingUser?.username },
    { 
        name: 'role', 
        label: 'Role', 
        type: 'select', 
        options: [{value: 'Admin', label: 'Admin'}, {value: 'Editor', label: 'Editor'}, {value: 'Viewer', label: 'Viewer'}],
        value: editingUser?.role 
    },
    { 
        name: 'status', 
        label: 'Status', 
        type: 'select', 
        options: [{value: 'Active', label: 'Active'}, {value: 'Pending', label: 'Pending'}, {value: 'Banned', label: 'Banned'}],
        value: editingUser?.status 
    },
  ], [editingUser]);

  return (
    <div className="space-y-6">
      <PageHeader
        title="User Management"
        description="A complete CRUD example with persisted data and an edit-in-drawer pattern."
        actions={
          <Button
            variant="primary"
            // FIX: Changed from iconBefore to iconLeft and passed the icon name string
            iconLeft="plus"
            onClick={() => handleOpenDrawer()}
          >
            Create User
          </Button>
        }
      />
      
      <DataTable
        rowData={users}
        columnDefs={columnDefs}
        height="calc(100vh - 280px)"
        enableQuickSearch
        rowSelection="multiple"
        pagination
        paginationPageSize={10}
        // FIX: Add the page size selector to resolve the AG Grid warning
        paginationPageSizeSelector={[10, 25, 50]}
      />

      <Drawer isOpen={isDrawerOpen} onClose={() => setIsDrawerOpen(false)} title={editingUser ? 'Edit User' : 'Create New User'} size="lg">
        <div className="p-6">
            <FormTemplate
              fields={formFields}
              onSubmit={handleFormSubmit}
            >
              <div className="flex justify-end gap-2 mt-8">
                <Button variant="outline" onClick={() => setIsDrawerOpen(false)}>Cancel</Button>
                <Button type="submit">{editingUser ? 'Update User' : 'Create User'}</Button>
              </div>
            </FormTemplate>
        </div>
      </Drawer>
    </div>
  );
};

export default DataGridPage;
</file>

<file path="template/src/pages/DynamicPage.tsx">
import React from 'react';
import { PageHeader, Alert, Button, Icon } from '@ramme-io/ui';
import { appManifest } from '../config/app.manifest';
// Reuse the GhostOverlay for structure visualization
import { GhostOverlay } from '../components/dev/GhostOverlay';
// Import the Worker Bee
import { DynamicBlock } from '../components/DynamicBlock';
// Import the Hook to control the overlay
import { useDevTools } from '../hooks/useDevTools';

interface DynamicPageProps {
  pageId: string;
}

export const DynamicPage: React.FC<DynamicPageProps> = ({ pageId }) => {
  // 1. Initialize DevTools
  const { isGhostMode, toggleGhostMode } = useDevTools();

  // 2. Look up the page definition
  const pageConfig = (appManifest as any).pages?.find((p: any) => p.id === pageId);

  if (!pageConfig) {
    return (
      <div className="p-8">
        <Alert variant="danger" title="Page Not Found">
          The manifest does not contain a page with ID: <code>{pageId}</code>.
        </Alert>
      </div>
    );
  }

  return (
    <div className="space-y-8 fade-in p-6">
      <PageHeader 
        title={pageConfig.title} 
        description={pageConfig.description}
        actions={
          <Button 
            variant={isGhostMode ? 'accent' : 'outline'} 
            size="sm"
            onClick={toggleGhostMode}
            title="Toggle Ghost Mode (Ctrl+Shift+G)"
          >
            <Icon name={isGhostMode ? 'eye' : 'eye-off'} className="mr-2" />
            {isGhostMode ? 'Ghost Mode: ON' : 'Dev Tools'}
          </Button>
        }
      />

      {/* 4. Render Sections */}
      {pageConfig.sections.map((section: any) => (
        <div key={section.id} className="space-y-4">
          {section.title && <h3 className="text-xl font-semibold">{section.title}</h3>}
          
          <div 
            className="grid gap-6"
            style={{ 
              // âš¡ï¸ IMPROVEMENT: Default to 1 column (Full Width) instead of 3.
              // This fixes the "narrow table" issue immediately.
              gridTemplateColumns: `repeat(${section.layout?.columns || 1}, minmax(0, 1fr))` 
            }}
          >
            {section.blocks.map((block: any) => {
              // âš¡ï¸ IMPROVEMENT: Calculate Spanning
              // Allows a block to stretch across multiple columns if needed.
              const colSpan = block.layout?.colSpan || 1;
              const rowSpan = block.layout?.rowSpan || 1;

              return (
                <div 
                  key={block.id}
                  style={{ 
                    gridColumn: `span ${colSpan}`,
                    gridRow: `span ${rowSpan}`
                  }}
                >
                   <GhostOverlay 
                     isActive={isGhostMode}
                     componentId={block.id} 
                     componentType={block.type}
                     signalId={block.props.signalId}
                   >
                     <DynamicBlock block={block} />
                   </GhostOverlay>
                </div>
              );
            })}
          </div>
        </div>
      ))}
    </div>
  );
};

export default DynamicPage;
</file>

<file path="template/src/pages/GenericContentPage.tsx">
import React from 'react';
import { PageHeader } from '@ramme-io/ui'; // Assuming we have this

interface GenericContentPageProps {
  pageTitle: string;
  children?: React.ReactNode; // Allow for optional custom content later
}

const GenericContentPage: React.FC<GenericContentPageProps> = ({ pageTitle, children }) => {
  return (
    <div>
      <PageHeader title={pageTitle} />
      <div className="mt-6">
        {children ? (
          children
        ) : (
          <p className="text-muted-foreground">
            This is a placeholder page for "{pageTitle}". Replace this content in{' '}
            <code>src/pages/YourSpecificPage.tsx</code>.
          </p>
        )}
      </div>
    </div>
  );
};

export default GenericContentPage;
</file>

<file path="template/src/pages/LoginPage.tsx">
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { Button, Card, FormTemplate, Alert, Icon, type FormField } from '@ramme-io/ui';

const LoginPage: React.FC = () => {
  const navigate = useNavigate();
  const { login } = useAuth();
  const [error, setError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  const handleLogin = async (formData: Record<string, any>) => {
    setIsLoading(true);
    setError(null);
    try {
      const user = await login(formData.username, formData.password);
      if (user) {
        navigate('/dashboard');
      } else {
        setError('Invalid username or password.');
      }
    } catch (err) {
      setError('An unexpected error occurred.');
    } finally {
      setIsLoading(false);
    }
  };

  const formFields: FormField[] = [
    { name: 'username', label: 'Username', type: 'text', placeholder: 'e.g., jane' },
    { name: 'password', label: 'Password', type: 'password', placeholder: 'e.g., password' },
  ];

  return (
    <div className="flex min-h-screen items-center justify-center bg-background p-4">
      <Card className="w-full max-w-md p-8">
        <div className="text-center mb-8">
          <Icon name="layout-template" size={48} className="text-primary mx-auto mb-4" />
          <h1 className="text-3xl font-bold text-text">Welcome to Ramme</h1>
          <p className="text-muted-foreground">Please sign in to continue</p>
        </div>
        
        {error && <Alert variant="danger" title="Login Failed" className="mb-4">{error}</Alert>}
        
        <FormTemplate
          fields={formFields}
          onSubmit={handleLogin}
        >
          <Button type="submit" loading={isLoading} className="w-full">
            Sign In
          </Button>
        </FormTemplate>
      </Card>
    </div>
  );
};

export default LoginPage;
</file>

<file path="template/src/templates/docs/pages/Introduction.tsx">
import React from 'react';
import { Card } from '@ramme-io/ui';

const IntroductionPage: React.FC = () => {
  return (
    <Card className="p-4">
      <h2 className="text-xl font-bold mb-2">Introduction</h2>
      <p>This is the introduction page for the 'Docs' template.</p>
    </Card>
  );
};

export default IntroductionPage;
</file>

<file path="template/src/templates/docs/docs.sitemap.ts">
import { type SitemapEntry } from '../../core/sitemap-entry';

// Component Imports from the main /pages directory
import Dashboard from '../../pages/Dashboard';
import AiChat from '../../pages/AiChat';
import DataGridPage from '../../pages/DataGridPage';
import AccountingLedgerPage from '../../pages/AccountingLedgerPage';
import Styleguide from '../../pages/styleguide/Styleguide';
import DataLayout from '../../layouts/DataLayout';

// Style Guide Section Imports
import TemplatesSection from '../../pages/styleguide/sections/templates/TemplatesSection';
import LayoutSection from '../../pages/styleguide/sections/layout/LayoutSection';
import ThemingSection from '../../pages/styleguide/sections/theming/ThemingSection';
import NavigationSection from '../../pages/styleguide/sections/navigation/NavigationSection';
import TablesSection from '../../pages/styleguide/sections/tables/TablesSection';
import ChartsSection from '../../pages/styleguide/sections/charts/ChartsSection';
import ElementsSection from '../../pages/styleguide/sections/elements/ElementsSection';
import FormsSection from '../../pages/styleguide/sections/forms/FormsSection';
import FeedbackSection from '../../pages/styleguide/sections/feedback/FeedbackSection';
import UtilitiesSection from '../../pages/styleguide/sections/utilities/UtilitiesSection';
import ColorsSection from '../../pages/styleguide/sections/colors/ColorsSection';
import IconsSection from '../../pages/styleguide/sections/icons/IconsSection';

export const docsSitemap: SitemapEntry[] = [
  {
    id: 'dashboard',
    path: '', // Index route for the /docs/ layout
    title: 'Dashboard',
    icon: 'home',
    component: Dashboard,
  },
  {
    id: 'ai-chat',
    path: 'ai-chat',
    title: 'AI Chat',
    icon: 'bot',
    component: AiChat,
  },
  {
    id: 'data',
    path: 'data',
    title: 'Data',
    icon: 'database',
    component: DataLayout,
    children: [
      { id: 'grid', path: 'grid', title: 'Data Grid', component: DataGridPage, icon: 'table' },
      { id: 'ledger', path: 'ledger', title: 'Ledger', component: AccountingLedgerPage, icon: 'book-open' },
    ],
  },
  {
    id: 'styleguide',
    path: 'styleguide',
    title: 'Style Guide',
    icon: 'palette',
    component: Styleguide,
    children: [
        { id: 'templates', path: 'templates', title: 'Templates', component: TemplatesSection },
        { id: 'layout', path: 'layout', title: 'Layout', component: LayoutSection },
        { id: 'theming', path: 'theming', title: 'Theming', component: ThemingSection },
        { id: 'navigation', path: 'navigation', title: 'Navigation', component: NavigationSection },
        { id: 'tables', path: 'tables', title: 'Tables', component: TablesSection },
        { id: 'charts', path: 'charts', title: 'Charts', component: ChartsSection },
        { id: 'elements', path: 'elements', title: 'Elements', component: ElementsSection },
        { id: 'forms', path: 'forms', title: 'Forms', component: FormsSection },
        { id: 'feedback', path: 'feedback', title: 'Feedback', component: FeedbackSection },
        { id: 'utilities', path: 'utilities', title: 'Utilities', component: UtilitiesSection },
        { id: 'colors', path: 'colors', title: 'Colors', component: ColorsSection },
        { id: 'icons', path: 'icons', title: 'Icons', component: IconsSection },
    ],
  },
];
</file>

<file path="template/src/templates/docs/DocsLayout.tsx">
import React from 'react';
import { Outlet, NavLink } from 'react-router-dom';
import { docsSitemap } from './docs.sitemap';
import { SitemapProvider } from '../../contexts/SitemapContext';
import AppHeader from '../../components/AppHeader';
import AppFooter from '../../components/AppFooter';
import { Icon } from '@ramme-io/ui';
import PageTitleUpdater from '../../components/PageTitleUpdater';

const DocsLayout: React.FC = () => {
  return (
    // Add a wrapper div with the correct theme classes
    <div className="bg-background text-foreground">
      <div className="flex flex-col min-h-screen">
        <AppHeader />
        <main className="flex-grow">
          <div className="bg-background border-b border-border sticky top-16 z-30">
            <nav className="container mx-auto px-4">
              <ul className="flex items-center gap-4 h-12">
                {docsSitemap.map((item) => (
                  <li key={item.id}>
                    <NavLink
                      to={item.path || ''}
                      end={!item.children || item.children.length === 0}
                      className={({ isActive }) =>
                        `flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${
                          isActive
                            ? 'bg-primary text-primary-foreground'
                            : 'text-muted-foreground hover:bg-muted'
                        }`
                      }
                    >
                      {item.icon && <Icon name={item.icon} className="h-4 w-4" />}
                      <span>{item.title}</span>
                    </NavLink>
                  </li>
                ))}
              </ul>
            </nav>
          </div>
          <div className="container mx-auto p-4 md:p-8">
            <SitemapProvider value={docsSitemap}>
              <PageTitleUpdater />
              <Outlet />
            </SitemapProvider>
          </div>
        </main>
        <AppFooter />
      </div>
    </div>
  );
};

export default DocsLayout;
</file>

<file path="template/src/templates/settings/settings.sitemap.ts">
/**
 * @file settings.sitemap.ts
 * @repository ramme-app-starter
 * @description
 * Defines the Information Architecture (IA) for the "Settings" layout.
 * Imports components from the /pages/settings/ directory.
 */
import type { SitemapEntry } from '../../core/sitemap-entry';

// --- 1. Import from the new /pages/settings/ directory ---
import ProfilePage from '../../pages/settings/ProfilePage';
import BillingPage from '../../pages/settings/BillingPage';
import TeamPage from '../../pages/settings/TeamPage';

// --- 2. Export with the correct name ---
export const settingsSitemap: SitemapEntry[] = [
  {
    id: 'settings.profile',
    path: 'profile',
    title: 'Profile',
    icon: 'user',
    component: ProfilePage,
  },
  {
    id: 'settings.billing',
    path: 'billing',
    title: 'Billing',
    icon: 'credit-card',
    component: BillingPage,
  },
  {
    id: 'settings.team',
    path: 'team',
    title: 'Team',
    icon: 'users',
    component: TeamPage,
  },
];
</file>

<file path="template/src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="template/src/App.tsx">
import { Routes, Route, Navigate } from 'react-router-dom';
import { generateRoutes } from './core/route-generator';
import { useEffect } from 'react'; // <-- 1. Import useEffect

// --- 1. IMPORT ALL THREE TEMPLATES ---
import DashboardLayout from './templates/dashboard/DashboardLayout';
import { dashboardSitemap as dashboardSitemap } from './templates/dashboard/dashboard.sitemap';
import DocsLayout from './templates/docs/DocsLayout';
import { docsSitemap as docsSitemap } from './templates/docs/docs.sitemap';
import SettingsLayout from './templates/settings/SettingsLayout';
import { settingsSitemap as settingsSitemap } from './templates/settings/settings.sitemap';

// Other Imports
import ProtectedRoute from './components/ProtectedRoute';
import LoginPage from './pages/LoginPage';
import NotFound from './pages/styleguide/NotFound';

// --- 2. IMPORT THE SEEDER ---
import { initializeDataLake } from './core/data-seeder'; 

function App() {
  
  // âœ… 3. TRIGGER DATA SEEDING ON MOUNT
  // This checks localStorage and injects our mock database if missing.
  useEffect(() => {
    initializeDataLake();
  }, []);

  return (
    <Routes>
      <Route path="/login" element={<LoginPage />} />
      <Route element={<ProtectedRoute />}>
        {/* Default redirect to the dashboard's root */}
        <Route path="/" element={<Navigate to="/dashboard" replace />} />

        {/* Dashboard Template Routes */}
        <Route path="/dashboard/*" element={<DashboardLayout />}>
          {generateRoutes(dashboardSitemap)}
        </Route>

        {/* Docs Template Routes */}
        <Route path="/docs/*" element={<DocsLayout />}>
          {generateRoutes(docsSitemap)}
        </Route>

        {/* Settings Layout Route */}
        <Route path="/settings/*" element={<SettingsLayout />}>
          {generateRoutes(settingsSitemap)}
        </Route>
      </Route>
      <Route path="*" element={<NotFound />} />
    </Routes>
  );
}

export default App;
</file>

<file path="template/src/index.css">
@import '@ramme-io/ui/style.css';

@tailwind base;
@tailwind components;
@tailwind utilities;


/* Add this new rule */
.sidebar-panel {
  min-width: 220px !important;
}
</file>

<file path="template/src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="template/eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { globalIgnores } from 'eslint/config'

export default tseslint.config([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="template/gitignore">
node_modules
</file>

<file path="template/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/orange.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ramme - App Starter</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="template/postcss.config.cjs">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="template/tailwind.config.cjs">
const path = require('path');

// This finds the absolute path to the @ramme-io/ui package's directory
const rammeUiPath = path.dirname(require.resolve('@ramme-io/ui/package.json'));

/** @type {import('tailwindcss').Config} */
module.exports = {
  presets: [
    // Load the preset from the absolute path we found
    require(path.join(rammeUiPath, 'tailwind.preset.js'))
  ],
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
    // Scan the library's files for classes using the absolute path
    path.join(rammeUiPath, 'dist/**/*.js'),
  ],
}
</file>

<file path="template/tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="template/tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="template/tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["../vite.config.ts"]
}
</file>

<file path="template/vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  // ADD THIS SECTION to ensure the linked dependency is correctly
  // processed and watched for changes by the Vite dev server.
  optimizeDeps: {
    include: ['@ramme-io/ui'],
  },
  build: {
    commonjsOptions: {
      include: [/@ramme\/ui/, /node_modules/],
    },
  },
});
</file>

<file path=".gitignore">
node_modules
template/dist/
</file>

<file path="CHANGELOG.md">
# Changelog

All notable changes to this project will be documented in this file.
</file>

<file path="index.js">
#!/usr/bin/env node
import fs from 'fs-extra';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const projectPath = process.argv[2];

if (!projectPath) {
  console.error('Error: Please specify the project directory.');
  console.log('  Usage: npm create ramme-app@latest <project-directory>');
  process.exit(1);
}

const templatePath = path.resolve(__dirname, 'template');
const destinationPath = path.resolve(process.cwd(), projectPath);

try {
  if (!fs.existsSync(templatePath)) {
    throw new Error(`Critical Error: The template directory could not be found at ${templatePath}`);
  }

  console.log(`Creating a new Ramme app in ${destinationPath}...`);
  fs.copySync(templatePath, destinationPath);

  // --- This is the new part that renames the files ---
  const pkgJsonPath = path.join(destinationPath, 'pkg.json');
  const gitignorePath = path.join(destinationPath, 'gitignore');

  if (fs.existsSync(pkgJsonPath)) {
    fs.renameSync(pkgJsonPath, path.join(destinationPath, 'package.json'));
  }
  if (fs.existsSync(gitignorePath)) {
    fs.renameSync(gitignorePath, path.join(destinationPath, '.gitignore'));
  }
  // ---------------------------------------------------

  console.log(`\nSuccess! Your new Ramme app is ready.`);
  console.log('\nTo get started:');
  console.log(`  cd ${projectPath}`);
  console.log(`  pnpm install`);
  console.log(`  pnpm run dev\n`);

} catch (err) {
  console.error('\nAn error occurred during installation:', err);
  fs.removeSync(destinationPath); // Clean up in case of failure
  process.exit(1);
}
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2025 Excesspool Limited Liability Company

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="template/src/components/AppHeader.tsx">
/**
 * @file AppHeader.tsx
 * @repository ramme-app-starter
 * @description This is the global application header.
 *
 * @developer_notes
 * STRATEGIC REFACTOR (10/21/2025):
 * 1. Updated logo to include both the `orange.png` image and "Ramme" text.
 * 2. Kept all A.D.A.P.T. manifest, asChild, and z-index fixes.
 */
import React from 'react';
import { Link } from 'react-router-dom';
import {
  Avatar,
  Menu,
  MenuItem,
  MenuDivider,
  Icon,
  useTheme,
  type ThemeName,
} from '@ramme-io/ui';
import { useAuth } from '../contexts/AuthContext';

// --- STRATEGIC IMPORTS ---
import { appManifest } from '../config/navigation';
import type { ManifestLink } from '../core/manifest-types';
import TemplateSwitcher from './TemplateSwitcher';
import rammeLogo from '../assets/orange.png'; // <-- 1. IMPORT THE LOGO

const AppHeader: React.FC = () => {
  const { theme, availableThemes, setTheme } = useTheme();
  const { user, logout } = useAuth();
  const userNavLinks = appManifest.userMenu;

  const handleResetData = () => {
    if (
      window.confirm(
        'Are you sure you want to reset all user data to the original mock data? This cannot be undone.',
      )
    ) {
      localStorage.removeItem('users');
      window.location.reload();
    }
  };

  return (
    // Z-INDEX FIX: Set to z-50 to render above the z-40 sidebar.
    <header className="flex items-center justify-between p-4 bg-card border-b border-border shadow-sm sticky top-0 z-50">
      
      {/* --- 2. UPDATED LOGO BLOCK --- */}
      {/* Logo - links to dashboard home */}
      <Link to="/dashboard" className="flex items-center gap-2">
        <img src={rammeLogo} alt="Ramme Logo" className="h-8 w-auto" />
        <h1 className="text-2xl font-bold text-text">Ramme</h1>
      </Link>

      <div className="flex items-center gap-4">
        <TemplateSwitcher />
        {user && (
          <Menu
            trigger={
              <button className="rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                <Avatar name={user.name} size="sm" />
              </button>
            }
          >
            {/* 1. User Info (Static) */}
            <div className="p-2 text-sm text-muted-foreground">
              <p className="font-semibold text-text">{user.name}</p>
              <p>{user.email}</p>
            </div>
            <MenuDivider />

            {/* 2. Designer-Controlled Nav Links */}
            {userNavLinks.map((link: ManifestLink) => (
              <MenuItem
                key={link.id}
                asChild
                icon={link.icon ? <Icon name={link.icon} /> : undefined}
              >
                <Link to={link.path}>{link.title}</Link>
              </MenuItem>
            ))}
            <MenuDivider />

            {/* 3. App-Specific: Theme Switcher */}
            <div className="p-2 text-sm text-muted-foreground">
              <p>
                Active Theme:{' '}
                <span className="font-semibold text-text">{theme}</span>
              </p>
            </div>
            {availableThemes.map((themeName: string) => (
              <MenuItem
                key={themeName}
                onClick={() => setTheme(themeName as ThemeName)}
              >
                {themeName.charAt(0).toUpperCase() + themeName.slice(1)}
              </MenuItem>
            ))}
            <MenuDivider />

            {/* 4. App-Specific: Actions */}
            <MenuItem onClick={handleResetData} icon={<Icon name="refresh-cw" />}>
              Reset Data
            </MenuItem>
            <MenuItem onClick={logout} icon={<Icon name="log-out" />}>
              Logout
            </MenuItem>
          </Menu>
        )}
      </div>
    </header>
  );
};

export default AppHeader;
</file>

<file path="template/src/components/DynamicBlock.tsx">
import React from 'react';
import { getComponent } from '../core/component-registry';
// @ts-ignore
import { useGeneratedSignals } from '../generated/hooks';
import { getMockData } from '../data/mockData';

const mapSignalStatus = (status: string): string => {
  switch (status) {
    case 'fresh': return 'online';
    case 'stale': return 'warning';
    case 'disconnected': return 'offline';
    case 'error': return 'error';
    default: return 'offline';
  }
};

export const DynamicBlock: React.FC<any> = ({ block }) => {
  const Component = getComponent(block.type);
  const signals = useGeneratedSignals();

  const { signalId, dataId, ...staticProps } = block.props;
  
  const dynamicProps: Record<string, any> = { 
    ...staticProps,
    dataId,
    signalId 
  };

  // --- DATA INJECTION ---
  if (dataId) {
    const resolvedData = getMockData(dataId);
    dynamicProps.data = resolvedData || [];
    dynamicProps.rowData = resolvedData || [];
  }

  // --- SIGNAL INJECTION ---
  if (signalId && signals && signalId in signals) {
    // @ts-ignore
    const signalState = signals[signalId];

    if (signalState) {
      // âœ… FIX: Handle both Raw Values (Legacy) and Signal Objects (New)
      // If it's an object with a 'value' property, use that. Otherwise use it directly.
      const rawValue = (typeof signalState === 'object' && 'value' in signalState) 
        ? signalState.value 
        : signalState;

      const status = (typeof signalState === 'object' && 'status' in signalState)
        ? signalState.status
        : 'fresh'; // Default for raw values

      dynamicProps.value = typeof rawValue === 'number' ? rawValue : String(rawValue);
      dynamicProps.status = mapSignalStatus(status);
    } else {
      dynamicProps.status = mapSignalStatus('disconnected');
    }
  }

  return <Component key={block.id} {...dynamicProps} />;
};
</file>

<file path="template/src/config/dashboard.layout.ts">
/**
 * @file dashboard.layout.ts
 * Defines the schema and data for the dynamic dashboard.
 */

// 1. Define the Shape of our "Brain"
export interface DashboardItem {
  id: string;
  component: string;
  props: Record<string, any>;
  signalId?: string; // <-- Mark as Optional (?)
}

export interface DashboardSection {
  id: string;
  title: string;
  type: string;
  columns: number;
  items: DashboardItem[]; // <-- Enforce the type here
}

// 2. The Data (Typed)
export const dashboardLayout: DashboardSection[] = [
  {
    id: "section_iot",
    title: "Live Device Status",
    type: "grid", 
    columns: 3,
    items: [
      {
        id: "dev_1",
        component: "DeviceCard",
        props: {
          title: "Living Room AC",
          description: "Zone A â€¢ Floor 1",
          icon: "thermometer",
          status: "online",
          trend: "Cooling to 70Â°"
        },
        signalId: "living_room_ac" 
      },
      {
        id: "dev_2",
        component: "DeviceCard",
        props: {
          title: "Air Quality",
          description: "Sensor ID: #8842",
          icon: "droplets",
          status: "active",
          trend: "Stable"
        },
        signalId: "living_room_hum"
      },
      {
        id: "dev_3",
        component: "DeviceCard",
        props: {
          title: "Main Server",
          description: "192.168.1.42",
          icon: "server",
          status: "online",
          trend: "CPU Load"
        },
        signalId: "server_01"
      },
      {
        id: "dev_4",
        component: "DeviceCard",
        props: {
          title: "Front Door",
          description: "Entryway â€¢ Camera 01",
          icon: "lock", // This maps to the Lucide icon 'lock'
          status: "offline", // Default state before data loads
          trend: "Locked"
        },
        signalId: "front_door_lock" // <--- We will wire this next
      }
    ]
  },
  {
    id: "section_metrics",
    title: "Business Overview",
    type: "grid",
    columns: 4,
    items: [
      {
        id: "stat_1",
        component: "StatCard",
        props: {
          title: "Total Users",
          value: "1,234",
          icon: "users",
          changeText: "+10% from last month",
          changeDirection: "positive"
        }
      },
      {
        id: "stat_2",
        component: "StatCard",
        props: {
          title: "Sales Today",
          value: "$5,678",
          icon: "dollar-sign",
          changeText: "+5% from yesterday",
          changeDirection: "positive"
        }
      }
    ]
  }
];
</file>

<file path="template/src/contexts/MqttContext.tsx">
import React, { createContext, useContext, useEffect, useRef, useState } from 'react';
import mqtt, { type MqttClient } from 'mqtt';

interface MqttContextType {
  isConnected: boolean;
  lastMessage: Record<string, string>;
  publish: (topic: string, message: string) => void;
  subscribe: (topic: string) => void;
  unsubscribe: (topic: string) => void;
}

const MqttContext = createContext<MqttContextType | null>(null);

// Public Test Broker for "Out of the Box" functionality
// In a real app, this comes from config.ts
const DEFAULT_BROKER = 'wss://test.mosquitto.org:8081'; 

export const MqttProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [isConnected, setIsConnected] = useState(false);
  const [lastMessage, setLastMessage] = useState<Record<string, string>>({});
  const clientRef = useRef<MqttClient | null>(null);
  
  // Track active subscriptions to avoid double-subscribing
  const subscriptions = useRef<Set<string>>(new Set());

  useEffect(() => {
    console.log(`[MQTT] Connecting to ${DEFAULT_BROKER}...`);
    
    const client = mqtt.connect(DEFAULT_BROKER);
    clientRef.current = client;

    client.on('connect', () => {
      console.log('[MQTT] Connected âœ…');
      setIsConnected(true);
    });

    client.on('message', (topic: any, message: { toString: () => any; }) => {
      const payload = message.toString();
      setLastMessage((prev) => ({ ...prev, [topic]: payload }));
    });

    client.on('error', (err: any) => {
      console.error('[MQTT] Connection error: ', err);
      client.end();
    });

    return () => {
      console.log('[MQTT] Disconnecting...');
      client.end();
    };
  }, []);

  const subscribe = (topic: string) => {
    if (clientRef.current && !subscriptions.current.has(topic)) {
      console.log(`[MQTT] Subscribing to: ${topic}`);
      clientRef.current.subscribe(topic);
      subscriptions.current.add(topic);
    }
  };

  const unsubscribe = (topic: string) => {
    if (clientRef.current && subscriptions.current.has(topic)) {
      clientRef.current.unsubscribe(topic);
      subscriptions.current.delete(topic);
    }
  };

  const publish = (topic: string, message: string) => {
    if (clientRef.current) {
      clientRef.current.publish(topic, message);
    }
  };

  return (
    <MqttContext.Provider value={{ isConnected, lastMessage, subscribe, unsubscribe, publish }}>
      {children}
    </MqttContext.Provider>
  );
};

export const useMqtt = () => {
  const context = useContext(MqttContext);
  if (!context) throw new Error('useMqtt must be used within an MqttProvider');
  return context;
};
</file>

<file path="template/src/core/manifest-types.ts">
// src/core/manifest-types.ts

/**
 * The fundamental unit of the UI.
 * Corresponds to a specific React component in the registry.
 */
export interface Block {
  id: string;
  type: string; // e.g., 'DeviceCard', 'StatCard', 'LineChart'
  props: Record<string, any>; // Static props (title, default values)
  layout?: {
    colSpan?: number;
    rowSpan?: number;
  };
}

/**
 * A horizontal container that groups blocks together.
 * Maps to a CSS Grid or Flex container.
 */
export interface PageSection {
  id: string;
  title?: string;
  description?: string;
  layout?: {
    columns?: number; // e.g., 3 (for a 3-column grid)
    variant?: 'grid' | 'stack';
  };
  blocks: Block[];
}

/**
 * A top-level page in the application.
 */
export interface PageDefinition {
  id: string;
  slug: string;
  title: string;
  description?: string;
  sections: PageSection[];
}

/**
 * The "Brain" of the application.
 * This JSON structure drives the entire UI.
 */
export interface AppManifest {
  appName: string;
  version: string;
  pages: PageDefinition[];
}
</file>

<file path="template/src/data/mockData.ts">
/**
 * @file src/data/mockData.ts
 * @description The "Golden Copy" of seed data. 
 * These records are injected into localStorage when the app first launches.
 */

// âœ… 1. Interface for the Metadata (Schema)
export interface ResourceMeta {
  name: string;
  fields: {
    key: string;
    label: string;
    type: string;
    required?: boolean;
    defaultValue?: any;
    description?: string;
  }[];
}

// --- DATA INTERFACES ---

export interface User {
  id: string;
  name: string;
  email: string;
  role: 'admin' | 'editor' | 'viewer';
  status: 'active' | 'pending' | 'banned';
  avatar?: string;
  joinedAt: string;
}

export interface Product {
  id: string;
  name: string;
  category: string;
  price: number;
  stock: number;
  status: 'in_stock' | 'low_stock' | 'out_of_stock';
}

export interface Invoice {
  id: string;
  userId: string; // Foreign Key -> User
  amount: number;
  status: 'paid' | 'pending' | 'overdue';
  date: string;
}

export interface Review {
  id: string;
  productId: string; // Foreign Key -> Product
  rating: number;
  comment: string;
  author: string;
  date: string;
}

export interface ActivityLog {
  id: string;
  action: string;
  entity: string;
  timestamp: string;
  user: string;
}

// --- SEED DATA ---

export const SEED_USERS: User[] = [
  { id: 'usr_1', name: 'Alex Carter', email: 'alex@example.com', role: 'admin', status: 'active', joinedAt: '2023-01-15' },
  { id: 'usr_2', name: 'Sarah Jenkins', email: 'sarah@example.com', role: 'editor', status: 'active', joinedAt: '2023-03-22' },
  { id: 'usr_3', name: 'Mike Ross', email: 'mike@example.com', role: 'viewer', status: 'pending', joinedAt: '2023-05-10' },
  { id: 'usr_4', name: 'Emily Blunt', email: 'emily@example.com', role: 'editor', status: 'banned', joinedAt: '2023-06-01' },
];

export const SEED_PRODUCTS: Product[] = [
  { id: 'prod_1', name: 'ErgoChair Pro', category: 'Furniture', price: 450, stock: 12, status: 'in_stock' },
  { id: 'prod_2', name: 'Standing Desk', category: 'Furniture', price: 600, stock: 3, status: 'low_stock' },
  { id: 'prod_3', name: 'Monitor Arm', category: 'Accessories', price: 120, stock: 0, status: 'out_of_stock' },
  { id: 'prod_4', name: 'Mechanical Keyboard', category: 'Electronics', price: 180, stock: 25, status: 'in_stock' },
];

export const SEED_INVOICES: Invoice[] = [
  { id: 'inv_001', userId: 'usr_2', amount: 450.00, status: 'paid', date: '2023-10-01' },
  { id: 'inv_002', userId: 'usr_1', amount: 1200.50, status: 'pending', date: '2023-10-05' },
  { id: 'inv_003', userId: 'usr_3', amount: 180.00, status: 'overdue', date: '2023-09-15' },
  { id: 'inv_004', userId: 'usr_2', amount: 600.00, status: 'paid', date: '2023-10-10' },
];

export const SEED_REVIEWS: Review[] = [
  { id: 'rev_1', productId: 'prod_1', rating: 5, comment: 'Life changing comfort!', author: 'Alex Carter', date: '2023-09-01' },
  { id: 'rev_2', productId: 'prod_4', rating: 4, comment: 'Clicky but loud.', author: 'Mike Ross', date: '2023-09-10' },
  { id: 'rev_3', productId: 'prod_2', rating: 2, comment: 'Wobbles at max height.', author: 'Sarah Jenkins', date: '2023-09-12' },
];

export const SEED_LOGS: ActivityLog[] = [
  { id: 'log_1', action: 'User Created', entity: 'User', user: 'System', timestamp: '2023-10-01T10:00:00Z' },
  { id: 'log_2', action: 'Invoice Paid', entity: 'Invoice', user: 'Alex Carter', timestamp: '2023-10-02T14:30:00Z' },
  { id: 'log_3', action: 'Stock Updated', entity: 'Product', user: 'Sarah Jenkins', timestamp: '2023-10-03T09:15:00Z' },
];

// --- REGISTRIES ---

// 1. Data Registry (The Records)
export const DATA_REGISTRY: Record<string, any[]> = {
  users: SEED_USERS,
  products: SEED_PRODUCTS,
  invoices: SEED_INVOICES,
  reviews: SEED_REVIEWS,
  logs: SEED_LOGS,
};

// 2. Metadata Registry (The Schema/Definitions)
export const RESOURCE_METADATA: Record<string, ResourceMeta> = {
  users: {
    name: 'Users',
    fields: [
      { key: 'name', label: 'Name', type: 'text', required: true },
      { key: 'email', label: 'Email', type: 'email', required: true },
      { key: 'role', label: 'Role', type: 'status' },
      { key: 'status', label: 'Status', type: 'status' },
      { key: 'joinedAt', label: 'Joined', type: 'date' },
    ]
  },
  products: {
    name: 'Products',
    fields: [
      { key: 'name', label: 'Product Name', type: 'text', required: true },
      { key: 'category', label: 'Category', type: 'text' },
      { key: 'price', label: 'Price', type: 'currency' },
      { key: 'stock', label: 'Stock', type: 'number' },
      { key: 'status', label: 'Availability', type: 'status' },
    ]
  },
  invoices: {
    name: 'Invoices',
    fields: [
      // âœ… FIX: Changed label from 'User ID' to 'User'
      { key: 'userId', label: 'User', type: 'text', required: true },
      { key: 'amount', label: 'Amount', type: 'currency' },
      { key: 'status', label: 'Status', type: 'status' },
      { key: 'date', label: 'Date', type: 'date' },
    ]
  },
  reviews: {
    name: 'Reviews',
    fields: [
      // âœ… FIX: Changed label from 'Product ID' to 'Product'
      { key: 'productId', label: 'Product', type: 'text' },
      { key: 'rating', label: 'Rating', type: 'number' },
      { key: 'comment', label: 'Comment', type: 'text' },
      { key: 'author', label: 'Author', type: 'text' },
    ]
  },
  logs: {
    name: 'Activity Logs',
    fields: [
      { key: 'action', label: 'Action', type: 'text' },
      { key: 'entity', label: 'Entity', type: 'text' },
      { key: 'user', label: 'User', type: 'text' },
      { key: 'timestamp', label: 'Time', type: 'date' },
    ]
  }
};

// --- HELPERS ---

export const getMockData = (id: string) => DATA_REGISTRY[id] || [];

// âœ… Updated to return ResourceMeta or null (instead of never/null)
export const getResourceMeta = (id: string): ResourceMeta | null => {
  return RESOURCE_METADATA[id] || null;
};
</file>

<file path="template/src/generated/hooks.ts">
import { useSignal } from '../hooks/useSignal';

export const useGeneratedSignals = () => {
  
  // ðŸŸ¢ REAL: Connected to public MQTT test broker
  const living_room_ac = useSignal('living_room_ac', {
    initialValue: 72,
    min: 60,
    max: 90,
    unit: 'Â°F',
    topic: 'ramme/test/temp' // <--- The magic link
  });

  // ðŸŸ  MOCK: Simulation Mode
  const living_room_hum = useSignal('living_room_hum', {
    initialValue: 45,
    min: 40,
    max: 60,
    unit: '%'
  });

  const server_01 = useSignal('server_01', {
    initialValue: 42,
    min: 10,
    max: 95,
    unit: '%'
  });

  const front_door_lock = useSignal('front_door_lock', {
    initialValue: 'LOCKED',
    unit: ''
  });

  return {
    living_room_ac,
    living_room_hum,
    server_01,
    front_door_lock,
  };
};
</file>

<file path="template/src/pages/AiChat.tsx">
// ramme-app-starter/template/src/pages/AiChat.tsx
import React, { useState } from 'react';
import {
  Card,
  PageHeader,
  Conversation,
  Message,
  PromptInput,
} from '@ramme-io/ui';
import { useMockChat } from '../hooks/useMockChat'; // <--- The new brain

const AiChat: React.FC = () => {
  const { messages, isLoading, sendMessage } = useMockChat();
  const [input, setInput] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    sendMessage(input);
    setInput('');
  };

  return (
    <div className="p-4 sm:p-6 lg:p-8 space-y-8 h-[calc(100vh-64px)] flex flex-col">
      <PageHeader
        title="AI Assistant"
        description="Full-screen command center for Ramme AI."
      />
      
      {/* We use flex-1 on the Card to make it fill the remaining screen space 
         perfectly, creating that immersive "ChatGPT" feel.
      */}
      <Card className="flex-1 flex flex-col min-h-0 shadow-sm border-border/50">
        <div className="flex-1 overflow-hidden">
          <Conversation>
            {messages.map((msg) => (
              <Message
                key={msg.id}
                author={msg.author}
                content={msg.content}
                isUser={msg.isUser}
                loading={msg.loading}
                suggestions={msg.suggestions}
                onSuggestionClick={(s) => sendMessage(s)}
              />
            ))}
            {isLoading && <Message author="Bodewell AI" isUser={false} loading />}
          </Conversation>
        </div>
        
        <div className="p-4 border-t bg-card">
          <PromptInput
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onSubmit={handleSubmit}
            placeholder="Type a command or ask a question..."
          />
        </div>
      </Card>
    </div>
  );
};

export default AiChat;
</file>

<file path="template/src/templates/dashboard/dashboard.sitemap.ts">
import { type SitemapEntry } from '../../core/sitemap-entry';
import { appManifest } from '../../config/app.manifest';
import Dashboard from '../../pages/Dashboard';
import AiChat from '../../pages/AiChat';

export const dashboardSitemap: SitemapEntry[] = [];

// A. Dynamic Pages from Manifest
if (appManifest.pages) {
  appManifest.pages.forEach(page => {
    const isDashboard = page.slug === 'dashboard';
    
    dashboardSitemap.push({
      id: page.id,
      title: page.title,
      // Map root to Dashboard, others to their slug
      path: isDashboard ? '' : page.slug,
      icon: isDashboard ? 'layout-dashboard' : 'file-text',
      component: Dashboard, // Map everything to the Universal Renderer
    });
  });
}

// B. Dynamic Modules
if (appManifest.modules?.includes('ai-chat')) {
  dashboardSitemap.push({
    id: 'ai-chat',
    path: 'ai-chat',
    title: 'AI Assistant',
    icon: 'bot',
    component: AiChat,
  });
}
</file>

<file path="template/src/templates/dashboard/DashboardLayout.tsx">
import React, { useState } from 'react'; // <-- Added useState
import { Outlet, NavLink } from 'react-router-dom';
import {
  Sidebar,
  SidebarProvider,
  SidebarHeader,
  SidebarContent,
  SidebarFooter,
  SidebarMenu,
  SidebarMenuItem,
  useSidebar,
  Button,
  Icon,
  ChatFAB, // <-- NEW: Import FAB
} from '@ramme-io/ui';
import { dashboardSitemap } from './dashboard.sitemap';
import { SitemapProvider } from '../../contexts/SitemapContext';
import PageTitleUpdater from '../../components/PageTitleUpdater';
import AppHeader from '../../components/AppHeader';
import { AIChatWidget } from '../../components/AIChatWidget'; // <-- NEW: Import Widget
import { useWorkflowEngine } from '../../hooks/useWorkflowEngine';

// NavLink wrapper - Correct
const SidebarNavLink = React.forwardRef<HTMLAnchorElement, any>(
  ({ end, href, ...props }, ref) => {
    return <NavLink ref={ref} to={href || ''} {...props} end={end} />;
  },
);
SidebarNavLink.displayName = 'SidebarNavLink';

// Sidebar Content Component
const AppSidebarContent: React.FC = () => {
  const { isOpen, toggle } = useSidebar();
  return (
    <>
      <SidebarHeader>
        <div className="flex items-center justify-end w-full h-full">
          <Button
            variant="ghost"
            size="icon"
            onClick={toggle}
            className="hidden md:flex mr-1"
          >
            <Icon name={isOpen ? 'panel-left-close' : 'panel-left-open'} />
          </Button>
        </div>
      </SidebarHeader>

      <SidebarContent>
        <SidebarMenu>
          {dashboardSitemap.map((item) => (
            <React.Fragment key={item.id}>
              <SidebarMenuItem
                as={SidebarNavLink}
                href={item.path ? `/dashboard/${item.path}` : '/dashboard'}
                end
                icon={item.icon ? <Icon name={item.icon} /> : undefined}
                tooltip={item.title}
              >
                {item.title}
              </SidebarMenuItem>
              {item.children &&
                isOpen &&
                item.children.map((child) => (
                  <SidebarMenuItem
                    key={child.id}
                    as={SidebarNavLink}
                    href={`/dashboard/${item.path}/${child.path}`}
                    end
                    icon={child.icon ? <Icon name={child.icon} /> : undefined}
                    tooltip={child.title}
                    className="pl-10" 
                  >
                    {child.title}
                  </SidebarMenuItem>
                ))}
            </React.Fragment>
          ))}
        </SidebarMenu>
      </SidebarContent>

      <SidebarFooter />
    </>
  );
};

// Main Layout Component
const DashboardLayout: React.FC = () => {
  // 1. STATE: Track if the chat window is open
  const [isChatOpen, setIsChatOpen] = useState(false);
  useWorkflowEngine();

  return (
    <SitemapProvider value={dashboardSitemap}>
      <PageTitleUpdater />
      <SidebarProvider>
        <div className="flex h-screen bg-background text-foreground relative">
          <Sidebar>
            <AppSidebarContent />
          </Sidebar>
          <div className="flex flex-col flex-1 overflow-hidden">
            <AppHeader />
            <main className="flex-1 overflow-y-auto p-8">
              <Outlet />
            </main>
          </div>

          {/* --- AI COPILOT SECTION --- */}
          
          {/* 2. The Widget: Only renders when open */}
          {isChatOpen && (
            <AIChatWidget onClose={() => setIsChatOpen(false)} />
          )}

          {/* 3. The Button: Fixed to bottom-right */}
          <div className="fixed bottom-6 right-6 z-50">
            <ChatFAB 
              onClick={() => setIsChatOpen(!isChatOpen)} 
              tooltipContent={isChatOpen ? "Close Assistant" : "Open Bodewell AI"}
            />
          </div>

        </div>
      </SidebarProvider>
    </SitemapProvider>
  );
};

export default DashboardLayout;
</file>

<file path="template/src/templates/settings/SettingsLayout.tsx">
/**
 * @file SettingsLayout.tsx
 * @repository ramme-app-starter
 * @description
 * Sidebar-Only layout. Moved TemplateSwitcher to SidebarContent.
 * Includes all previous fixes (href, icons, conditional branding, providers, etc.).
 * Confirmed handleResetData is included.
 */
import React from 'react';
import { Outlet, NavLink, Link } from 'react-router-dom';
import {
  Sidebar,
  SidebarProvider,
  SidebarHeader,
  SidebarContent,
  SidebarFooter,
  SidebarMenu,
  SidebarMenuItem,
  useSidebar,
  Button,
  Icon,
  Avatar,
  Menu,
  MenuItem,
  MenuDivider,
  useTheme,
  type ThemeName,
} from '@ramme-io/ui';
import { settingsSitemap } from './settings.sitemap';
import rammeLogo from '../../assets/orange.png';
import { useAuth } from '../../contexts/AuthContext';
import { appManifest } from '../../config/navigation';
import type { ManifestLink } from '../../core/manifest-types';
import { SitemapProvider } from '../../contexts/SitemapContext';
import PageTitleUpdater from '../../components/PageTitleUpdater';
// --- Import TemplateSwitcher ---
import TemplateSwitcher from '../../components/TemplateSwitcher';

// NavLink wrapper - Correctly maps href to 'to'
const SidebarNavLink = React.forwardRef<HTMLAnchorElement, any>(
  ({ end, href, ...props }, ref) => {
    return <NavLink ref={ref} to={href || ''} {...props} end={end} />;
  },
);
SidebarNavLink.displayName = 'SidebarNavLink';

// Sidebar Content Component
const AppSidebarContent: React.FC = () => {
  const { isOpen, toggle } = useSidebar();
  const { theme, availableThemes, setTheme } = useTheme();
  const { user, logout } = useAuth();
  const userNavLinks = appManifest.userMenu;

  // --- handleResetData function remains here ---
  const handleResetData = () => {
    if (
      window.confirm(
        'Are you sure you want to reset all user data? This cannot be undone.',
      )
    ) {
      localStorage.removeItem('users');
      window.location.reload();
    }
  };

  return (
    <>
      <SidebarHeader>
        {/* Header now only contains Branding and Toggle */}
        <div className={`flex items-center w-full h-full ${isOpen ? 'justify-between' : 'justify-end'}`}>
          {/* Branding Link */}
          <Link
            to="/settings"
            className={`flex items-center gap-2 transition-opacity duration-200 ${!isOpen ? 'opacity-0 hidden' : 'opacity-100'}`}
            aria-hidden={!isOpen} tabIndex={!isOpen ? -1 : undefined}
          >
            <img src={rammeLogo} alt="Ramme Logo" className="h-7 w-auto" />
            <span className="text-xl font-bold text-text">Ramme</span>
          </Link>

          {/* TemplateSwitcher REMOVED from here */}

          {/* Toggle Button */}
          <Button
            variant="ghost" size="icon" onClick={toggle}
            className="hidden md:flex"
            aria-label={isOpen ? 'Collapse sidebar' : 'Expand sidebar'}
          >
            <Icon name={isOpen ? 'panel-left-close' : 'panel-left-open'} />
          </Button>
        </div>
      </SidebarHeader>

      <SidebarContent>
        {/* --- MOVED TemplateSwitcher HERE --- */}
        {/* Only visible when sidebar is open */}
        <div className={`mb-4 transition-opacity duration-200 ${!isOpen ? 'opacity-0 hidden' : 'opacity-100'}`}>
             <TemplateSwitcher />
        </div>

        {/* --- Sitemap Menu --- */}
        <SidebarMenu>
          {settingsSitemap.map((item) => (
            <SidebarMenuItem
              key={item.id} as={SidebarNavLink}
              href={item.path ? `/settings/${item.path}` : '/settings'} end
              icon={item.icon ? <Icon name={item.icon} /> : undefined}
              tooltip={item.title}
            >
              {item.title}
            </SidebarMenuItem>
          ))}
        </SidebarMenu>
      </SidebarContent>

      <SidebarFooter>
         {user && (
           <Menu position="top-right" trigger={
             <button className="flex items-center gap-3 w-full text-left rounded-md p-2 hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary">
               <Avatar name={user.name} size="sm" />
               <div className={`flex-1 transition-opacity duration-200 ${!isOpen ? 'opacity-0 hidden' : 'opacity-100'}`}>
                 <p className="font-semibold text-sm text-text">{user.name}</p>
                 <p className="text-xs text-muted-foreground">{user.email}</p>
               </div>
             </button>
           }>
            {/* User Menu Content */}
            {userNavLinks.map((link: ManifestLink) => (
              <MenuItem key={link.id} asChild icon={link.icon ? <Icon name={link.icon} /> : undefined}>
                <Link to={link.path}>{link.title}</Link>
              </MenuItem>
            ))}
            <MenuDivider />
            {availableThemes.map((themeName: string) => (
              <MenuItem key={themeName} onClick={() => setTheme(themeName as ThemeName)}>
                {themeName.charAt(0).toUpperCase() + themeName.slice(1)}
              </MenuItem>
            ))}
            <MenuDivider />
            {/* Calls handleResetData */}
            <MenuItem onClick={handleResetData} icon={<Icon name="refresh-cw" />}> Reset Data </MenuItem>
            {/* Calls logout */}
            <MenuItem onClick={logout} icon={<Icon name="log-out" />}> Logout </MenuItem>
          </Menu>
         )}
      </SidebarFooter>
    </>
  );
};

// Main layout component
const SettingsLayout: React.FC = () => {
  return (
    <SitemapProvider value={settingsSitemap}>
      <PageTitleUpdater />
      <SidebarProvider>
        <div className="flex h-screen bg-background text-foreground">
          <Sidebar>
            <AppSidebarContent />
          </Sidebar>
          <div className="flex flex-col flex-1 overflow-y-auto">
            <main className="p-8">
              <Outlet />
            </main>
          </div>
        </div>
      </SidebarProvider>
    </SitemapProvider>
  );
};

export default SettingsLayout;
</file>

<file path="template/src/types/signal.ts">
// src/types/signal.ts
/**
 * @file signal.d.ts
 * @description Defines the universal contract for "Live Data" in the Ramme ecosystem.
 *
 * A "Signal" is a single data point that changes over time.
 * unlike a "Record" (which is static database row), a Signal is ephemeral.
 */

export type SignalStatus = 'fresh' | 'stale' | 'disconnected' | 'error';

export interface Signal<T = any> {
  max: number;
  id: string;          // The unique ID (e.g., "temp_01")
  value: T;            // The actual data (e.g., 24.5)
  unit?: string;       // Optional unit (e.g., "Â°C")
  timestamp: number;   // Unix timestamp of last update
  status: SignalStatus;
  meta?: Record<string, any>; // Extra metadata (e.g., limits)
}

// A simple map for looking up signals by ID
export type SignalMap = Record<string, Signal>;
</file>

<file path="template/src/main.tsx">
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App.tsx';
import { ThemeProvider, ToastProvider } from '@ramme-io/ui';
import { AuthProvider } from './contexts/AuthContext'; 
import { MqttProvider } from './contexts/MqttContext';
import '@ramme-io/ui/style.css';
import './index.css';

// This import activates all AG Grid Enterprise features
import 'ag-grid-enterprise';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <ThemeProvider>
        <ToastProvider>
          <AuthProvider>
            <MqttProvider>
              <App />
            </MqttProvider>
          </AuthProvider>
        </ToastProvider>
      </ThemeProvider>
    </BrowserRouter>
  </React.StrictMode>,
);
</file>

<file path="template/src/config/app.manifest.ts">
import type { AppSpecification } from '../types/schema';

export const appManifest: AppSpecification = {
  meta: {
    name: "Ramme System Check",
    version: "1.0.0",
    description: "Verifying the Smart Runtime.",
    author: "Ramme Builder",
  },
  config: {
    theme: 'system',
    mockMode: false,
    brokerUrl: 'wss://test.mosquitto.org:8081',
  },
  domain: { signals: [], entities: [] },
  pages: [
    {
      id: "dashboard",
      slug: "dashboard",
      title: "System Status",
      description: "Verifying Week 1 Logic Engine",
      sections: [
        {
          id: "sect-users",
          title: "User Management (CRUD Test)",
          layout: { columns: 1 },
          blocks: [
            {
              id: "table_users",
              type: "SmartTable",
              props: {
                title: "Active Users",
                dataId: "users" // âœ… Points to SEED_USERS
              }
            }
          ]
        },
        {
          id: "sect-invoices",
          title: "Invoices (Relational Test)",
          layout: { columns: 1 },
          blocks: [
            {
              id: "table_invoices",
              type: "SmartTable",
              props: {
                title: "Recent Invoices",
                dataId: "invoices" // âœ… Points to SEED_INVOICES
              }
            }
          ]
        }
      ]
    }
  ]
};
</file>

<file path="template/src/core/component-registry.tsx">
import React from 'react';
import {
  DeviceCard,
  StatCard,
  BarChart,
  LineChart,
  PieChart,
  DataTable, 
  Card,
  Alert,
  EmptyState,
  ToggleSwitch
} from '@ramme-io/ui';

// âœ… IMPORT YOUR CUSTOM COMPONENT
import { SmartTable } from '../blocks/SmartTable';

export const COMPONENT_REGISTRY: Record<string, React.FC<any>> = {
  // IoT Primitives
  DeviceCard,
  
  // Data Display
  StatCard,
  BarChart,
  LineChart,
  PieChart,
  
  // Tables
  DataTable, // The raw grid
  
  // âœ… FIX: Map "SmartTable" to the actual SmartTable component
  // (Previously it was aliased to DataTable, which broke the UI)
  SmartTable: SmartTable, 
  
  // Layout & Feedback
  Card,
  Alert,
  EmptyState,
  
  // Forms/Controls
  ToggleSwitch
};

export const getComponent = (name: string) => {
  const Component = COMPONENT_REGISTRY[name];
  
  if (!Component) {
    console.warn(`[Registry] Unknown component type: "${name}"`);
    return () => (
      <Alert variant="danger" title="Unknown Component">
        The system tried to render <code>{name}</code> but it was not found in the registry.
      </Alert>
    );
  }
  return Component;
};
</file>

<file path="template/src/types/schema.ts">
import { z } from 'zod';

// ------------------------------------------------------------------
// 1. DATA RESOURCE DEFINITIONS (SaaS Layer)
// ------------------------------------------------------------------

export const FieldSchema = z.object({
  key: z.string(),
  label: z.string(),
  type: z.enum(['text', 'number', 'currency', 'date', 'boolean', 'status', 'email', 'image', 'textarea']),
  required: z.boolean().optional(),
  description: z.string().optional(),
  defaultValue: z.any().optional(),
});
export type FieldDefinition = z.infer<typeof FieldSchema>;

export const ResourceSchema = z.object({
  id: z.string(),
  name: z.string(),
  fields: z.array(FieldSchema),
  defaultView: z.enum(['table', 'grid', 'list']).optional(),
  features: z.object({
    searchable: z.boolean().optional(),
    creatable: z.boolean().optional(),
    editable: z.boolean().optional(),
    deletable: z.boolean().optional(),
    exportable: z.boolean().optional(),
  }).optional(),
});
export type ResourceDefinition = z.infer<typeof ResourceSchema>;


// ------------------------------------------------------------------
// 2. SIGNAL & IOT DEFINITIONS (Physical Layer)
// ------------------------------------------------------------------

export const SignalSchema = z.object({
  id: z.string().min(1, "Signal ID is required"),
  label: z.string(),
  description: z.string().optional(),
  kind: z.enum(['sensor', 'actuator', 'setpoint', 'metric', 'status', 'kpi']),
  source: z.enum(['mock', 'mqtt', 'http', 'derived', 'local']),
  
  // Connectivity
  topic: z.string().optional(),      
  endpoint: z.string().optional(),   
  jsonPath: z.string().optional(),   
  refreshRate: z.number().optional().default(1000), 
  
  // Values
  defaultValue: z.any().optional(),
  unit: z.string().optional(),       
  min: z.number().optional(),
  max: z.number().optional(),
});
export type SignalDefinition = z.infer<typeof SignalSchema>;

export const EntitySchema = z.object({
  id: z.string(),
  name: z.string(),
  description: z.string().optional(),
  type: z.string(), 
  category: z.string().default('logical'), 
  signals: z.array(z.string()), 
  ui: z.object({
    icon: z.string().optional(), 
    color: z.string().optional(),
    dashboardComponent: z.string().optional(),
  }).optional(),
});
export type EntityDefinition = z.infer<typeof EntitySchema>;


// ------------------------------------------------------------------
// 3. UI LAYOUT DEFINITIONS (Presentation Layer)
// ------------------------------------------------------------------

export const BlockSchema = z.object({
  id: z.string(),
  type: z.string(),
  // âœ… FIX: Explicitly define Key and Value types
  props: z.record(z.string(), z.any()), 
  layout: z.object({
    colSpan: z.number().optional(),
    rowSpan: z.number().optional(),
  }).optional(),
});

export const PageSectionSchema = z.object({
  id: z.string(),
  title: z.string().optional(),
  description: z.string().optional(),
  layout: z.object({ 
    columns: z.number().optional(), 
    variant: z.enum(['grid', 'stack', 'split']).optional() 
  }).optional(),
  blocks: z.array(BlockSchema),
});

export const PageSchema = z.object({
  id: z.string(),
  slug: z.string(),
  title: z.string(),
  description: z.string().optional(),
  icon: z.string().optional(),
  sections: z.array(PageSectionSchema),
});
export type PageDefinition = z.infer<typeof PageSchema>;


// MASTER APP SPECIFICATION
export const AppSpecificationSchema = z.object({
  meta: z.object({
    name: z.string(),
    version: z.string(),
    description: z.string().optional(),
    author: z.string().optional(),
    createdAt: z.string().optional(), // <--- ADD THIS LINE
  }),
  
  config: z.object({
    theme: z.enum(['light', 'dark', 'system', 'corporate', 'midnight', 'blueprint']).default('system'),
    mockMode: z.boolean().default(true),
    brokerUrl: z.string().optional(),
  }),

  modules: z.array(z.string()).optional(),
  resources: z.array(ResourceSchema).optional(),
  
  domain: z.object({
    signals: z.array(SignalSchema),
    entities: z.array(EntitySchema),
  }),

  pages: z.array(PageSchema).optional(),
});

export type AppSpecification = z.infer<typeof AppSpecificationSchema>;
</file>

<file path="template/DESIGNER_GUIDE.md">
## ðŸš€ Quick Start for Designers

You don't need to be a coding wizard to use this. Just follow these 3 steps:

### 1. Setup (Do this once)
You need **Node.js** installed on your computer.
- Open your terminal (Command Prompt or Terminal app).
- Type `node -v` to see if you have it. If not, download it from [nodejs.org](https://nodejs.org).

### 2. Create your Project
Run this magic command in your terminal:

```bash
npm create @ramme-io/app@latest
```

It will ask you for a project name (e.g., my-smart-home). Type it and hit Enter.

---

## Run it!

You will be prompted to name your project.

**1. Enter the project directory**
```bash
cd my-new-project
```

**2. Install dependencies**
```bash
pnpm install
# or npm install
```

**3. Start the dev server**
```bash
pnpm run dev
```

Your prototype is now running locally at `http://localhost:5173`.

---
</file>

<file path="template/README.md">
# Ramme App Starter

Welcome to your new **Ramme** application!
This project was scaffolded using `create-ramme-app`.

## ðŸš¦ Getting Started

**Install dependencies:**
```bash
npm install
# or
pnpm install
# or
yarn
```

**Start the development server:**
```bash
npm run dev
```

**Open your browser:**
Visit `http://localhost:5173` to see your app.

## ðŸ—ï¸ Project Structure

**`src/config/app.manifest.ts`**: The "Brain" of your app. Define your app's title, description, and high-level settings here.
**`src/config/sitemap.ts`**: The "Skeleton." Define your pages and navigation structure here.
**`src/core/component-registry.tsx`**: Maps JSON component names (from the builder) to actual React components.
**`src/pages`**: Your actual page components.
**`src/data`**: Mock data generators and seed files.

## ðŸŽ¨ Customization

### changing the Theme
Go to `src/index.css` or `tailwind.config.js` to update your brand colors.

### Adding New Pages
1.  Create a new component in `src/pages`.
2.  Register it in your `sitemap.ts` (or the relevant template sitemap).
3.  The `RouteGenerator` will automatically handle the routing!

## ðŸ“š Learn More

- [Ramme UI Documentation](https://ramme.io/docs)
- [Vite Documentation](https://vitejs.dev/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)
</file>

<file path="template/src/pages/Dashboard.tsx">
import React from 'react';
import { useLocation } from 'react-router-dom';
import { PageHeader, Alert } from '@ramme-io/ui';
import { appManifest } from '../config/app.manifest';
import { DynamicBlock } from '../components/DynamicBlock';

const Dashboard: React.FC = () => {
  const location = useLocation();
  
  // 1. Determine current slug from URL
  const pathParts = location.pathname.split('/').filter(Boolean);
  // If path is root or /dashboard, slug is 'dashboard', else take the last part
  const currentSlug = pathParts.length > 1 ? pathParts[pathParts.length - 1] : 'dashboard';

  // 2. Find the matching Page Definition
  const pageDef = appManifest.pages?.find(p => p.slug === currentSlug) 
    || appManifest.pages?.[0];

  if (!pageDef) {
    return (
      <div className="p-8">
        <Alert variant="warning" title="Page Not Found">
          Could not find a definition for slug: <code>{currentSlug}</code>
        </Alert>
      </div>
    );
  }

  return (
    <div className="space-y-8 relative">
      <PageHeader
        title={pageDef.title}
        description={pageDef.description}
      />

      {pageDef.sections.map((section) => (
        <div key={section.id} className="relative">
          {section.title && (
            <h3 className="text-lg font-semibold mb-4 text-foreground">
              {section.title}
            </h3>
          )}
          
          <div 
            className="grid gap-6"
            style={{ 
              gridTemplateColumns: `repeat(${section.layout?.columns || 3}, minmax(300px, 1fr))` 
            }}
          >
            {section.blocks.map((block) => (
              <DynamicBlock key={block.id} block={block} />
            ))}
          </div>
        </div>
      ))}
    </div>
  );
};

export default Dashboard;
</file>

<file path="README.md">
# Create Ramme App

[![NPM Version](https://img.shields.io/npm/v/@ramme-io/create-app.svg)](https://www.npmjs.com/package/@ramme-io/create-app) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

The easiest way to start a new **Ramme** project.
This CLI tool scaffolds a production-ready React application configured with:
- **@ramme/ui:** Our pre-built component library.
- **Tailwind CSS:** Fully configured for the Ramme design system.
- **Vite:** For lightning-fast development.
- **TypeScript:** For type-safe code.

## ðŸš€ Quick Start

Get started in seconds. No global installation required.

```bash
npm create @ramme-io/app@latest
# or
npm init @ramme-io/app@latest
```

You will be prompted to name your project.

**1. Enter the project directory**
```bash
cd my-new-project
```

**2. Install dependencies**
```bash
pnpm install
# or npm install
```

**3. Start the dev server**
```bash
pnpm run dev
```

Your prototype is now running locally at `http://localhost:5173`.

---

## The Tech Stack

This starter kit is an opinionated selection of the best open-source tools available:

* **Vite:** Next-generation tooling for instant server start and lightning-fast HMR (Hot Module Replacement).
* **React:** The standard library for building composable user interfaces.
* **TypeScript:** Statically typed JavaScript for scalable, robust application logic.
* **Tailwind CSS:** A utility-first styling engine configured with Ramme design tokens.
* **@ramme-io/ui:** A pre-installed suite of accessible, unstyled primitives based on Radix UI.

---

## Project Links

* **`@ramme-io/ui`**: The core library of visual primitives.
* **`@ramme-io/create-app`** (This Repository): The quick start kit.

---

## License

Copyright Â© 2025 Excesspool Limited Liability Company.
This project is licensed under the [MIT License](LICENSE).
</file>

<file path="template/pkg.json">
{
  "name": "ramme-app",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@ramme-io/ui": "^1.1.5",
    "mqtt": "^5.3.5",
    "zustand": "^4.5.0",
    "ag-grid-community": "^31.3.1",
    "ag-grid-enterprise": "^31.3.1",  
    "ag-grid-react": "^31.3.1",       
    "framer-motion": "^12.23.12",
    "fs-extra": "^11.3.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-resizable-panels": "^3.0.4",
    "react-router-dom": "6.30.1"
  },
  "devDependencies": {
    "@types/node": "^20.14.2",
    "@types/react": "^18.2.66",
    "@types/react-dom": "^18.2.22",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.19",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.2.2",
    "vite": "^5.2.0"
  }
}
</file>

<file path="package.json">
{
  "name": "@ramme-io/create-app",
  "version": "1.1.9",
  "type": "module",
  "bin": {
    "create-ramme-app": "./index.js"
  },
  "files": [
    "index.js",
    "template"
  ],
  "scripts": {
    "dev": "cd template && vite",
    "build": "cd template && tsc && vite build",
    "preview": "cd template && vite preview",
    "pack-tarball": "npm pack",
    "bundle:ai": "repomix --ignore '**/*.lock,**/dist/**,**/template/dist/**,**/template/node_modules/**' --output 'ramme-starter-context.txt'",
    "zip:builder": "cd template && zip -r ../base.zip . -x \"node_modules/*\" \"dist/*\" \".DS_Store\" && mv ../base.zip ../../ramme-app-builder/public/base.zip && echo 'âœ… base.zip updated in Builder!'"
  },
  "dependencies": {
    "@ramme-io/ui": "^1.1.5",
    "ag-grid-community": "^34.1.2",
    "ag-grid-enterprise": "^34.1.2",
    "ag-grid-react": "^34.1.2",
    "framer-motion": "^12.23.12",
    "fs-extra": "^11.3.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-resizable-panels": "^3.0.4",
    "react-router-dom": "6.30.1"
  },
  "devDependencies": {
    "@types/node": "^20.14.2",
    "@types/react": "^18.2.66",
    "@types/react-dom": "^18.2.22",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.19",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.2.2",
    "vite": "^5.2.0"
  },
  "pnpm": {
    "overrides": {
      "react-router-dom": "6.30.1"
    }
  }
}
</file>

</files>
